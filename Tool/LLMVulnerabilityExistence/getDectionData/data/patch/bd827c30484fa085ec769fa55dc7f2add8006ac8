{
    "llama-index-core/llama_index/core/download/integration.py": {
        "Patch": {
            "0": {
                "beforePatchRowNumber": 18,
                "afterPatchRowNumber": 18,
                "PatchRowcode": "         raise Exception(f\"Failed to pip install `{module_str}`\") from e"
            },
            "1": {
                "beforePatchRowNumber": 19,
                "afterPatchRowNumber": 19,
                "PatchRowcode": " "
            },
            "2": {
                "beforePatchRowNumber": 20,
                "afterPatchRowNumber": 20,
                "PatchRowcode": "     try:"
            },
            "3": {
                "beforePatchRowNumber": 21,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-        exec(f\"from {module_import_str} import {cls_name}\")"
            },
            "4": {
                "beforePatchRowNumber": 22,
                "afterPatchRowNumber": 21,
                "PatchRowcode": "         module_spec = importlib.util.find_spec(module_import_str)"
            },
            "5": {
                "beforePatchRowNumber": 23,
                "afterPatchRowNumber": 22,
                "PatchRowcode": "         module = importlib.util.module_from_spec(module_spec)"
            },
            "6": {
                "beforePatchRowNumber": 24,
                "afterPatchRowNumber": 23,
                "PatchRowcode": "         module_spec.loader.exec_module(module)"
            }
        },
        "frontPatchFile": [
            "\"\"\"Download pypi package.\"\"\"",
            "",
            "import importlib",
            "import subprocess",
            "import sys",
            "from typing import Any",
            "",
            "",
            "def pip_install(package: str):",
            "    subprocess.check_call([sys.executable, \"-m\", \"pip\", \"install\", package])",
            "",
            "",
            "def download_integration(module_str: str, module_import_str: str, cls_name: str) -> Any:",
            "    \"\"\"Returns an integration class by first pip installing its parent module.\"\"\"",
            "    try:",
            "        pip_install(module_str)  # this works for any integration not just packs",
            "    except Exception as e:",
            "        raise Exception(f\"Failed to pip install `{module_str}`\") from e",
            "",
            "    try:",
            "        exec(f\"from {module_import_str} import {cls_name}\")",
            "        module_spec = importlib.util.find_spec(module_import_str)",
            "        module = importlib.util.module_from_spec(module_spec)",
            "        module_spec.loader.exec_module(module)",
            "        pack_cls = getattr(module, cls_name)",
            "    except ImportError as e:",
            "        raise ImportError(f\"Unable to import {cls_name}\") from e",
            "    return pack_cls"
        ],
        "afterPatchFile": [
            "\"\"\"Download pypi package.\"\"\"",
            "",
            "import importlib",
            "import subprocess",
            "import sys",
            "from typing import Any",
            "",
            "",
            "def pip_install(package: str):",
            "    subprocess.check_call([sys.executable, \"-m\", \"pip\", \"install\", package])",
            "",
            "",
            "def download_integration(module_str: str, module_import_str: str, cls_name: str) -> Any:",
            "    \"\"\"Returns an integration class by first pip installing its parent module.\"\"\"",
            "    try:",
            "        pip_install(module_str)  # this works for any integration not just packs",
            "    except Exception as e:",
            "        raise Exception(f\"Failed to pip install `{module_str}`\") from e",
            "",
            "    try:",
            "        module_spec = importlib.util.find_spec(module_import_str)",
            "        module = importlib.util.module_from_spec(module_spec)",
            "        module_spec.loader.exec_module(module)",
            "        pack_cls = getattr(module, cls_name)",
            "    except ImportError as e:",
            "        raise ImportError(f\"Unable to import {cls_name}\") from e",
            "    return pack_cls"
        ],
        "action": [
            "0",
            "0",
            "0",
            "1",
            "0",
            "0",
            "0"
        ],
        "dele_reviseLocation": {
            "21": [
                "download_integration"
            ]
        },
        "addLocation": []
    }
}