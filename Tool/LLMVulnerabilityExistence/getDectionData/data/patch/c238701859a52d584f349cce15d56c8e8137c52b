{
    "django/contrib/admin/widgets.py": {
        "Patch": {
            "0": {
                "beforePatchRowNumber": 7,
                "afterPatchRowNumber": 7,
                "PatchRowcode": " "
            },
            "1": {
                "beforePatchRowNumber": 8,
                "afterPatchRowNumber": 8,
                "PatchRowcode": " from django import forms"
            },
            "2": {
                "beforePatchRowNumber": 9,
                "afterPatchRowNumber": 9,
                "PatchRowcode": " from django.core.exceptions import ValidationError"
            },
            "3": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 10,
                "PatchRowcode": "+from django.core.validators import URLValidator"
            },
            "4": {
                "beforePatchRowNumber": 10,
                "afterPatchRowNumber": 11,
                "PatchRowcode": " from django.db.models.deletion import CASCADE"
            },
            "5": {
                "beforePatchRowNumber": 11,
                "afterPatchRowNumber": 12,
                "PatchRowcode": " from django.urls import reverse"
            },
            "6": {
                "beforePatchRowNumber": 12,
                "afterPatchRowNumber": 13,
                "PatchRowcode": " from django.urls.exceptions import NoReverseMatch"
            },
            "7": {
                "beforePatchRowNumber": 339,
                "afterPatchRowNumber": 340,
                "PatchRowcode": " class AdminURLFieldWidget(forms.URLInput):"
            },
            "8": {
                "beforePatchRowNumber": 340,
                "afterPatchRowNumber": 341,
                "PatchRowcode": "     template_name = 'admin/widgets/url.html'"
            },
            "9": {
                "beforePatchRowNumber": 341,
                "afterPatchRowNumber": 342,
                "PatchRowcode": " "
            },
            "10": {
                "beforePatchRowNumber": 342,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-    def __init__(self, attrs=None):"
            },
            "11": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 343,
                "PatchRowcode": "+    def __init__(self, attrs=None, validator_class=URLValidator):"
            },
            "12": {
                "beforePatchRowNumber": 343,
                "afterPatchRowNumber": 344,
                "PatchRowcode": "         final_attrs = {'class': 'vURLField'}"
            },
            "13": {
                "beforePatchRowNumber": 344,
                "afterPatchRowNumber": 345,
                "PatchRowcode": "         if attrs is not None:"
            },
            "14": {
                "beforePatchRowNumber": 345,
                "afterPatchRowNumber": 346,
                "PatchRowcode": "             final_attrs.update(attrs)"
            },
            "15": {
                "beforePatchRowNumber": 346,
                "afterPatchRowNumber": 347,
                "PatchRowcode": "         super(AdminURLFieldWidget, self).__init__(attrs=final_attrs)"
            },
            "16": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 348,
                "PatchRowcode": "+        self.validator = validator_class()"
            },
            "17": {
                "beforePatchRowNumber": 347,
                "afterPatchRowNumber": 349,
                "PatchRowcode": " "
            },
            "18": {
                "beforePatchRowNumber": 348,
                "afterPatchRowNumber": 350,
                "PatchRowcode": "     def get_context(self, name, value, attrs):"
            },
            "19": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 351,
                "PatchRowcode": "+        try:"
            },
            "20": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 352,
                "PatchRowcode": "+            self.validator(value if value else '')"
            },
            "21": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 353,
                "PatchRowcode": "+            url_valid = True"
            },
            "22": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 354,
                "PatchRowcode": "+        except ValidationError:"
            },
            "23": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 355,
                "PatchRowcode": "+            url_valid = False"
            },
            "24": {
                "beforePatchRowNumber": 349,
                "afterPatchRowNumber": 356,
                "PatchRowcode": "         context = super(AdminURLFieldWidget, self).get_context(name, value, attrs)"
            },
            "25": {
                "beforePatchRowNumber": 350,
                "afterPatchRowNumber": 357,
                "PatchRowcode": "         context['current_label'] = _('Currently:')"
            },
            "26": {
                "beforePatchRowNumber": 351,
                "afterPatchRowNumber": 358,
                "PatchRowcode": "         context['change_label'] = _('Change:')"
            },
            "27": {
                "beforePatchRowNumber": 352,
                "afterPatchRowNumber": 359,
                "PatchRowcode": "         context['widget']['href'] = smart_urlquote(context['widget']['value']) if value else ''"
            },
            "28": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 360,
                "PatchRowcode": "+        context['url_valid'] = url_valid"
            },
            "29": {
                "beforePatchRowNumber": 353,
                "afterPatchRowNumber": 361,
                "PatchRowcode": "         return context"
            },
            "30": {
                "beforePatchRowNumber": 354,
                "afterPatchRowNumber": 362,
                "PatchRowcode": " "
            },
            "31": {
                "beforePatchRowNumber": 355,
                "afterPatchRowNumber": 363,
                "PatchRowcode": " "
            }
        },
        "frontPatchFile": [
            "\"\"\"",
            "Form Widget classes specific to the Django admin site.",
            "\"\"\"",
            "from __future__ import unicode_literals",
            "",
            "import copy",
            "",
            "from django import forms",
            "from django.core.exceptions import ValidationError",
            "from django.db.models.deletion import CASCADE",
            "from django.urls import reverse",
            "from django.urls.exceptions import NoReverseMatch",
            "from django.utils import six",
            "from django.utils.encoding import force_text",
            "from django.utils.html import smart_urlquote",
            "from django.utils.safestring import mark_safe",
            "from django.utils.text import Truncator",
            "from django.utils.translation import ugettext as _",
            "",
            "",
            "class FilteredSelectMultiple(forms.SelectMultiple):",
            "    \"\"\"",
            "    A SelectMultiple with a JavaScript filter interface.",
            "",
            "    Note that the resulting JavaScript assumes that the jsi18n",
            "    catalog has been loaded in the page",
            "    \"\"\"",
            "    @property",
            "    def media(self):",
            "        js = [\"core.js\", \"SelectBox.js\", \"SelectFilter2.js\"]",
            "        return forms.Media(js=[\"admin/js/%s\" % path for path in js])",
            "",
            "    def __init__(self, verbose_name, is_stacked, attrs=None, choices=()):",
            "        self.verbose_name = verbose_name",
            "        self.is_stacked = is_stacked",
            "        super(FilteredSelectMultiple, self).__init__(attrs, choices)",
            "",
            "    def get_context(self, name, value, attrs):",
            "        context = super(FilteredSelectMultiple, self).get_context(name, value, attrs)",
            "        context['widget']['attrs']['class'] = 'selectfilter'",
            "        if self.is_stacked:",
            "            context['widget']['attrs']['class'] += 'stacked'",
            "        context['widget']['attrs']['data-field-name'] = self.verbose_name",
            "        context['widget']['attrs']['data-is-stacked'] = int(self.is_stacked)",
            "        return context",
            "",
            "",
            "class AdminDateWidget(forms.DateInput):",
            "    @property",
            "    def media(self):",
            "        js = [\"calendar.js\", \"admin/DateTimeShortcuts.js\"]",
            "        return forms.Media(js=[\"admin/js/%s\" % path for path in js])",
            "",
            "    def __init__(self, attrs=None, format=None):",
            "        final_attrs = {'class': 'vDateField', 'size': '10'}",
            "        if attrs is not None:",
            "            final_attrs.update(attrs)",
            "        super(AdminDateWidget, self).__init__(attrs=final_attrs, format=format)",
            "",
            "",
            "class AdminTimeWidget(forms.TimeInput):",
            "    @property",
            "    def media(self):",
            "        js = [\"calendar.js\", \"admin/DateTimeShortcuts.js\"]",
            "        return forms.Media(js=[\"admin/js/%s\" % path for path in js])",
            "",
            "    def __init__(self, attrs=None, format=None):",
            "        final_attrs = {'class': 'vTimeField', 'size': '8'}",
            "        if attrs is not None:",
            "            final_attrs.update(attrs)",
            "        super(AdminTimeWidget, self).__init__(attrs=final_attrs, format=format)",
            "",
            "",
            "class AdminSplitDateTime(forms.SplitDateTimeWidget):",
            "    \"\"\"",
            "    A SplitDateTime Widget that has some admin-specific styling.",
            "    \"\"\"",
            "    template_name = 'admin/widgets/split_datetime.html'",
            "",
            "    def __init__(self, attrs=None):",
            "        widgets = [AdminDateWidget, AdminTimeWidget]",
            "        # Note that we're calling MultiWidget, not SplitDateTimeWidget, because",
            "        # we want to define widgets.",
            "        forms.MultiWidget.__init__(self, widgets, attrs)",
            "",
            "    def get_context(self, name, value, attrs):",
            "        context = super(AdminSplitDateTime, self).get_context(name, value, attrs)",
            "        context['date_label'] = _('Date:')",
            "        context['time_label'] = _('Time:')",
            "        return context",
            "",
            "",
            "class AdminRadioSelect(forms.RadioSelect):",
            "    template_name = 'admin/widgets/radio.html'",
            "",
            "",
            "class AdminFileWidget(forms.ClearableFileInput):",
            "    template_name = 'admin/widgets/clearable_file_input.html'",
            "",
            "",
            "def url_params_from_lookup_dict(lookups):",
            "    \"\"\"",
            "    Converts the type of lookups specified in a ForeignKey limit_choices_to",
            "    attribute to a dictionary of query parameters",
            "    \"\"\"",
            "    params = {}",
            "    if lookups and hasattr(lookups, 'items'):",
            "        items = []",
            "        for k, v in lookups.items():",
            "            if callable(v):",
            "                v = v()",
            "            if isinstance(v, (tuple, list)):",
            "                v = ','.join(str(x) for x in v)",
            "            elif isinstance(v, bool):",
            "                v = ('0', '1')[v]",
            "            else:",
            "                v = six.text_type(v)",
            "            items.append((k, v))",
            "        params.update(dict(items))",
            "    return params",
            "",
            "",
            "class ForeignKeyRawIdWidget(forms.TextInput):",
            "    \"\"\"",
            "    A Widget for displaying ForeignKeys in the \"raw_id\" interface rather than",
            "    in a <select> box.",
            "    \"\"\"",
            "    template_name = 'admin/widgets/foreign_key_raw_id.html'",
            "",
            "    def __init__(self, rel, admin_site, attrs=None, using=None):",
            "        self.rel = rel",
            "        self.admin_site = admin_site",
            "        self.db = using",
            "        super(ForeignKeyRawIdWidget, self).__init__(attrs)",
            "",
            "    def get_context(self, name, value, attrs):",
            "        context = super(ForeignKeyRawIdWidget, self).get_context(name, value, attrs)",
            "        rel_to = self.rel.model",
            "        if rel_to in self.admin_site._registry:",
            "            # The related object is registered with the same AdminSite",
            "            related_url = reverse(",
            "                'admin:%s_%s_changelist' % (",
            "                    rel_to._meta.app_label,",
            "                    rel_to._meta.model_name,",
            "                ),",
            "                current_app=self.admin_site.name,",
            "            )",
            "",
            "            params = self.url_parameters()",
            "            if params:",
            "                related_url += '?' + '&amp;'.join('%s=%s' % (k, v) for k, v in params.items())",
            "            context['related_url'] = mark_safe(related_url)",
            "            context['link_title'] = _('Lookup')",
            "            # The JavaScript code looks for this class.",
            "            context['widget']['attrs'].setdefault('class', 'vForeignKeyRawIdAdminField')",
            "        if context['widget']['value']:",
            "            context['link_label'], context['link_url'] = self.label_and_url_for_value(value)",
            "        return context",
            "",
            "    def base_url_parameters(self):",
            "        limit_choices_to = self.rel.limit_choices_to",
            "        if callable(limit_choices_to):",
            "            limit_choices_to = limit_choices_to()",
            "        return url_params_from_lookup_dict(limit_choices_to)",
            "",
            "    def url_parameters(self):",
            "        from django.contrib.admin.views.main import TO_FIELD_VAR",
            "        params = self.base_url_parameters()",
            "        params.update({TO_FIELD_VAR: self.rel.get_related_field().name})",
            "        return params",
            "",
            "    def label_and_url_for_value(self, value):",
            "        key = self.rel.get_related_field().name",
            "        try:",
            "            obj = self.rel.model._default_manager.using(self.db).get(**{key: value})",
            "        except (ValueError, self.rel.model.DoesNotExist, ValidationError):",
            "            return '', ''",
            "",
            "        try:",
            "            url = reverse(",
            "                '%s:%s_%s_change' % (",
            "                    self.admin_site.name,",
            "                    obj._meta.app_label,",
            "                    obj._meta.object_name.lower(),",
            "                ),",
            "                args=(obj.pk,)",
            "            )",
            "        except NoReverseMatch:",
            "            url = ''  # Admin not registered for target model.",
            "",
            "        return Truncator(obj).words(14, truncate='...'), url",
            "",
            "",
            "class ManyToManyRawIdWidget(ForeignKeyRawIdWidget):",
            "    \"\"\"",
            "    A Widget for displaying ManyToMany ids in the \"raw_id\" interface rather than",
            "    in a <select multiple> box.",
            "    \"\"\"",
            "    template_name = 'admin/widgets/many_to_many_raw_id.html'",
            "",
            "    def get_context(self, name, value, attrs):",
            "        context = super(ManyToManyRawIdWidget, self).get_context(name, value, attrs)",
            "        if self.rel.model in self.admin_site._registry:",
            "            # The related object is registered with the same AdminSite",
            "            context['widget']['attrs']['class'] = 'vManyToManyRawIdAdminField'",
            "        return context",
            "",
            "    def url_parameters(self):",
            "        return self.base_url_parameters()",
            "",
            "    def label_and_url_for_value(self, value):",
            "        return '', ''",
            "",
            "    def value_from_datadict(self, data, files, name):",
            "        value = data.get(name)",
            "        if value:",
            "            return value.split(',')",
            "",
            "    def format_value(self, value):",
            "        return ','.join(force_text(v) for v in value) if value else ''",
            "",
            "",
            "class RelatedFieldWidgetWrapper(forms.Widget):",
            "    \"\"\"",
            "    This class is a wrapper to a given widget to add the add icon for the",
            "    admin interface.",
            "    \"\"\"",
            "    template_name = 'admin/widgets/related_widget_wrapper.html'",
            "",
            "    def __init__(self, widget, rel, admin_site, can_add_related=None,",
            "                 can_change_related=False, can_delete_related=False):",
            "        self.needs_multipart_form = widget.needs_multipart_form",
            "        self.attrs = widget.attrs",
            "        self.choices = widget.choices",
            "        self.widget = widget",
            "        self.rel = rel",
            "        # Backwards compatible check for whether a user can add related",
            "        # objects.",
            "        if can_add_related is None:",
            "            can_add_related = rel.model in admin_site._registry",
            "        self.can_add_related = can_add_related",
            "        # XXX: The UX does not support multiple selected values.",
            "        multiple = getattr(widget, 'allow_multiple_selected', False)",
            "        self.can_change_related = not multiple and can_change_related",
            "        # XXX: The deletion UX can be confusing when dealing with cascading deletion.",
            "        cascade = getattr(rel, 'on_delete', None) is CASCADE",
            "        self.can_delete_related = not multiple and not cascade and can_delete_related",
            "        # so we can check if the related object is registered with this AdminSite",
            "        self.admin_site = admin_site",
            "",
            "    def __deepcopy__(self, memo):",
            "        obj = copy.copy(self)",
            "        obj.widget = copy.deepcopy(self.widget, memo)",
            "        obj.attrs = self.widget.attrs",
            "        memo[id(self)] = obj",
            "        return obj",
            "",
            "    @property",
            "    def is_hidden(self):",
            "        return self.widget.is_hidden",
            "",
            "    @property",
            "    def media(self):",
            "        return self.widget.media",
            "",
            "    def get_related_url(self, info, action, *args):",
            "        return reverse(\"admin:%s_%s_%s\" % (info + (action,)),",
            "                       current_app=self.admin_site.name, args=args)",
            "",
            "    def get_context(self, name, value, attrs):",
            "        from django.contrib.admin.views.main import IS_POPUP_VAR, TO_FIELD_VAR",
            "        rel_opts = self.rel.model._meta",
            "        info = (rel_opts.app_label, rel_opts.model_name)",
            "        self.widget.choices = self.choices",
            "        url_params = '&'.join(\"%s=%s\" % param for param in [",
            "            (TO_FIELD_VAR, self.rel.get_related_field().name),",
            "            (IS_POPUP_VAR, 1),",
            "        ])",
            "        context = {",
            "            'rendered_widget': self.widget.render(name, value, attrs),",
            "            'name': name,",
            "            'url_params': url_params,",
            "            'model': rel_opts.verbose_name,",
            "        }",
            "        if self.can_change_related:",
            "            change_related_template_url = self.get_related_url(info, 'change', '__fk__')",
            "            context.update(",
            "                can_change_related=True,",
            "                change_related_template_url=change_related_template_url,",
            "            )",
            "        if self.can_add_related:",
            "            add_related_url = self.get_related_url(info, 'add')",
            "            context.update(",
            "                can_add_related=True,",
            "                add_related_url=add_related_url,",
            "            )",
            "        if self.can_delete_related:",
            "            delete_related_template_url = self.get_related_url(info, 'delete', '__fk__')",
            "            context.update(",
            "                can_delete_related=True,",
            "                delete_related_template_url=delete_related_template_url,",
            "            )",
            "        return context",
            "",
            "    def value_from_datadict(self, data, files, name):",
            "        return self.widget.value_from_datadict(data, files, name)",
            "",
            "    def value_omitted_from_data(self, data, files, name):",
            "        return self.widget.value_omitted_from_data(data, files, name)",
            "",
            "    def id_for_label(self, id_):",
            "        return self.widget.id_for_label(id_)",
            "",
            "",
            "class AdminTextareaWidget(forms.Textarea):",
            "    def __init__(self, attrs=None):",
            "        final_attrs = {'class': 'vLargeTextField'}",
            "        if attrs is not None:",
            "            final_attrs.update(attrs)",
            "        super(AdminTextareaWidget, self).__init__(attrs=final_attrs)",
            "",
            "",
            "class AdminTextInputWidget(forms.TextInput):",
            "    def __init__(self, attrs=None):",
            "        final_attrs = {'class': 'vTextField'}",
            "        if attrs is not None:",
            "            final_attrs.update(attrs)",
            "        super(AdminTextInputWidget, self).__init__(attrs=final_attrs)",
            "",
            "",
            "class AdminEmailInputWidget(forms.EmailInput):",
            "    def __init__(self, attrs=None):",
            "        final_attrs = {'class': 'vTextField'}",
            "        if attrs is not None:",
            "            final_attrs.update(attrs)",
            "        super(AdminEmailInputWidget, self).__init__(attrs=final_attrs)",
            "",
            "",
            "class AdminURLFieldWidget(forms.URLInput):",
            "    template_name = 'admin/widgets/url.html'",
            "",
            "    def __init__(self, attrs=None):",
            "        final_attrs = {'class': 'vURLField'}",
            "        if attrs is not None:",
            "            final_attrs.update(attrs)",
            "        super(AdminURLFieldWidget, self).__init__(attrs=final_attrs)",
            "",
            "    def get_context(self, name, value, attrs):",
            "        context = super(AdminURLFieldWidget, self).get_context(name, value, attrs)",
            "        context['current_label'] = _('Currently:')",
            "        context['change_label'] = _('Change:')",
            "        context['widget']['href'] = smart_urlquote(context['widget']['value']) if value else ''",
            "        return context",
            "",
            "",
            "class AdminIntegerFieldWidget(forms.NumberInput):",
            "    class_name = 'vIntegerField'",
            "",
            "    def __init__(self, attrs=None):",
            "        final_attrs = {'class': self.class_name}",
            "        if attrs is not None:",
            "            final_attrs.update(attrs)",
            "        super(AdminIntegerFieldWidget, self).__init__(attrs=final_attrs)",
            "",
            "",
            "class AdminBigIntegerFieldWidget(AdminIntegerFieldWidget):",
            "    class_name = 'vBigIntegerField'"
        ],
        "afterPatchFile": [
            "\"\"\"",
            "Form Widget classes specific to the Django admin site.",
            "\"\"\"",
            "from __future__ import unicode_literals",
            "",
            "import copy",
            "",
            "from django import forms",
            "from django.core.exceptions import ValidationError",
            "from django.core.validators import URLValidator",
            "from django.db.models.deletion import CASCADE",
            "from django.urls import reverse",
            "from django.urls.exceptions import NoReverseMatch",
            "from django.utils import six",
            "from django.utils.encoding import force_text",
            "from django.utils.html import smart_urlquote",
            "from django.utils.safestring import mark_safe",
            "from django.utils.text import Truncator",
            "from django.utils.translation import ugettext as _",
            "",
            "",
            "class FilteredSelectMultiple(forms.SelectMultiple):",
            "    \"\"\"",
            "    A SelectMultiple with a JavaScript filter interface.",
            "",
            "    Note that the resulting JavaScript assumes that the jsi18n",
            "    catalog has been loaded in the page",
            "    \"\"\"",
            "    @property",
            "    def media(self):",
            "        js = [\"core.js\", \"SelectBox.js\", \"SelectFilter2.js\"]",
            "        return forms.Media(js=[\"admin/js/%s\" % path for path in js])",
            "",
            "    def __init__(self, verbose_name, is_stacked, attrs=None, choices=()):",
            "        self.verbose_name = verbose_name",
            "        self.is_stacked = is_stacked",
            "        super(FilteredSelectMultiple, self).__init__(attrs, choices)",
            "",
            "    def get_context(self, name, value, attrs):",
            "        context = super(FilteredSelectMultiple, self).get_context(name, value, attrs)",
            "        context['widget']['attrs']['class'] = 'selectfilter'",
            "        if self.is_stacked:",
            "            context['widget']['attrs']['class'] += 'stacked'",
            "        context['widget']['attrs']['data-field-name'] = self.verbose_name",
            "        context['widget']['attrs']['data-is-stacked'] = int(self.is_stacked)",
            "        return context",
            "",
            "",
            "class AdminDateWidget(forms.DateInput):",
            "    @property",
            "    def media(self):",
            "        js = [\"calendar.js\", \"admin/DateTimeShortcuts.js\"]",
            "        return forms.Media(js=[\"admin/js/%s\" % path for path in js])",
            "",
            "    def __init__(self, attrs=None, format=None):",
            "        final_attrs = {'class': 'vDateField', 'size': '10'}",
            "        if attrs is not None:",
            "            final_attrs.update(attrs)",
            "        super(AdminDateWidget, self).__init__(attrs=final_attrs, format=format)",
            "",
            "",
            "class AdminTimeWidget(forms.TimeInput):",
            "    @property",
            "    def media(self):",
            "        js = [\"calendar.js\", \"admin/DateTimeShortcuts.js\"]",
            "        return forms.Media(js=[\"admin/js/%s\" % path for path in js])",
            "",
            "    def __init__(self, attrs=None, format=None):",
            "        final_attrs = {'class': 'vTimeField', 'size': '8'}",
            "        if attrs is not None:",
            "            final_attrs.update(attrs)",
            "        super(AdminTimeWidget, self).__init__(attrs=final_attrs, format=format)",
            "",
            "",
            "class AdminSplitDateTime(forms.SplitDateTimeWidget):",
            "    \"\"\"",
            "    A SplitDateTime Widget that has some admin-specific styling.",
            "    \"\"\"",
            "    template_name = 'admin/widgets/split_datetime.html'",
            "",
            "    def __init__(self, attrs=None):",
            "        widgets = [AdminDateWidget, AdminTimeWidget]",
            "        # Note that we're calling MultiWidget, not SplitDateTimeWidget, because",
            "        # we want to define widgets.",
            "        forms.MultiWidget.__init__(self, widgets, attrs)",
            "",
            "    def get_context(self, name, value, attrs):",
            "        context = super(AdminSplitDateTime, self).get_context(name, value, attrs)",
            "        context['date_label'] = _('Date:')",
            "        context['time_label'] = _('Time:')",
            "        return context",
            "",
            "",
            "class AdminRadioSelect(forms.RadioSelect):",
            "    template_name = 'admin/widgets/radio.html'",
            "",
            "",
            "class AdminFileWidget(forms.ClearableFileInput):",
            "    template_name = 'admin/widgets/clearable_file_input.html'",
            "",
            "",
            "def url_params_from_lookup_dict(lookups):",
            "    \"\"\"",
            "    Converts the type of lookups specified in a ForeignKey limit_choices_to",
            "    attribute to a dictionary of query parameters",
            "    \"\"\"",
            "    params = {}",
            "    if lookups and hasattr(lookups, 'items'):",
            "        items = []",
            "        for k, v in lookups.items():",
            "            if callable(v):",
            "                v = v()",
            "            if isinstance(v, (tuple, list)):",
            "                v = ','.join(str(x) for x in v)",
            "            elif isinstance(v, bool):",
            "                v = ('0', '1')[v]",
            "            else:",
            "                v = six.text_type(v)",
            "            items.append((k, v))",
            "        params.update(dict(items))",
            "    return params",
            "",
            "",
            "class ForeignKeyRawIdWidget(forms.TextInput):",
            "    \"\"\"",
            "    A Widget for displaying ForeignKeys in the \"raw_id\" interface rather than",
            "    in a <select> box.",
            "    \"\"\"",
            "    template_name = 'admin/widgets/foreign_key_raw_id.html'",
            "",
            "    def __init__(self, rel, admin_site, attrs=None, using=None):",
            "        self.rel = rel",
            "        self.admin_site = admin_site",
            "        self.db = using",
            "        super(ForeignKeyRawIdWidget, self).__init__(attrs)",
            "",
            "    def get_context(self, name, value, attrs):",
            "        context = super(ForeignKeyRawIdWidget, self).get_context(name, value, attrs)",
            "        rel_to = self.rel.model",
            "        if rel_to in self.admin_site._registry:",
            "            # The related object is registered with the same AdminSite",
            "            related_url = reverse(",
            "                'admin:%s_%s_changelist' % (",
            "                    rel_to._meta.app_label,",
            "                    rel_to._meta.model_name,",
            "                ),",
            "                current_app=self.admin_site.name,",
            "            )",
            "",
            "            params = self.url_parameters()",
            "            if params:",
            "                related_url += '?' + '&amp;'.join('%s=%s' % (k, v) for k, v in params.items())",
            "            context['related_url'] = mark_safe(related_url)",
            "            context['link_title'] = _('Lookup')",
            "            # The JavaScript code looks for this class.",
            "            context['widget']['attrs'].setdefault('class', 'vForeignKeyRawIdAdminField')",
            "        if context['widget']['value']:",
            "            context['link_label'], context['link_url'] = self.label_and_url_for_value(value)",
            "        return context",
            "",
            "    def base_url_parameters(self):",
            "        limit_choices_to = self.rel.limit_choices_to",
            "        if callable(limit_choices_to):",
            "            limit_choices_to = limit_choices_to()",
            "        return url_params_from_lookup_dict(limit_choices_to)",
            "",
            "    def url_parameters(self):",
            "        from django.contrib.admin.views.main import TO_FIELD_VAR",
            "        params = self.base_url_parameters()",
            "        params.update({TO_FIELD_VAR: self.rel.get_related_field().name})",
            "        return params",
            "",
            "    def label_and_url_for_value(self, value):",
            "        key = self.rel.get_related_field().name",
            "        try:",
            "            obj = self.rel.model._default_manager.using(self.db).get(**{key: value})",
            "        except (ValueError, self.rel.model.DoesNotExist, ValidationError):",
            "            return '', ''",
            "",
            "        try:",
            "            url = reverse(",
            "                '%s:%s_%s_change' % (",
            "                    self.admin_site.name,",
            "                    obj._meta.app_label,",
            "                    obj._meta.object_name.lower(),",
            "                ),",
            "                args=(obj.pk,)",
            "            )",
            "        except NoReverseMatch:",
            "            url = ''  # Admin not registered for target model.",
            "",
            "        return Truncator(obj).words(14, truncate='...'), url",
            "",
            "",
            "class ManyToManyRawIdWidget(ForeignKeyRawIdWidget):",
            "    \"\"\"",
            "    A Widget for displaying ManyToMany ids in the \"raw_id\" interface rather than",
            "    in a <select multiple> box.",
            "    \"\"\"",
            "    template_name = 'admin/widgets/many_to_many_raw_id.html'",
            "",
            "    def get_context(self, name, value, attrs):",
            "        context = super(ManyToManyRawIdWidget, self).get_context(name, value, attrs)",
            "        if self.rel.model in self.admin_site._registry:",
            "            # The related object is registered with the same AdminSite",
            "            context['widget']['attrs']['class'] = 'vManyToManyRawIdAdminField'",
            "        return context",
            "",
            "    def url_parameters(self):",
            "        return self.base_url_parameters()",
            "",
            "    def label_and_url_for_value(self, value):",
            "        return '', ''",
            "",
            "    def value_from_datadict(self, data, files, name):",
            "        value = data.get(name)",
            "        if value:",
            "            return value.split(',')",
            "",
            "    def format_value(self, value):",
            "        return ','.join(force_text(v) for v in value) if value else ''",
            "",
            "",
            "class RelatedFieldWidgetWrapper(forms.Widget):",
            "    \"\"\"",
            "    This class is a wrapper to a given widget to add the add icon for the",
            "    admin interface.",
            "    \"\"\"",
            "    template_name = 'admin/widgets/related_widget_wrapper.html'",
            "",
            "    def __init__(self, widget, rel, admin_site, can_add_related=None,",
            "                 can_change_related=False, can_delete_related=False):",
            "        self.needs_multipart_form = widget.needs_multipart_form",
            "        self.attrs = widget.attrs",
            "        self.choices = widget.choices",
            "        self.widget = widget",
            "        self.rel = rel",
            "        # Backwards compatible check for whether a user can add related",
            "        # objects.",
            "        if can_add_related is None:",
            "            can_add_related = rel.model in admin_site._registry",
            "        self.can_add_related = can_add_related",
            "        # XXX: The UX does not support multiple selected values.",
            "        multiple = getattr(widget, 'allow_multiple_selected', False)",
            "        self.can_change_related = not multiple and can_change_related",
            "        # XXX: The deletion UX can be confusing when dealing with cascading deletion.",
            "        cascade = getattr(rel, 'on_delete', None) is CASCADE",
            "        self.can_delete_related = not multiple and not cascade and can_delete_related",
            "        # so we can check if the related object is registered with this AdminSite",
            "        self.admin_site = admin_site",
            "",
            "    def __deepcopy__(self, memo):",
            "        obj = copy.copy(self)",
            "        obj.widget = copy.deepcopy(self.widget, memo)",
            "        obj.attrs = self.widget.attrs",
            "        memo[id(self)] = obj",
            "        return obj",
            "",
            "    @property",
            "    def is_hidden(self):",
            "        return self.widget.is_hidden",
            "",
            "    @property",
            "    def media(self):",
            "        return self.widget.media",
            "",
            "    def get_related_url(self, info, action, *args):",
            "        return reverse(\"admin:%s_%s_%s\" % (info + (action,)),",
            "                       current_app=self.admin_site.name, args=args)",
            "",
            "    def get_context(self, name, value, attrs):",
            "        from django.contrib.admin.views.main import IS_POPUP_VAR, TO_FIELD_VAR",
            "        rel_opts = self.rel.model._meta",
            "        info = (rel_opts.app_label, rel_opts.model_name)",
            "        self.widget.choices = self.choices",
            "        url_params = '&'.join(\"%s=%s\" % param for param in [",
            "            (TO_FIELD_VAR, self.rel.get_related_field().name),",
            "            (IS_POPUP_VAR, 1),",
            "        ])",
            "        context = {",
            "            'rendered_widget': self.widget.render(name, value, attrs),",
            "            'name': name,",
            "            'url_params': url_params,",
            "            'model': rel_opts.verbose_name,",
            "        }",
            "        if self.can_change_related:",
            "            change_related_template_url = self.get_related_url(info, 'change', '__fk__')",
            "            context.update(",
            "                can_change_related=True,",
            "                change_related_template_url=change_related_template_url,",
            "            )",
            "        if self.can_add_related:",
            "            add_related_url = self.get_related_url(info, 'add')",
            "            context.update(",
            "                can_add_related=True,",
            "                add_related_url=add_related_url,",
            "            )",
            "        if self.can_delete_related:",
            "            delete_related_template_url = self.get_related_url(info, 'delete', '__fk__')",
            "            context.update(",
            "                can_delete_related=True,",
            "                delete_related_template_url=delete_related_template_url,",
            "            )",
            "        return context",
            "",
            "    def value_from_datadict(self, data, files, name):",
            "        return self.widget.value_from_datadict(data, files, name)",
            "",
            "    def value_omitted_from_data(self, data, files, name):",
            "        return self.widget.value_omitted_from_data(data, files, name)",
            "",
            "    def id_for_label(self, id_):",
            "        return self.widget.id_for_label(id_)",
            "",
            "",
            "class AdminTextareaWidget(forms.Textarea):",
            "    def __init__(self, attrs=None):",
            "        final_attrs = {'class': 'vLargeTextField'}",
            "        if attrs is not None:",
            "            final_attrs.update(attrs)",
            "        super(AdminTextareaWidget, self).__init__(attrs=final_attrs)",
            "",
            "",
            "class AdminTextInputWidget(forms.TextInput):",
            "    def __init__(self, attrs=None):",
            "        final_attrs = {'class': 'vTextField'}",
            "        if attrs is not None:",
            "            final_attrs.update(attrs)",
            "        super(AdminTextInputWidget, self).__init__(attrs=final_attrs)",
            "",
            "",
            "class AdminEmailInputWidget(forms.EmailInput):",
            "    def __init__(self, attrs=None):",
            "        final_attrs = {'class': 'vTextField'}",
            "        if attrs is not None:",
            "            final_attrs.update(attrs)",
            "        super(AdminEmailInputWidget, self).__init__(attrs=final_attrs)",
            "",
            "",
            "class AdminURLFieldWidget(forms.URLInput):",
            "    template_name = 'admin/widgets/url.html'",
            "",
            "    def __init__(self, attrs=None, validator_class=URLValidator):",
            "        final_attrs = {'class': 'vURLField'}",
            "        if attrs is not None:",
            "            final_attrs.update(attrs)",
            "        super(AdminURLFieldWidget, self).__init__(attrs=final_attrs)",
            "        self.validator = validator_class()",
            "",
            "    def get_context(self, name, value, attrs):",
            "        try:",
            "            self.validator(value if value else '')",
            "            url_valid = True",
            "        except ValidationError:",
            "            url_valid = False",
            "        context = super(AdminURLFieldWidget, self).get_context(name, value, attrs)",
            "        context['current_label'] = _('Currently:')",
            "        context['change_label'] = _('Change:')",
            "        context['widget']['href'] = smart_urlquote(context['widget']['value']) if value else ''",
            "        context['url_valid'] = url_valid",
            "        return context",
            "",
            "",
            "class AdminIntegerFieldWidget(forms.NumberInput):",
            "    class_name = 'vIntegerField'",
            "",
            "    def __init__(self, attrs=None):",
            "        final_attrs = {'class': self.class_name}",
            "        if attrs is not None:",
            "            final_attrs.update(attrs)",
            "        super(AdminIntegerFieldWidget, self).__init__(attrs=final_attrs)",
            "",
            "",
            "class AdminBigIntegerFieldWidget(AdminIntegerFieldWidget):",
            "    class_name = 'vBigIntegerField'"
        ],
        "action": [
            "0",
            "0",
            "0",
            "-1",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "2",
            "0",
            "0",
            "2",
            "2",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "2",
            "0",
            "0",
            "0"
        ],
        "dele_reviseLocation": {
            "342": [
                "AdminURLFieldWidget",
                "__init__"
            ]
        },
        "addLocation": []
    }
}