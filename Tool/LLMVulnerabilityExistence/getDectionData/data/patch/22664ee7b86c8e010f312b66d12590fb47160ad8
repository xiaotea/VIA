{
    "slixmpp/plugins/xep_0280/carbons.py": {
        "Patch": {
            "0": {
                "beforePatchRowNumber": 61,
                "afterPatchRowNumber": 61,
                "PatchRowcode": "         self.xmpp.plugin['xep_0030'].add_feature('urn:xmpp:carbons:2')"
            },
            "1": {
                "beforePatchRowNumber": 62,
                "afterPatchRowNumber": 62,
                "PatchRowcode": " "
            },
            "2": {
                "beforePatchRowNumber": 63,
                "afterPatchRowNumber": 63,
                "PatchRowcode": "     def _handle_carbon_received(self, msg):"
            },
            "3": {
                "beforePatchRowNumber": 64,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-        self.xmpp.event('carbon_received', msg)"
            },
            "4": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 64,
                "PatchRowcode": "+        if msg['from'].bare == self.xmpp.boundjid.bare:"
            },
            "5": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 65,
                "PatchRowcode": "+            self.xmpp.event('carbon_received', msg)"
            },
            "6": {
                "beforePatchRowNumber": 65,
                "afterPatchRowNumber": 66,
                "PatchRowcode": " "
            },
            "7": {
                "beforePatchRowNumber": 66,
                "afterPatchRowNumber": 67,
                "PatchRowcode": "     def _handle_carbon_sent(self, msg):"
            },
            "8": {
                "beforePatchRowNumber": 67,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-        self.xmpp.event('carbon_sent', msg)"
            },
            "9": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 68,
                "PatchRowcode": "+        if msg['from'].bare == self.xmpp.boundjid.bare:"
            },
            "10": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 69,
                "PatchRowcode": "+            self.xmpp.event('carbon_sent', msg)"
            },
            "11": {
                "beforePatchRowNumber": 68,
                "afterPatchRowNumber": 70,
                "PatchRowcode": " "
            },
            "12": {
                "beforePatchRowNumber": 69,
                "afterPatchRowNumber": 71,
                "PatchRowcode": "     def enable(self, ifrom=None, timeout=None, callback=None,"
            },
            "13": {
                "beforePatchRowNumber": 70,
                "afterPatchRowNumber": 72,
                "PatchRowcode": "                timeout_callback=None):"
            }
        },
        "frontPatchFile": [
            "\"\"\"",
            "    Slixmpp: The Slick XMPP Library",
            "    Copyright (C) 2012 Nathanael C. Fritz, Lance J.T. Stout",
            "    This file is part of Slixmpp.",
            "",
            "    See the file LICENSE for copying permissio",
            "\"\"\"",
            "",
            "import logging",
            "",
            "import slixmpp",
            "from slixmpp.stanza import Message, Iq",
            "from slixmpp.xmlstream.handler import Callback",
            "from slixmpp.xmlstream.matcher import StanzaPath",
            "from slixmpp.xmlstream import register_stanza_plugin",
            "from slixmpp.plugins import BasePlugin",
            "from slixmpp.plugins.xep_0280 import stanza",
            "",
            "",
            "log = logging.getLogger(__name__)",
            "",
            "",
            "class XEP_0280(BasePlugin):",
            "",
            "    \"\"\"",
            "    XEP-0280 Message Carbons",
            "    \"\"\"",
            "",
            "    name = 'xep_0280'",
            "    description = 'XEP-0280: Message Carbons'",
            "    dependencies = {'xep_0030', 'xep_0297'}",
            "    stanza = stanza",
            "",
            "    def plugin_init(self):",
            "        self.xmpp.register_handler(",
            "            Callback('Carbon Received',",
            "                     StanzaPath('message/carbon_received'),",
            "                     self._handle_carbon_received))",
            "        self.xmpp.register_handler(",
            "            Callback('Carbon Sent',",
            "                     StanzaPath('message/carbon_sent'),",
            "                     self._handle_carbon_sent))",
            "",
            "        register_stanza_plugin(Message, stanza.ReceivedCarbon)",
            "        register_stanza_plugin(Message, stanza.SentCarbon)",
            "        register_stanza_plugin(Message, stanza.PrivateCarbon)",
            "        register_stanza_plugin(Iq, stanza.CarbonEnable)",
            "        register_stanza_plugin(Iq, stanza.CarbonDisable)",
            "",
            "        register_stanza_plugin(stanza.ReceivedCarbon,",
            "                               self.xmpp['xep_0297'].stanza.Forwarded)",
            "        register_stanza_plugin(stanza.SentCarbon,",
            "                               self.xmpp['xep_0297'].stanza.Forwarded)",
            "",
            "    def plugin_end(self):",
            "        self.xmpp.remove_handler('Carbon Received')",
            "        self.xmpp.remove_handler('Carbon Sent')",
            "        self.xmpp.plugin['xep_0030'].del_feature(feature='urn:xmpp:carbons:2')",
            "",
            "    def session_bind(self, jid):",
            "        self.xmpp.plugin['xep_0030'].add_feature('urn:xmpp:carbons:2')",
            "",
            "    def _handle_carbon_received(self, msg):",
            "        self.xmpp.event('carbon_received', msg)",
            "",
            "    def _handle_carbon_sent(self, msg):",
            "        self.xmpp.event('carbon_sent', msg)",
            "",
            "    def enable(self, ifrom=None, timeout=None, callback=None,",
            "               timeout_callback=None):",
            "        iq = self.xmpp.Iq()",
            "        iq['type'] = 'set'",
            "        iq['from'] = ifrom",
            "        iq.enable('carbon_enable')",
            "        return iq.send(timeout_callback=timeout_callback, timeout=timeout,",
            "                       callback=callback)",
            "",
            "    def disable(self, ifrom=None, timeout=None, callback=None,",
            "                timeout_callback=None):",
            "        iq = self.xmpp.Iq()",
            "        iq['type'] = 'set'",
            "        iq['from'] = ifrom",
            "        iq.enable('carbon_disable')",
            "        return iq.send(timeout_callback=timeout_callback, timeout=timeout,",
            "                       callback=callback)"
        ],
        "afterPatchFile": [
            "\"\"\"",
            "    Slixmpp: The Slick XMPP Library",
            "    Copyright (C) 2012 Nathanael C. Fritz, Lance J.T. Stout",
            "    This file is part of Slixmpp.",
            "",
            "    See the file LICENSE for copying permissio",
            "\"\"\"",
            "",
            "import logging",
            "",
            "import slixmpp",
            "from slixmpp.stanza import Message, Iq",
            "from slixmpp.xmlstream.handler import Callback",
            "from slixmpp.xmlstream.matcher import StanzaPath",
            "from slixmpp.xmlstream import register_stanza_plugin",
            "from slixmpp.plugins import BasePlugin",
            "from slixmpp.plugins.xep_0280 import stanza",
            "",
            "",
            "log = logging.getLogger(__name__)",
            "",
            "",
            "class XEP_0280(BasePlugin):",
            "",
            "    \"\"\"",
            "    XEP-0280 Message Carbons",
            "    \"\"\"",
            "",
            "    name = 'xep_0280'",
            "    description = 'XEP-0280: Message Carbons'",
            "    dependencies = {'xep_0030', 'xep_0297'}",
            "    stanza = stanza",
            "",
            "    def plugin_init(self):",
            "        self.xmpp.register_handler(",
            "            Callback('Carbon Received',",
            "                     StanzaPath('message/carbon_received'),",
            "                     self._handle_carbon_received))",
            "        self.xmpp.register_handler(",
            "            Callback('Carbon Sent',",
            "                     StanzaPath('message/carbon_sent'),",
            "                     self._handle_carbon_sent))",
            "",
            "        register_stanza_plugin(Message, stanza.ReceivedCarbon)",
            "        register_stanza_plugin(Message, stanza.SentCarbon)",
            "        register_stanza_plugin(Message, stanza.PrivateCarbon)",
            "        register_stanza_plugin(Iq, stanza.CarbonEnable)",
            "        register_stanza_plugin(Iq, stanza.CarbonDisable)",
            "",
            "        register_stanza_plugin(stanza.ReceivedCarbon,",
            "                               self.xmpp['xep_0297'].stanza.Forwarded)",
            "        register_stanza_plugin(stanza.SentCarbon,",
            "                               self.xmpp['xep_0297'].stanza.Forwarded)",
            "",
            "    def plugin_end(self):",
            "        self.xmpp.remove_handler('Carbon Received')",
            "        self.xmpp.remove_handler('Carbon Sent')",
            "        self.xmpp.plugin['xep_0030'].del_feature(feature='urn:xmpp:carbons:2')",
            "",
            "    def session_bind(self, jid):",
            "        self.xmpp.plugin['xep_0030'].add_feature('urn:xmpp:carbons:2')",
            "",
            "    def _handle_carbon_received(self, msg):",
            "        if msg['from'].bare == self.xmpp.boundjid.bare:",
            "            self.xmpp.event('carbon_received', msg)",
            "",
            "    def _handle_carbon_sent(self, msg):",
            "        if msg['from'].bare == self.xmpp.boundjid.bare:",
            "            self.xmpp.event('carbon_sent', msg)",
            "",
            "    def enable(self, ifrom=None, timeout=None, callback=None,",
            "               timeout_callback=None):",
            "        iq = self.xmpp.Iq()",
            "        iq['type'] = 'set'",
            "        iq['from'] = ifrom",
            "        iq.enable('carbon_enable')",
            "        return iq.send(timeout_callback=timeout_callback, timeout=timeout,",
            "                       callback=callback)",
            "",
            "    def disable(self, ifrom=None, timeout=None, callback=None,",
            "                timeout_callback=None):",
            "        iq = self.xmpp.Iq()",
            "        iq['type'] = 'set'",
            "        iq['from'] = ifrom",
            "        iq.enable('carbon_disable')",
            "        return iq.send(timeout_callback=timeout_callback, timeout=timeout,",
            "                       callback=callback)"
        ],
        "action": [
            "0",
            "0",
            "0",
            "2",
            "2",
            "2",
            "0",
            "0",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0"
        ],
        "dele_reviseLocation": {
            "64": [
                "XEP_0280",
                "_handle_carbon_received"
            ],
            "67": [
                "XEP_0280",
                "_handle_carbon_sent"
            ]
        },
        "addLocation": []
    }
}