{
    "src/pyload/core/utils/misc.py": {
        "Patch": {
            "0": {
                "beforePatchRowNumber": 5,
                "afterPatchRowNumber": 5,
                "PatchRowcode": " import sys"
            },
            "1": {
                "beforePatchRowNumber": 6,
                "afterPatchRowNumber": 6,
                "PatchRowcode": " "
            },
            "2": {
                "beforePatchRowNumber": 7,
                "afterPatchRowNumber": 7,
                "PatchRowcode": " if sys.version_info < (3, 12):"
            },
            "3": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 8,
                "PatchRowcode": "+    def monkey_patch():"
            },
            "4": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 9,
                "PatchRowcode": "+        \"\"\"Patching js2py for CVE-2024-28397\"\"\""
            },
            "5": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 10,
                "PatchRowcode": "+        from js2py.constructors.jsobject import Object"
            },
            "6": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 11,
                "PatchRowcode": "+        fn = Object.own[\"getOwnPropertyNames\"][\"value\"].code"
            },
            "7": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 12,
                "PatchRowcode": "+"
            },
            "8": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 13,
                "PatchRowcode": "+        def wraps(*args, **kwargs):"
            },
            "9": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 14,
                "PatchRowcode": "+            result = fn(*args, **kwargs)"
            },
            "10": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 15,
                "PatchRowcode": "+            return list(result)"
            },
            "11": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 16,
                "PatchRowcode": "+        Object.own[\"getOwnPropertyNames\"][\"value\"].code = wraps"
            },
            "12": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 17,
                "PatchRowcode": "+"
            },
            "13": {
                "beforePatchRowNumber": 8,
                "afterPatchRowNumber": 18,
                "PatchRowcode": "     import js2py"
            },
            "14": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 19,
                "PatchRowcode": "+    monkey_patch()"
            },
            "15": {
                "beforePatchRowNumber": 9,
                "afterPatchRowNumber": 20,
                "PatchRowcode": "     js2py.disable_pyimport()"
            },
            "16": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 21,
                "PatchRowcode": "+"
            },
            "17": {
                "beforePatchRowNumber": 10,
                "afterPatchRowNumber": 22,
                "PatchRowcode": " else:"
            },
            "18": {
                "beforePatchRowNumber": 11,
                "afterPatchRowNumber": 23,
                "PatchRowcode": "     import dukpy"
            },
            "19": {
                "beforePatchRowNumber": 12,
                "afterPatchRowNumber": 24,
                "PatchRowcode": " "
            }
        },
        "frontPatchFile": [
            "# -*- coding: utf-8 -*-",
            "",
            "import random",
            "import string",
            "import sys",
            "",
            "if sys.version_info < (3, 12):",
            "    import js2py",
            "    js2py.disable_pyimport()",
            "else:",
            "    import dukpy",
            "",
            "",
            "def random_string(length, valid_chars=string.ascii_letters + string.digits + string.punctuation):",
            "    return \"\".join(random.choice(valid_chars) for _ in range(length))",
            "",
            "",
            "def is_plural(value):",
            "    try:",
            "        n = abs(float(value))",
            "        return n == 0 or n > 1",
            "    except ValueError:",
            "        return value.endswith(\"s\")  # TODO: detect uncommon plurals",
            "",
            "",
            "def eval_js(script, es6=False):",
            "    if sys.version_info < (3, 12):",
            "        return (js2py.eval_js6 if es6 else js2py.eval_js)(script)",
            "    else:",
            "        return dukpy.evaljs(script)",
            "",
            "",
            "def accumulate(iterable, to_map=None):",
            "    \"\"\"",
            "    Accumulate (key, value) data to {value : [key]} dictionary.",
            "    \"\"\"",
            "    if to_map is None:",
            "        to_map = {}",
            "    for key, value in iterable:",
            "        to_map.setdefault(value, []).append(key)",
            "    return to_map",
            "",
            "",
            "def reversemap(obj):",
            "    \"\"\"",
            "    Invert mapping object preserving type and ordering.",
            "    \"\"\"",
            "    return obj.__class__(reversed(item) for item in obj.items())",
            "",
            "",
            "# def get_translation(domain, localedir=None, languages=None, class_=None,",
            "# fallback=False, codeset=None):",
            "# try:",
            "# trans = gettext.translation(",
            "# domain, localedir, languages, class_, False, codeset)",
            "# except (IOError, OSError):",
            "# if not fallback:",
            "# raise",
            "# trans = gettext.translation(",
            "# domain, localedir, None, class_, fallback, codeset)",
            "# return trans",
            "",
            "",
            "# def install_translation(domain, localedir=None, languages=None,",
            "# class_=None, fallback=False, codeset=None):",
            "# trans = get_translation(",
            "# domain, localedir, languages, class_, fallback, codeset)",
            "# try:",
            "# trans.install(str=True)",
            "# except TypeError:",
            "# trans.install()"
        ],
        "afterPatchFile": [
            "# -*- coding: utf-8 -*-",
            "",
            "import random",
            "import string",
            "import sys",
            "",
            "if sys.version_info < (3, 12):",
            "    def monkey_patch():",
            "        \"\"\"Patching js2py for CVE-2024-28397\"\"\"",
            "        from js2py.constructors.jsobject import Object",
            "        fn = Object.own[\"getOwnPropertyNames\"][\"value\"].code",
            "",
            "        def wraps(*args, **kwargs):",
            "            result = fn(*args, **kwargs)",
            "            return list(result)",
            "        Object.own[\"getOwnPropertyNames\"][\"value\"].code = wraps",
            "",
            "    import js2py",
            "    monkey_patch()",
            "    js2py.disable_pyimport()",
            "",
            "else:",
            "    import dukpy",
            "",
            "",
            "def random_string(length, valid_chars=string.ascii_letters + string.digits + string.punctuation):",
            "    return \"\".join(random.choice(valid_chars) for _ in range(length))",
            "",
            "",
            "def is_plural(value):",
            "    try:",
            "        n = abs(float(value))",
            "        return n == 0 or n > 1",
            "    except ValueError:",
            "        return value.endswith(\"s\")  # TODO: detect uncommon plurals",
            "",
            "",
            "def eval_js(script, es6=False):",
            "    if sys.version_info < (3, 12):",
            "        return (js2py.eval_js6 if es6 else js2py.eval_js)(script)",
            "    else:",
            "        return dukpy.evaljs(script)",
            "",
            "",
            "def accumulate(iterable, to_map=None):",
            "    \"\"\"",
            "    Accumulate (key, value) data to {value : [key]} dictionary.",
            "    \"\"\"",
            "    if to_map is None:",
            "        to_map = {}",
            "    for key, value in iterable:",
            "        to_map.setdefault(value, []).append(key)",
            "    return to_map",
            "",
            "",
            "def reversemap(obj):",
            "    \"\"\"",
            "    Invert mapping object preserving type and ordering.",
            "    \"\"\"",
            "    return obj.__class__(reversed(item) for item in obj.items())",
            "",
            "",
            "# def get_translation(domain, localedir=None, languages=None, class_=None,",
            "# fallback=False, codeset=None):",
            "# try:",
            "# trans = gettext.translation(",
            "# domain, localedir, languages, class_, False, codeset)",
            "# except (IOError, OSError):",
            "# if not fallback:",
            "# raise",
            "# trans = gettext.translation(",
            "# domain, localedir, None, class_, fallback, codeset)",
            "# return trans",
            "",
            "",
            "# def install_translation(domain, localedir=None, languages=None,",
            "# class_=None, fallback=False, codeset=None):",
            "# trans = get_translation(",
            "# domain, localedir, languages, class_, fallback, codeset)",
            "# try:",
            "# trans.install(str=True)",
            "# except TypeError:",
            "# trans.install()"
        ],
        "action": [
            "0",
            "0",
            "0",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "0",
            "-1",
            "0",
            "-1",
            "0",
            "0",
            "0"
        ],
        "dele_reviseLocation": {},
        "addLocation": [
            "src.pyload.core.utils.misc",
            "tensorflow.python.keras.engine.functional_test"
        ]
    }
}