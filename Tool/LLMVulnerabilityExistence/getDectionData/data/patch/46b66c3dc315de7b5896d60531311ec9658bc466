{
    "txaws/service.py": {
        "Patch": {
            "0": {
                "beforePatchRowNumber": 2,
                "afterPatchRowNumber": 2,
                "PatchRowcode": " # Copyright (C) 2009 Robert Collins <robertc@robertcollins.net>"
            },
            "1": {
                "beforePatchRowNumber": 3,
                "afterPatchRowNumber": 3,
                "PatchRowcode": " # Licenced under the txaws licence available at /LICENSE in the txaws source."
            },
            "2": {
                "beforePatchRowNumber": 4,
                "afterPatchRowNumber": 4,
                "PatchRowcode": " "
            },
            "3": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 5,
                "PatchRowcode": "+import warnings"
            },
            "4": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 6,
                "PatchRowcode": "+"
            },
            "5": {
                "beforePatchRowNumber": 5,
                "afterPatchRowNumber": 7,
                "PatchRowcode": " from txaws.credentials import AWSCredentials"
            },
            "6": {
                "beforePatchRowNumber": 6,
                "afterPatchRowNumber": 8,
                "PatchRowcode": " from txaws import regions"
            },
            "7": {
                "beforePatchRowNumber": 7,
                "afterPatchRowNumber": 9,
                "PatchRowcode": " from txaws.util import parse"
            },
            "8": {
                "beforePatchRowNumber": 42,
                "afterPatchRowNumber": 44,
                "PatchRowcode": "         will be done when connecting to the endpoint."
            },
            "9": {
                "beforePatchRowNumber": 43,
                "afterPatchRowNumber": 45,
                "PatchRowcode": "     \"\"\""
            },
            "10": {
                "beforePatchRowNumber": 44,
                "afterPatchRowNumber": 46,
                "PatchRowcode": " "
            },
            "11": {
                "beforePatchRowNumber": 45,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-    def __init__(self, uri=\"\", method=\"GET\", ssl_hostname_verification=False):"
            },
            "12": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 47,
                "PatchRowcode": "+    def __init__(self, uri=\"\", method=\"GET\", ssl_hostname_verification=True):"
            },
            "13": {
                "beforePatchRowNumber": 46,
                "afterPatchRowNumber": 48,
                "PatchRowcode": "         self.host = \"\""
            },
            "14": {
                "beforePatchRowNumber": 47,
                "afterPatchRowNumber": 49,
                "PatchRowcode": "         self.port = None"
            },
            "15": {
                "beforePatchRowNumber": 48,
                "afterPatchRowNumber": 50,
                "PatchRowcode": "         self.path = \"/\""
            },
            "16": {
                "beforePatchRowNumber": 49,
                "afterPatchRowNumber": 51,
                "PatchRowcode": "         self.method = method"
            },
            "17": {
                "beforePatchRowNumber": 50,
                "afterPatchRowNumber": 52,
                "PatchRowcode": "         self.ssl_hostname_verification = ssl_hostname_verification"
            },
            "18": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 53,
                "PatchRowcode": "+        if not self.ssl_hostname_verification:"
            },
            "19": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 54,
                "PatchRowcode": "+            warnings.warn("
            },
            "20": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 55,
                "PatchRowcode": "+                \"Operating with certificate verification disabled!\", stacklevel=2,"
            },
            "21": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 56,
                "PatchRowcode": "+            )"
            },
            "22": {
                "beforePatchRowNumber": 51,
                "afterPatchRowNumber": 57,
                "PatchRowcode": "         self._parse_uri(uri)"
            },
            "23": {
                "beforePatchRowNumber": 52,
                "afterPatchRowNumber": 58,
                "PatchRowcode": "         if not self.scheme:"
            },
            "24": {
                "beforePatchRowNumber": 53,
                "afterPatchRowNumber": 59,
                "PatchRowcode": "             self.scheme = \"http\""
            }
        },
        "frontPatchFile": [
            "# Copyright (C) 2009 Duncan McGreggor <duncan@canonical.com>",
            "# Copyright (C) 2009 Robert Collins <robertc@robertcollins.net>",
            "# Licenced under the txaws licence available at /LICENSE in the txaws source.",
            "",
            "from txaws.credentials import AWSCredentials",
            "from txaws import regions",
            "from txaws.util import parse",
            "",
            "",
            "__all__ = [\"AWSServiceEndpoint\", \"AWSServiceRegion\", \"REGION_US\", \"REGION_EU\"]",
            "",
            "",
            "REGION_US = \"US\"",
            "REGION_EU = \"EU\"",
            "",
            "REGION_US_EAST_1 = \"us-east-1\"",
            "REGION_US_EAST_2 = \"us-east-2\"",
            "REGION_US_WEST_1 = \"us-west-1\"",
            "REGION_US_WEST_2 = \"us-west-2\"",
            "REGION_CA_CENTRAL_1 = \"ca-central-1\"",
            "REGION_AP_SOUTH_1 = \"ap-south-1\"",
            "REGION_AP_NORTHEAST_1 = \"ap-northeast-1\"",
            "REGION_AP_NORTHEAST_2 = \"ap-northeast-2\"",
            "REGION_AP_SOUTHEAST_1 = \"ap-southeast-1\"",
            "REGION_AP_SOUTHEAST_2 = \"ap-southeast-2\"",
            "REGION_EU_CENTRAL_1 = \"eu-central-1\"",
            "REGION_EU_WEST_1 = \"eu-west-1\"",
            "REGION_EU_WEST_2 = \"eu-west-2\"",
            "REGION_SA_EAST_1 = \"sa-east-1\"",
            "",
            "EC2_ENDPOINT_US = \"https://us-east-1.ec2.amazonaws.com/\"",
            "EC2_ENDPOINT_EU = \"https://eu-west-1.ec2.amazonaws.com/\"",
            "",
            "S3_ENDPOINT = \"https://s3.amazonaws.com/\"",
            "",
            "",
            "class AWSServiceEndpoint(object):",
            "    \"\"\"",
            "    @param uri: The URL for the service.",
            "    @param method: The HTTP method used when accessing a service.",
            "    @param ssl_hostname_verification: Whether or not SSL hotname verification",
            "        will be done when connecting to the endpoint.",
            "    \"\"\"",
            "",
            "    def __init__(self, uri=\"\", method=\"GET\", ssl_hostname_verification=False):",
            "        self.host = \"\"",
            "        self.port = None",
            "        self.path = \"/\"",
            "        self.method = method",
            "        self.ssl_hostname_verification = ssl_hostname_verification",
            "        self._parse_uri(uri)",
            "        if not self.scheme:",
            "            self.scheme = \"http\"",
            "",
            "    def _parse_uri(self, uri):",
            "        scheme, host, port, path = parse(",
            "            str(uri), defaultPort=False)",
            "        self.scheme = scheme",
            "        self.host = host",
            "        self.port = port",
            "        self.path = path",
            "",
            "    def set_host(self, host):",
            "        self.host = host",
            "",
            "    def get_host(self):",
            "        return self.host",
            "",
            "    def get_canonical_host(self):",
            "        \"\"\"",
            "        Return the canonical host as for the Host HTTP header specification.",
            "        \"\"\"",
            "        host = self.host.lower()",
            "        if self.port is not None:",
            "            host = \"%s:%s\" % (host, self.port)",
            "        return host",
            "",
            "    def set_canonical_host(self, canonical_host):",
            "        \"\"\"",
            "        Set host and port from a canonical host string as for the Host HTTP",
            "        header specification.",
            "        \"\"\"",
            "        parts = canonical_host.lower().split(\":\")",
            "        self.host = parts[0]",
            "        if len(parts) > 1 and parts[1]:",
            "            self.port = int(parts[1])",
            "        else:",
            "            self.port = None",
            "",
            "    def set_path(self, path):",
            "        self.path = path",
            "",
            "    def get_uri(self):",
            "        \"\"\"Get a URL representation of the service.\"\"\"",
            "        uri = \"%s://%s%s\" % (self.scheme, self.get_canonical_host(), self.path)",
            "        return uri",
            "",
            "    def set_method(self, method):",
            "        self.method = method",
            "",
            "",
            "class AWSServiceRegion(object):",
            "    \"\"\"",
            "    This object represents a collection of client factories that use the same",
            "    credentials. With Amazon, this collection is associated with a region",
            "    (e.g., US or EU).",
            "",
            "    @param creds: an AWSCredentials instance, optional.",
            "    @param access_key: The access key to use. This is only checked if no creds",
            "        parameter was passed.",
            "    @param secret_key: The secret key to use. This is only checked if no creds",
            "        parameter was passed.",
            "    @param region: a string value that represents the region that the",
            "        associated creds will be used against a collection of services.",
            "    @param uri: an endpoint URI that, if provided, will override the region",
            "        parameter.",
            "    @param method: The method argument forwarded to L{AWSServiceEndpoint}.",
            "    \"\"\"",
            "    # XXX update unit test to check for both ec2 and s3 endpoints",
            "    def __init__(self, creds=None, access_key=\"\", secret_key=\"\",",
            "                 region=REGION_US, uri=\"\", ec2_uri=\"\", s3_uri=\"\",",
            "                 method=\"GET\"):",
            "        if not creds:",
            "            creds = AWSCredentials(access_key, secret_key)",
            "        self.creds = creds",
            "        # Provide backwards compatibility for the \"uri\" parameter.",
            "        if uri and not ec2_uri:",
            "            ec2_uri = uri",
            "        if not ec2_uri and region == REGION_US:",
            "            ec2_uri = EC2_ENDPOINT_US",
            "        elif not ec2_uri and region == REGION_EU:",
            "            ec2_uri = EC2_ENDPOINT_EU",
            "        if not s3_uri:",
            "            s3_uri = S3_ENDPOINT",
            "        self._clients = {}",
            "        self.ec2_endpoint = AWSServiceEndpoint(uri=ec2_uri, method=method)",
            "        self.s3_endpoint = AWSServiceEndpoint(uri=s3_uri, method=method)",
            "",
            "    def get_client(self, cls, purge_cache=False, *args, **kwds):",
            "        \"\"\"",
            "        This is a general method for getting a client: if present, it is pulled",
            "        from the cache; if not, a new one is instantiated and then put into the",
            "        cache. This method should not be called directly, but rather by other",
            "        client-specific methods (e.g., get_ec2_client).",
            "        \"\"\"",
            "        key = str(cls) + str(args) + str(kwds)",
            "        instance = self._clients.get(key)",
            "        if purge_cache or not instance:",
            "            instance = cls(*args, **kwds)",
            "        self._clients[key] = instance",
            "        return instance",
            "",
            "    def get_ec2_client(self, creds=None):",
            "        from txaws.ec2.client import EC2Client",
            "",
            "        if creds:",
            "            self.creds = creds",
            "        return self.get_client(EC2Client, creds=self.creds,",
            "                               endpoint=self.ec2_endpoint, query_factory=None)",
            "",
            "    def get_s3_client(self, creds=None):",
            "        from txaws.s3.client import S3Client",
            "",
            "        if creds:",
            "            self.creds = creds",
            "        return self.get_client(S3Client, creds=self.creds,",
            "                               endpoint=self.s3_endpoint, query_factory=None)"
        ],
        "afterPatchFile": [
            "# Copyright (C) 2009 Duncan McGreggor <duncan@canonical.com>",
            "# Copyright (C) 2009 Robert Collins <robertc@robertcollins.net>",
            "# Licenced under the txaws licence available at /LICENSE in the txaws source.",
            "",
            "import warnings",
            "",
            "from txaws.credentials import AWSCredentials",
            "from txaws import regions",
            "from txaws.util import parse",
            "",
            "",
            "__all__ = [\"AWSServiceEndpoint\", \"AWSServiceRegion\", \"REGION_US\", \"REGION_EU\"]",
            "",
            "",
            "REGION_US = \"US\"",
            "REGION_EU = \"EU\"",
            "",
            "REGION_US_EAST_1 = \"us-east-1\"",
            "REGION_US_EAST_2 = \"us-east-2\"",
            "REGION_US_WEST_1 = \"us-west-1\"",
            "REGION_US_WEST_2 = \"us-west-2\"",
            "REGION_CA_CENTRAL_1 = \"ca-central-1\"",
            "REGION_AP_SOUTH_1 = \"ap-south-1\"",
            "REGION_AP_NORTHEAST_1 = \"ap-northeast-1\"",
            "REGION_AP_NORTHEAST_2 = \"ap-northeast-2\"",
            "REGION_AP_SOUTHEAST_1 = \"ap-southeast-1\"",
            "REGION_AP_SOUTHEAST_2 = \"ap-southeast-2\"",
            "REGION_EU_CENTRAL_1 = \"eu-central-1\"",
            "REGION_EU_WEST_1 = \"eu-west-1\"",
            "REGION_EU_WEST_2 = \"eu-west-2\"",
            "REGION_SA_EAST_1 = \"sa-east-1\"",
            "",
            "EC2_ENDPOINT_US = \"https://us-east-1.ec2.amazonaws.com/\"",
            "EC2_ENDPOINT_EU = \"https://eu-west-1.ec2.amazonaws.com/\"",
            "",
            "S3_ENDPOINT = \"https://s3.amazonaws.com/\"",
            "",
            "",
            "class AWSServiceEndpoint(object):",
            "    \"\"\"",
            "    @param uri: The URL for the service.",
            "    @param method: The HTTP method used when accessing a service.",
            "    @param ssl_hostname_verification: Whether or not SSL hotname verification",
            "        will be done when connecting to the endpoint.",
            "    \"\"\"",
            "",
            "    def __init__(self, uri=\"\", method=\"GET\", ssl_hostname_verification=True):",
            "        self.host = \"\"",
            "        self.port = None",
            "        self.path = \"/\"",
            "        self.method = method",
            "        self.ssl_hostname_verification = ssl_hostname_verification",
            "        if not self.ssl_hostname_verification:",
            "            warnings.warn(",
            "                \"Operating with certificate verification disabled!\", stacklevel=2,",
            "            )",
            "        self._parse_uri(uri)",
            "        if not self.scheme:",
            "            self.scheme = \"http\"",
            "",
            "    def _parse_uri(self, uri):",
            "        scheme, host, port, path = parse(",
            "            str(uri), defaultPort=False)",
            "        self.scheme = scheme",
            "        self.host = host",
            "        self.port = port",
            "        self.path = path",
            "",
            "    def set_host(self, host):",
            "        self.host = host",
            "",
            "    def get_host(self):",
            "        return self.host",
            "",
            "    def get_canonical_host(self):",
            "        \"\"\"",
            "        Return the canonical host as for the Host HTTP header specification.",
            "        \"\"\"",
            "        host = self.host.lower()",
            "        if self.port is not None:",
            "            host = \"%s:%s\" % (host, self.port)",
            "        return host",
            "",
            "    def set_canonical_host(self, canonical_host):",
            "        \"\"\"",
            "        Set host and port from a canonical host string as for the Host HTTP",
            "        header specification.",
            "        \"\"\"",
            "        parts = canonical_host.lower().split(\":\")",
            "        self.host = parts[0]",
            "        if len(parts) > 1 and parts[1]:",
            "            self.port = int(parts[1])",
            "        else:",
            "            self.port = None",
            "",
            "    def set_path(self, path):",
            "        self.path = path",
            "",
            "    def get_uri(self):",
            "        \"\"\"Get a URL representation of the service.\"\"\"",
            "        uri = \"%s://%s%s\" % (self.scheme, self.get_canonical_host(), self.path)",
            "        return uri",
            "",
            "    def set_method(self, method):",
            "        self.method = method",
            "",
            "",
            "class AWSServiceRegion(object):",
            "    \"\"\"",
            "    This object represents a collection of client factories that use the same",
            "    credentials. With Amazon, this collection is associated with a region",
            "    (e.g., US or EU).",
            "",
            "    @param creds: an AWSCredentials instance, optional.",
            "    @param access_key: The access key to use. This is only checked if no creds",
            "        parameter was passed.",
            "    @param secret_key: The secret key to use. This is only checked if no creds",
            "        parameter was passed.",
            "    @param region: a string value that represents the region that the",
            "        associated creds will be used against a collection of services.",
            "    @param uri: an endpoint URI that, if provided, will override the region",
            "        parameter.",
            "    @param method: The method argument forwarded to L{AWSServiceEndpoint}.",
            "    \"\"\"",
            "    # XXX update unit test to check for both ec2 and s3 endpoints",
            "    def __init__(self, creds=None, access_key=\"\", secret_key=\"\",",
            "                 region=REGION_US, uri=\"\", ec2_uri=\"\", s3_uri=\"\",",
            "                 method=\"GET\"):",
            "        if not creds:",
            "            creds = AWSCredentials(access_key, secret_key)",
            "        self.creds = creds",
            "        # Provide backwards compatibility for the \"uri\" parameter.",
            "        if uri and not ec2_uri:",
            "            ec2_uri = uri",
            "        if not ec2_uri and region == REGION_US:",
            "            ec2_uri = EC2_ENDPOINT_US",
            "        elif not ec2_uri and region == REGION_EU:",
            "            ec2_uri = EC2_ENDPOINT_EU",
            "        if not s3_uri:",
            "            s3_uri = S3_ENDPOINT",
            "        self._clients = {}",
            "        self.ec2_endpoint = AWSServiceEndpoint(uri=ec2_uri, method=method)",
            "        self.s3_endpoint = AWSServiceEndpoint(uri=s3_uri, method=method)",
            "",
            "    def get_client(self, cls, purge_cache=False, *args, **kwds):",
            "        \"\"\"",
            "        This is a general method for getting a client: if present, it is pulled",
            "        from the cache; if not, a new one is instantiated and then put into the",
            "        cache. This method should not be called directly, but rather by other",
            "        client-specific methods (e.g., get_ec2_client).",
            "        \"\"\"",
            "        key = str(cls) + str(args) + str(kwds)",
            "        instance = self._clients.get(key)",
            "        if purge_cache or not instance:",
            "            instance = cls(*args, **kwds)",
            "        self._clients[key] = instance",
            "        return instance",
            "",
            "    def get_ec2_client(self, creds=None):",
            "        from txaws.ec2.client import EC2Client",
            "",
            "        if creds:",
            "            self.creds = creds",
            "        return self.get_client(EC2Client, creds=self.creds,",
            "                               endpoint=self.ec2_endpoint, query_factory=None)",
            "",
            "    def get_s3_client(self, creds=None):",
            "        from txaws.s3.client import S3Client",
            "",
            "        if creds:",
            "            self.creds = creds",
            "        return self.get_client(S3Client, creds=self.creds,",
            "                               endpoint=self.s3_endpoint, query_factory=None)"
        ],
        "action": [
            "0",
            "0",
            "0",
            "-1",
            "-1",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0"
        ],
        "dele_reviseLocation": {
            "45": [
                "AWSServiceEndpoint",
                "__init__"
            ]
        },
        "addLocation": []
    },
    "txaws/tests/test_service.py": {
        "Patch": {
            "0": {
                "beforePatchRowNumber": 21,
                "afterPatchRowNumber": 21,
                "PatchRowcode": "     def setUp(self):"
            },
            "1": {
                "beforePatchRowNumber": 22,
                "afterPatchRowNumber": 22,
                "PatchRowcode": "         self.endpoint = AWSServiceEndpoint(uri=\"http://my.service/da_endpoint\")"
            },
            "2": {
                "beforePatchRowNumber": 23,
                "afterPatchRowNumber": 23,
                "PatchRowcode": " "
            },
            "3": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 24,
                "PatchRowcode": "+    def test_warning_when_verification_disabled(self):"
            },
            "4": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 25,
                "PatchRowcode": "+        \"\"\""
            },
            "5": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 26,
                "PatchRowcode": "+        L{AWSServiceEndpoint} emits a warning when told not to perform"
            },
            "6": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 27,
                "PatchRowcode": "+        certificate verification."
            },
            "7": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 28,
                "PatchRowcode": "+        \"\"\""
            },
            "8": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 29,
                "PatchRowcode": "+        self.assertWarns("
            },
            "9": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 30,
                "PatchRowcode": "+            UserWarning,"
            },
            "10": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 31,
                "PatchRowcode": "+            \"Operating with certificate verification disabled!\","
            },
            "11": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 32,
                "PatchRowcode": "+            __file__,"
            },
            "12": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 33,
                "PatchRowcode": "+            lambda: AWSServiceEndpoint(ssl_hostname_verification=False),"
            },
            "13": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 34,
                "PatchRowcode": "+        )"
            },
            "14": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 35,
                "PatchRowcode": "+"
            },
            "15": {
                "beforePatchRowNumber": 24,
                "afterPatchRowNumber": 36,
                "PatchRowcode": "     def test_simple_creation(self):"
            },
            "16": {
                "beforePatchRowNumber": 25,
                "afterPatchRowNumber": 37,
                "PatchRowcode": "         endpoint = AWSServiceEndpoint()"
            },
            "17": {
                "beforePatchRowNumber": 26,
                "afterPatchRowNumber": 38,
                "PatchRowcode": "         self.assertEquals(endpoint.scheme, \"http\")"
            }
        },
        "frontPatchFile": [
            "# Copyright (C) 2009 Duncan McGreggor <duncan@canonical.com>",
            "# Licenced under the txaws licence available at /LICENSE in the txaws source.",
            "",
            "from txaws.credentials import AWSCredentials",
            "from txaws.ec2.client import EC2Client",
            "try:",
            "    from txaws.s3.client import S3Client",
            "except ImportError:",
            "    s3clientSkip = (\"S3Client couldn't be imported (perhaps because dateutil, \"",
            "                    \"on which it depends, isn't present)\")",
            "else:",
            "    s3clientSkip = None",
            "",
            "from txaws.service import (AWSServiceEndpoint, AWSServiceRegion,",
            "                           EC2_ENDPOINT_EU, EC2_ENDPOINT_US, REGION_EU)",
            "from txaws.testing.base import TXAWSTestCase",
            "",
            "",
            "class AWSServiceEndpointTestCase(TXAWSTestCase):",
            "",
            "    def setUp(self):",
            "        self.endpoint = AWSServiceEndpoint(uri=\"http://my.service/da_endpoint\")",
            "",
            "    def test_simple_creation(self):",
            "        endpoint = AWSServiceEndpoint()",
            "        self.assertEquals(endpoint.scheme, \"http\")",
            "        self.assertEquals(endpoint.host, \"\")",
            "        self.assertEquals(endpoint.port, None)",
            "        self.assertEquals(endpoint.path, \"/\")",
            "        self.assertEquals(endpoint.method, \"GET\")",
            "",
            "    def test_custom_method(self):",
            "        endpoint = AWSServiceEndpoint(",
            "            uri=\"http://service/endpoint\", method=\"PUT\")",
            "        self.assertEquals(endpoint.method, \"PUT\")",
            "",
            "    def test_parse_uri(self):",
            "        self.assertEquals(self.endpoint.scheme, \"http\")",
            "        self.assertEquals(self.endpoint.host, \"my.service\")",
            "        self.assertIdentical(self.endpoint.port, None)",
            "        self.assertEquals(self.endpoint.path, \"/da_endpoint\")",
            "",
            "    def test_parse_uri_https_and_custom_port(self):",
            "        endpoint = AWSServiceEndpoint(uri=\"https://my.service:8080/endpoint\")",
            "        self.assertEquals(endpoint.scheme, \"https\")",
            "        self.assertEquals(endpoint.host, \"my.service\")",
            "        self.assertEquals(endpoint.port, 8080)",
            "        self.assertEquals(endpoint.path, \"/endpoint\")",
            "",
            "    def test_get_uri(self):",
            "        uri = self.endpoint.get_uri()",
            "        self.assertEquals(uri, \"http://my.service/da_endpoint\")",
            "",
            "    def test_get_uri_custom_port(self):",
            "        uri = \"https://my.service:8080/endpoint\"",
            "        endpoint = AWSServiceEndpoint(uri=uri)",
            "        new_uri = endpoint.get_uri()",
            "        self.assertEquals(new_uri, uri)",
            "",
            "    def test_set_host(self):",
            "        self.assertEquals(self.endpoint.host, \"my.service\")",
            "        self.endpoint.set_host(\"newhost.com\")",
            "        self.assertEquals(self.endpoint.host, \"newhost.com\")",
            "",
            "    def test_get_host(self):",
            "        self.assertEquals(self.endpoint.host, self.endpoint.get_host())",
            "",
            "    def test_get_canonical_host(self):",
            "        \"\"\"",
            "        If the port is not specified the canonical host is the same as",
            "        the host.",
            "        \"\"\"",
            "        uri = \"http://my.service/endpoint\"",
            "        endpoint = AWSServiceEndpoint(uri=uri)",
            "        self.assertEquals(\"my.service\", endpoint.get_canonical_host())",
            "",
            "    def test_get_canonical_host_with_non_default_port(self):",
            "        \"\"\"",
            "        If the port is not the default, the canonical host includes it.",
            "        \"\"\"",
            "        uri = \"http://my.service:99/endpoint\"",
            "        endpoint = AWSServiceEndpoint(uri=uri)",
            "        self.assertEquals(\"my.service:99\", endpoint.get_canonical_host())",
            "",
            "    def test_get_canonical_host_is_lower_case(self):",
            "        \"\"\"",
            "        The canonical host is guaranteed to be lower case.",
            "        \"\"\"",
            "        uri = \"http://MY.SerVice:99/endpoint\"",
            "        endpoint = AWSServiceEndpoint(uri=uri)",
            "        self.assertEquals(\"my.service:99\", endpoint.get_canonical_host())",
            "",
            "    def test_set_canonical_host(self):",
            "        \"\"\"",
            "        The canonical host is converted to lower case.",
            "        \"\"\"",
            "        endpoint = AWSServiceEndpoint()",
            "        endpoint.set_canonical_host(\"My.Service\")",
            "        self.assertEquals(\"my.service\", endpoint.host)",
            "        self.assertIdentical(None, endpoint.port)",
            "",
            "    def test_set_canonical_host_with_port(self):",
            "        \"\"\"",
            "        The canonical host can optionally have a port.",
            "        \"\"\"",
            "        endpoint = AWSServiceEndpoint()",
            "        endpoint.set_canonical_host(\"my.service:99\")",
            "        self.assertEquals(\"my.service\", endpoint.host)",
            "        self.assertEquals(99, endpoint.port)",
            "",
            "    def test_set_canonical_host_with_empty_port(self):",
            "        \"\"\"",
            "        The canonical host can also have no port.",
            "        \"\"\"",
            "        endpoint = AWSServiceEndpoint()",
            "        endpoint.set_canonical_host(\"my.service:\")",
            "        self.assertEquals(\"my.service\", endpoint.host)",
            "        self.assertIdentical(None, endpoint.port)",
            "",
            "    def test_set_path(self):",
            "        self.endpoint.set_path(\"/newpath\")",
            "        self.assertEquals(",
            "            self.endpoint.get_uri(),",
            "            \"http://my.service/newpath\")",
            "",
            "    def test_set_method(self):",
            "        self.assertEquals(self.endpoint.method, \"GET\")",
            "        self.endpoint.set_method(\"PUT\")",
            "        self.assertEquals(self.endpoint.method, \"PUT\")",
            "",
            "",
            "class AWSServiceRegionTestCase(TXAWSTestCase):",
            "",
            "    def setUp(self):",
            "        self.creds = AWSCredentials(\"foo\", \"bar\")",
            "        self.region = AWSServiceRegion(creds=self.creds)",
            "",
            "    def test_simple_creation(self):",
            "        self.assertEquals(self.creds, self.region.creds)",
            "        self.assertEquals(self.region._clients, {})",
            "        self.assertEquals(self.region.ec2_endpoint.get_uri(), EC2_ENDPOINT_US)",
            "",
            "    def test_creation_with_keys(self):",
            "        region = AWSServiceRegion(access_key=\"baz\", secret_key=\"quux\")",
            "        self.assertEquals(region.creds.access_key, \"baz\")",
            "        self.assertEquals(region.creds.secret_key, \"quux\")",
            "",
            "    def test_creation_with_keys_and_creds(self):",
            "        \"\"\"",
            "        creds take precedence over individual access key/secret key pairs.",
            "        \"\"\"",
            "        region = AWSServiceRegion(self.creds, access_key=\"baz\",",
            "                                  secret_key=\"quux\")",
            "        self.assertEquals(region.creds.access_key, \"foo\")",
            "        self.assertEquals(region.creds.secret_key, \"bar\")",
            "",
            "    def test_creation_with_uri(self):",
            "        region = AWSServiceRegion(",
            "            creds=self.creds, ec2_uri=\"http://foo/bar\")",
            "        self.assertEquals(region.ec2_endpoint.get_uri(), \"http://foo/bar\")",
            "",
            "    def test_creation_with_uri_backwards_compatible(self):",
            "        region = AWSServiceRegion(",
            "            creds=self.creds, uri=\"http://foo/bar\")",
            "        self.assertEquals(region.ec2_endpoint.get_uri(), \"http://foo/bar\")",
            "",
            "    def test_creation_with_uri_and_region(self):",
            "        region = AWSServiceRegion(",
            "            creds=self.creds, region=REGION_EU, ec2_uri=\"http://foo/bar\")",
            "        self.assertEquals(region.ec2_endpoint.get_uri(), \"http://foo/bar\")",
            "",
            "    def test_creation_with_region_override(self):",
            "        region = AWSServiceRegion(creds=self.creds, region=REGION_EU)",
            "        self.assertEquals(region.ec2_endpoint.get_uri(), EC2_ENDPOINT_EU)",
            "",
            "    def test_get_ec2_client_with_empty_cache(self):",
            "        key = str(EC2Client) + str(self.creds) + str(self.region.ec2_endpoint)",
            "        original_client = self.region._clients.get(key)",
            "        new_client = self.region.get_client(",
            "            EC2Client, creds=self.creds, endpoint=self.region.ec2_endpoint)",
            "        self.assertEquals(original_client, None)",
            "        self.assertTrue(isinstance(new_client, EC2Client))",
            "        self.assertNotEquals(original_client, new_client)",
            "",
            "    def test_get_ec2_client_from_cache_default(self):",
            "        client1 = self.region.get_ec2_client()",
            "        client2 = self.region.get_ec2_client()",
            "        self.assertTrue(isinstance(client1, EC2Client))",
            "        self.assertTrue(isinstance(client2, EC2Client))",
            "        self.assertEquals(client1, client2)",
            "",
            "    def test_get_ec2_client_from_cache(self):",
            "        client1 = self.region.get_client(",
            "            EC2Client, creds=self.creds, endpoint=self.region.ec2_endpoint)",
            "        client2 = self.region.get_client(",
            "            EC2Client, creds=self.creds, endpoint=self.region.ec2_endpoint)",
            "        self.assertTrue(isinstance(client1, EC2Client))",
            "        self.assertTrue(isinstance(client2, EC2Client))",
            "        self.assertEquals(client1, client2)",
            "",
            "    def test_get_ec2_client_from_cache_with_purge(self):",
            "        client1 = self.region.get_client(",
            "            EC2Client, creds=self.creds, endpoint=self.region.ec2_endpoint,",
            "            purge_cache=True)",
            "        client2 = self.region.get_client(",
            "            EC2Client, creds=self.creds, endpoint=self.region.ec2_endpoint,",
            "            purge_cache=True)",
            "        self.assertTrue(isinstance(client1, EC2Client))",
            "        self.assertTrue(isinstance(client2, EC2Client))",
            "        self.assertNotEquals(client1, client2)",
            "",
            "    def test_get_s3_client_with_empty_cache(self):",
            "        key = str(S3Client) + str(self.creds) + str(self.region.s3_endpoint)",
            "        original_client = self.region._clients.get(key)",
            "        new_client = self.region.get_client(",
            "            S3Client, creds=self.creds, endpoint=self.region.s3_endpoint)",
            "        self.assertEquals(original_client, None)",
            "        self.assertTrue(isinstance(new_client, S3Client))",
            "        self.assertNotEquals(original_client, new_client)",
            "    test_get_s3_client_with_empty_cache.skip = s3clientSkip"
        ],
        "afterPatchFile": [
            "# Copyright (C) 2009 Duncan McGreggor <duncan@canonical.com>",
            "# Licenced under the txaws licence available at /LICENSE in the txaws source.",
            "",
            "from txaws.credentials import AWSCredentials",
            "from txaws.ec2.client import EC2Client",
            "try:",
            "    from txaws.s3.client import S3Client",
            "except ImportError:",
            "    s3clientSkip = (\"S3Client couldn't be imported (perhaps because dateutil, \"",
            "                    \"on which it depends, isn't present)\")",
            "else:",
            "    s3clientSkip = None",
            "",
            "from txaws.service import (AWSServiceEndpoint, AWSServiceRegion,",
            "                           EC2_ENDPOINT_EU, EC2_ENDPOINT_US, REGION_EU)",
            "from txaws.testing.base import TXAWSTestCase",
            "",
            "",
            "class AWSServiceEndpointTestCase(TXAWSTestCase):",
            "",
            "    def setUp(self):",
            "        self.endpoint = AWSServiceEndpoint(uri=\"http://my.service/da_endpoint\")",
            "",
            "    def test_warning_when_verification_disabled(self):",
            "        \"\"\"",
            "        L{AWSServiceEndpoint} emits a warning when told not to perform",
            "        certificate verification.",
            "        \"\"\"",
            "        self.assertWarns(",
            "            UserWarning,",
            "            \"Operating with certificate verification disabled!\",",
            "            __file__,",
            "            lambda: AWSServiceEndpoint(ssl_hostname_verification=False),",
            "        )",
            "",
            "    def test_simple_creation(self):",
            "        endpoint = AWSServiceEndpoint()",
            "        self.assertEquals(endpoint.scheme, \"http\")",
            "        self.assertEquals(endpoint.host, \"\")",
            "        self.assertEquals(endpoint.port, None)",
            "        self.assertEquals(endpoint.path, \"/\")",
            "        self.assertEquals(endpoint.method, \"GET\")",
            "",
            "    def test_custom_method(self):",
            "        endpoint = AWSServiceEndpoint(",
            "            uri=\"http://service/endpoint\", method=\"PUT\")",
            "        self.assertEquals(endpoint.method, \"PUT\")",
            "",
            "    def test_parse_uri(self):",
            "        self.assertEquals(self.endpoint.scheme, \"http\")",
            "        self.assertEquals(self.endpoint.host, \"my.service\")",
            "        self.assertIdentical(self.endpoint.port, None)",
            "        self.assertEquals(self.endpoint.path, \"/da_endpoint\")",
            "",
            "    def test_parse_uri_https_and_custom_port(self):",
            "        endpoint = AWSServiceEndpoint(uri=\"https://my.service:8080/endpoint\")",
            "        self.assertEquals(endpoint.scheme, \"https\")",
            "        self.assertEquals(endpoint.host, \"my.service\")",
            "        self.assertEquals(endpoint.port, 8080)",
            "        self.assertEquals(endpoint.path, \"/endpoint\")",
            "",
            "    def test_get_uri(self):",
            "        uri = self.endpoint.get_uri()",
            "        self.assertEquals(uri, \"http://my.service/da_endpoint\")",
            "",
            "    def test_get_uri_custom_port(self):",
            "        uri = \"https://my.service:8080/endpoint\"",
            "        endpoint = AWSServiceEndpoint(uri=uri)",
            "        new_uri = endpoint.get_uri()",
            "        self.assertEquals(new_uri, uri)",
            "",
            "    def test_set_host(self):",
            "        self.assertEquals(self.endpoint.host, \"my.service\")",
            "        self.endpoint.set_host(\"newhost.com\")",
            "        self.assertEquals(self.endpoint.host, \"newhost.com\")",
            "",
            "    def test_get_host(self):",
            "        self.assertEquals(self.endpoint.host, self.endpoint.get_host())",
            "",
            "    def test_get_canonical_host(self):",
            "        \"\"\"",
            "        If the port is not specified the canonical host is the same as",
            "        the host.",
            "        \"\"\"",
            "        uri = \"http://my.service/endpoint\"",
            "        endpoint = AWSServiceEndpoint(uri=uri)",
            "        self.assertEquals(\"my.service\", endpoint.get_canonical_host())",
            "",
            "    def test_get_canonical_host_with_non_default_port(self):",
            "        \"\"\"",
            "        If the port is not the default, the canonical host includes it.",
            "        \"\"\"",
            "        uri = \"http://my.service:99/endpoint\"",
            "        endpoint = AWSServiceEndpoint(uri=uri)",
            "        self.assertEquals(\"my.service:99\", endpoint.get_canonical_host())",
            "",
            "    def test_get_canonical_host_is_lower_case(self):",
            "        \"\"\"",
            "        The canonical host is guaranteed to be lower case.",
            "        \"\"\"",
            "        uri = \"http://MY.SerVice:99/endpoint\"",
            "        endpoint = AWSServiceEndpoint(uri=uri)",
            "        self.assertEquals(\"my.service:99\", endpoint.get_canonical_host())",
            "",
            "    def test_set_canonical_host(self):",
            "        \"\"\"",
            "        The canonical host is converted to lower case.",
            "        \"\"\"",
            "        endpoint = AWSServiceEndpoint()",
            "        endpoint.set_canonical_host(\"My.Service\")",
            "        self.assertEquals(\"my.service\", endpoint.host)",
            "        self.assertIdentical(None, endpoint.port)",
            "",
            "    def test_set_canonical_host_with_port(self):",
            "        \"\"\"",
            "        The canonical host can optionally have a port.",
            "        \"\"\"",
            "        endpoint = AWSServiceEndpoint()",
            "        endpoint.set_canonical_host(\"my.service:99\")",
            "        self.assertEquals(\"my.service\", endpoint.host)",
            "        self.assertEquals(99, endpoint.port)",
            "",
            "    def test_set_canonical_host_with_empty_port(self):",
            "        \"\"\"",
            "        The canonical host can also have no port.",
            "        \"\"\"",
            "        endpoint = AWSServiceEndpoint()",
            "        endpoint.set_canonical_host(\"my.service:\")",
            "        self.assertEquals(\"my.service\", endpoint.host)",
            "        self.assertIdentical(None, endpoint.port)",
            "",
            "    def test_set_path(self):",
            "        self.endpoint.set_path(\"/newpath\")",
            "        self.assertEquals(",
            "            self.endpoint.get_uri(),",
            "            \"http://my.service/newpath\")",
            "",
            "    def test_set_method(self):",
            "        self.assertEquals(self.endpoint.method, \"GET\")",
            "        self.endpoint.set_method(\"PUT\")",
            "        self.assertEquals(self.endpoint.method, \"PUT\")",
            "",
            "",
            "class AWSServiceRegionTestCase(TXAWSTestCase):",
            "",
            "    def setUp(self):",
            "        self.creds = AWSCredentials(\"foo\", \"bar\")",
            "        self.region = AWSServiceRegion(creds=self.creds)",
            "",
            "    def test_simple_creation(self):",
            "        self.assertEquals(self.creds, self.region.creds)",
            "        self.assertEquals(self.region._clients, {})",
            "        self.assertEquals(self.region.ec2_endpoint.get_uri(), EC2_ENDPOINT_US)",
            "",
            "    def test_creation_with_keys(self):",
            "        region = AWSServiceRegion(access_key=\"baz\", secret_key=\"quux\")",
            "        self.assertEquals(region.creds.access_key, \"baz\")",
            "        self.assertEquals(region.creds.secret_key, \"quux\")",
            "",
            "    def test_creation_with_keys_and_creds(self):",
            "        \"\"\"",
            "        creds take precedence over individual access key/secret key pairs.",
            "        \"\"\"",
            "        region = AWSServiceRegion(self.creds, access_key=\"baz\",",
            "                                  secret_key=\"quux\")",
            "        self.assertEquals(region.creds.access_key, \"foo\")",
            "        self.assertEquals(region.creds.secret_key, \"bar\")",
            "",
            "    def test_creation_with_uri(self):",
            "        region = AWSServiceRegion(",
            "            creds=self.creds, ec2_uri=\"http://foo/bar\")",
            "        self.assertEquals(region.ec2_endpoint.get_uri(), \"http://foo/bar\")",
            "",
            "    def test_creation_with_uri_backwards_compatible(self):",
            "        region = AWSServiceRegion(",
            "            creds=self.creds, uri=\"http://foo/bar\")",
            "        self.assertEquals(region.ec2_endpoint.get_uri(), \"http://foo/bar\")",
            "",
            "    def test_creation_with_uri_and_region(self):",
            "        region = AWSServiceRegion(",
            "            creds=self.creds, region=REGION_EU, ec2_uri=\"http://foo/bar\")",
            "        self.assertEquals(region.ec2_endpoint.get_uri(), \"http://foo/bar\")",
            "",
            "    def test_creation_with_region_override(self):",
            "        region = AWSServiceRegion(creds=self.creds, region=REGION_EU)",
            "        self.assertEquals(region.ec2_endpoint.get_uri(), EC2_ENDPOINT_EU)",
            "",
            "    def test_get_ec2_client_with_empty_cache(self):",
            "        key = str(EC2Client) + str(self.creds) + str(self.region.ec2_endpoint)",
            "        original_client = self.region._clients.get(key)",
            "        new_client = self.region.get_client(",
            "            EC2Client, creds=self.creds, endpoint=self.region.ec2_endpoint)",
            "        self.assertEquals(original_client, None)",
            "        self.assertTrue(isinstance(new_client, EC2Client))",
            "        self.assertNotEquals(original_client, new_client)",
            "",
            "    def test_get_ec2_client_from_cache_default(self):",
            "        client1 = self.region.get_ec2_client()",
            "        client2 = self.region.get_ec2_client()",
            "        self.assertTrue(isinstance(client1, EC2Client))",
            "        self.assertTrue(isinstance(client2, EC2Client))",
            "        self.assertEquals(client1, client2)",
            "",
            "    def test_get_ec2_client_from_cache(self):",
            "        client1 = self.region.get_client(",
            "            EC2Client, creds=self.creds, endpoint=self.region.ec2_endpoint)",
            "        client2 = self.region.get_client(",
            "            EC2Client, creds=self.creds, endpoint=self.region.ec2_endpoint)",
            "        self.assertTrue(isinstance(client1, EC2Client))",
            "        self.assertTrue(isinstance(client2, EC2Client))",
            "        self.assertEquals(client1, client2)",
            "",
            "    def test_get_ec2_client_from_cache_with_purge(self):",
            "        client1 = self.region.get_client(",
            "            EC2Client, creds=self.creds, endpoint=self.region.ec2_endpoint,",
            "            purge_cache=True)",
            "        client2 = self.region.get_client(",
            "            EC2Client, creds=self.creds, endpoint=self.region.ec2_endpoint,",
            "            purge_cache=True)",
            "        self.assertTrue(isinstance(client1, EC2Client))",
            "        self.assertTrue(isinstance(client2, EC2Client))",
            "        self.assertNotEquals(client1, client2)",
            "",
            "    def test_get_s3_client_with_empty_cache(self):",
            "        key = str(S3Client) + str(self.creds) + str(self.region.s3_endpoint)",
            "        original_client = self.region._clients.get(key)",
            "        new_client = self.region.get_client(",
            "            S3Client, creds=self.creds, endpoint=self.region.s3_endpoint)",
            "        self.assertEquals(original_client, None)",
            "        self.assertTrue(isinstance(new_client, S3Client))",
            "        self.assertNotEquals(original_client, new_client)",
            "    test_get_s3_client_with_empty_cache.skip = s3clientSkip"
        ],
        "action": [
            "0",
            "0",
            "0",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "0",
            "0",
            "0"
        ],
        "dele_reviseLocation": {},
        "addLocation": [
            "txaws.tests.test_service.AWSServiceEndpointTestCase.self",
            "applications.admin.controllers.default.git_pull"
        ]
    }
}