{
    "lollms/functions/summon_personality.py": {
        "Patch": {
            "0": {
                "beforePatchRowNumber": 18,
                "afterPatchRowNumber": 18,
                "PatchRowcode": "     members:List[AIPersonality] = processor.personality.app.mounted_personalities"
            },
            "1": {
                "beforePatchRowNumber": 19,
                "afterPatchRowNumber": 19,
                "PatchRowcode": "     processor.personality.app.personality = members[member_id]"
            },
            "2": {
                "beforePatchRowNumber": 20,
                "afterPatchRowNumber": 20,
                "PatchRowcode": "     members[member_id].callback=callback"
            },
            "3": {
                "beforePatchRowNumber": 21,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-    members[member_id].new_message(\"\")"
            },
            "4": {
                "beforePatchRowNumber": 22,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-    processor.personality.app.handle_generate_msg(client.client_id, {\"prompt\":prompt})"
            },
            "5": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 21,
                "PatchRowcode": "+    processor.personality.app.handle_generate_msg(client.client_id, {\"prompt\":prompt}, False)"
            },
            "6": {
                "beforePatchRowNumber": 23,
                "afterPatchRowNumber": 22,
                "PatchRowcode": "     processor.personality.app.personality = processor.personality"
            },
            "7": {
                "beforePatchRowNumber": 24,
                "afterPatchRowNumber": 23,
                "PatchRowcode": "     return \"Execution done\""
            },
            "8": {
                "beforePatchRowNumber": 25,
                "afterPatchRowNumber": 24,
                "PatchRowcode": " "
            }
        },
        "frontPatchFile": [
            "from lollms.utilities import PackageManager, find_first_available_file_index, discussion_path_to_url",
            "from lollms.client_session import Client",
            "from lollms.personality import APScript",
            "if not PackageManager.check_package_installed(\"pyautogui\"):",
            "    PackageManager.install_package(\"pyautogui\")",
            "if not PackageManager.check_package_installed(\"PyQt5\"):",
            "    PackageManager.install_package(\"PyQt5\")",
            "from ascii_colors import trace_exception",
            "import cv2",
            "import time",
            "from PyQt5 import QtWidgets, QtGui, QtCore",
            "import sys",
            "from functools import partial",
            "from lollms.personality import AIPersonality",
            "from typing import List",
            "",
            "def summon_personality(member_id:int, prompt: str, previous_discussion_text:str, context_details, callback, processor:APScript, client:Client):",
            "    members:List[AIPersonality] = processor.personality.app.mounted_personalities",
            "    processor.personality.app.personality = members[member_id]",
            "    members[member_id].callback=callback",
            "    members[member_id].new_message(\"\")",
            "    processor.personality.app.handle_generate_msg(client.client_id, {\"prompt\":prompt})",
            "    processor.personality.app.personality = processor.personality",
            "    return \"Execution done\"",
            "",
            "",
            "def summon_personality_function(processor, callback, previous_discussion_text, context_details, client):",
            "        return {",
            "                \"function_name\": \"summon_personality\",",
            "                \"function\": partial(summon_personality, previous_discussion_text=previous_discussion_text, callback=callback, processor=processor, context_details=context_details, client=client),",
            "                \"function_description\": \"Summon a personality by id and prompting it to do something.\",",
            "                \"function_parameters\": [{\"name\": \"member_id\", \"type\": \"int\"},{\"name\": \"prompt\", \"type\": \"str\"}] ",
            "            }"
        ],
        "afterPatchFile": [
            "from lollms.utilities import PackageManager, find_first_available_file_index, discussion_path_to_url",
            "from lollms.client_session import Client",
            "from lollms.personality import APScript",
            "if not PackageManager.check_package_installed(\"pyautogui\"):",
            "    PackageManager.install_package(\"pyautogui\")",
            "if not PackageManager.check_package_installed(\"PyQt5\"):",
            "    PackageManager.install_package(\"PyQt5\")",
            "from ascii_colors import trace_exception",
            "import cv2",
            "import time",
            "from PyQt5 import QtWidgets, QtGui, QtCore",
            "import sys",
            "from functools import partial",
            "from lollms.personality import AIPersonality",
            "from typing import List",
            "",
            "def summon_personality(member_id:int, prompt: str, previous_discussion_text:str, context_details, callback, processor:APScript, client:Client):",
            "    members:List[AIPersonality] = processor.personality.app.mounted_personalities",
            "    processor.personality.app.personality = members[member_id]",
            "    members[member_id].callback=callback",
            "    processor.personality.app.handle_generate_msg(client.client_id, {\"prompt\":prompt}, False)",
            "    processor.personality.app.personality = processor.personality",
            "    return \"Execution done\"",
            "",
            "",
            "def summon_personality_function(processor, callback, previous_discussion_text, context_details, client):",
            "        return {",
            "                \"function_name\": \"summon_personality\",",
            "                \"function\": partial(summon_personality, previous_discussion_text=previous_discussion_text, callback=callback, processor=processor, context_details=context_details, client=client),",
            "                \"function_description\": \"Summon a personality by id and prompting it to do something.\",",
            "                \"function_parameters\": [{\"name\": \"member_id\", \"type\": \"int\"},{\"name\": \"prompt\", \"type\": \"str\"}] ",
            "            }"
        ],
        "action": [
            "0",
            "0",
            "0",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0"
        ],
        "dele_reviseLocation": {
            "21": [
                "summon_personality"
            ],
            "22": [
                "summon_personality"
            ]
        },
        "addLocation": []
    }
}