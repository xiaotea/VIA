{
    "llama-index-core/llama_index/core/exec_utils.py": {
        "Patch": {
            "0": {
                "beforePatchRowNumber": 45,
                "afterPatchRowNumber": 45,
                "PatchRowcode": "     \"float\": float,"
            },
            "1": {
                "beforePatchRowNumber": 46,
                "afterPatchRowNumber": 46,
                "PatchRowcode": "     \"format\": format,"
            },
            "2": {
                "beforePatchRowNumber": 47,
                "afterPatchRowNumber": 47,
                "PatchRowcode": "     \"frozenset\": frozenset,"
            },
            "3": {
                "beforePatchRowNumber": 48,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-    \"getattr\": getattr,"
            },
            "4": {
                "beforePatchRowNumber": 49,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-    \"hasattr\": hasattr,"
            },
            "5": {
                "beforePatchRowNumber": 50,
                "afterPatchRowNumber": 48,
                "PatchRowcode": "     \"hash\": hash,"
            },
            "6": {
                "beforePatchRowNumber": 51,
                "afterPatchRowNumber": 49,
                "PatchRowcode": "     \"hex\": hex,"
            },
            "7": {
                "beforePatchRowNumber": 52,
                "afterPatchRowNumber": 50,
                "PatchRowcode": "     \"int\": int,"
            },
            "8": {
                "beforePatchRowNumber": 53,
                "afterPatchRowNumber": 51,
                "PatchRowcode": "     \"isinstance\": isinstance,"
            },
            "9": {
                "beforePatchRowNumber": 54,
                "afterPatchRowNumber": 52,
                "PatchRowcode": "     \"issubclass\": issubclass,"
            },
            "10": {
                "beforePatchRowNumber": 55,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-    \"iter\": iter,"
            },
            "11": {
                "beforePatchRowNumber": 56,
                "afterPatchRowNumber": 53,
                "PatchRowcode": "     \"len\": len,"
            },
            "12": {
                "beforePatchRowNumber": 57,
                "afterPatchRowNumber": 54,
                "PatchRowcode": "     \"list\": list,"
            },
            "13": {
                "beforePatchRowNumber": 58,
                "afterPatchRowNumber": 55,
                "PatchRowcode": "     \"map\": map,"
            },
            "14": {
                "beforePatchRowNumber": 59,
                "afterPatchRowNumber": 56,
                "PatchRowcode": "     \"max\": max,"
            },
            "15": {
                "beforePatchRowNumber": 60,
                "afterPatchRowNumber": 57,
                "PatchRowcode": "     \"min\": min,"
            },
            "16": {
                "beforePatchRowNumber": 61,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-    \"next\": next,"
            },
            "17": {
                "beforePatchRowNumber": 62,
                "afterPatchRowNumber": 58,
                "PatchRowcode": "     \"oct\": oct,"
            },
            "18": {
                "beforePatchRowNumber": 63,
                "afterPatchRowNumber": 59,
                "PatchRowcode": "     \"ord\": ord,"
            },
            "19": {
                "beforePatchRowNumber": 64,
                "afterPatchRowNumber": 60,
                "PatchRowcode": "     \"pow\": pow,"
            },
            "20": {
                "beforePatchRowNumber": 68,
                "afterPatchRowNumber": 64,
                "PatchRowcode": "     \"reversed\": reversed,"
            },
            "21": {
                "beforePatchRowNumber": 69,
                "afterPatchRowNumber": 65,
                "PatchRowcode": "     \"round\": round,"
            },
            "22": {
                "beforePatchRowNumber": 70,
                "afterPatchRowNumber": 66,
                "PatchRowcode": "     \"set\": set,"
            },
            "23": {
                "beforePatchRowNumber": 71,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-    \"setattr\": setattr,"
            },
            "24": {
                "beforePatchRowNumber": 72,
                "afterPatchRowNumber": 67,
                "PatchRowcode": "     \"slice\": slice,"
            },
            "25": {
                "beforePatchRowNumber": 73,
                "afterPatchRowNumber": 68,
                "PatchRowcode": "     \"sorted\": sorted,"
            },
            "26": {
                "beforePatchRowNumber": 74,
                "afterPatchRowNumber": 69,
                "PatchRowcode": "     \"str\": str,"
            },
            "27": {
                "beforePatchRowNumber": 94,
                "afterPatchRowNumber": 89,
                "PatchRowcode": " class DunderVisitor(ast.NodeVisitor):"
            },
            "28": {
                "beforePatchRowNumber": 95,
                "afterPatchRowNumber": 90,
                "PatchRowcode": "     def __init__(self) -> None:"
            },
            "29": {
                "beforePatchRowNumber": 96,
                "afterPatchRowNumber": 91,
                "PatchRowcode": "         self.has_access_to_private_entity = False"
            },
            "30": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 92,
                "PatchRowcode": "+        self.has_access_to_disallowed_builtin = False"
            },
            "31": {
                "beforePatchRowNumber": 97,
                "afterPatchRowNumber": 93,
                "PatchRowcode": " "
            },
            "32": {
                "beforePatchRowNumber": 98,
                "afterPatchRowNumber": 94,
                "PatchRowcode": "     def visit_Name(self, node: ast.Name) -> None:"
            },
            "33": {
                "beforePatchRowNumber": 99,
                "afterPatchRowNumber": 95,
                "PatchRowcode": "         if node.id.startswith(\"_\"):"
            },
            "34": {
                "beforePatchRowNumber": 100,
                "afterPatchRowNumber": 96,
                "PatchRowcode": "             self.has_access_to_private_entity = True"
            },
            "35": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 97,
                "PatchRowcode": "+        if node.id not in ALLOWED_BUILTINS:"
            },
            "36": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 98,
                "PatchRowcode": "+            self.has_access_to_disallowed_builtin = True"
            },
            "37": {
                "beforePatchRowNumber": 101,
                "afterPatchRowNumber": 99,
                "PatchRowcode": "         self.generic_visit(node)"
            },
            "38": {
                "beforePatchRowNumber": 102,
                "afterPatchRowNumber": 100,
                "PatchRowcode": " "
            },
            "39": {
                "beforePatchRowNumber": 103,
                "afterPatchRowNumber": 101,
                "PatchRowcode": "     def visit_Attribute(self, node: ast.Attribute) -> None:"
            },
            "40": {
                "beforePatchRowNumber": 104,
                "afterPatchRowNumber": 102,
                "PatchRowcode": "         if node.attr.startswith(\"_\"):"
            },
            "41": {
                "beforePatchRowNumber": 105,
                "afterPatchRowNumber": 103,
                "PatchRowcode": "             self.has_access_to_private_entity = True"
            },
            "42": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 104,
                "PatchRowcode": "+        if node.attr not in ALLOWED_BUILTINS:"
            },
            "43": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 105,
                "PatchRowcode": "+            self.has_access_to_disallowed_builtin = True"
            },
            "44": {
                "beforePatchRowNumber": 106,
                "afterPatchRowNumber": 106,
                "PatchRowcode": "         self.generic_visit(node)"
            },
            "45": {
                "beforePatchRowNumber": 107,
                "afterPatchRowNumber": 107,
                "PatchRowcode": " "
            },
            "46": {
                "beforePatchRowNumber": 108,
                "afterPatchRowNumber": 108,
                "PatchRowcode": " "
            },
            "47": {
                "beforePatchRowNumber": 109,
                "afterPatchRowNumber": 109,
                "PatchRowcode": " def _contains_protected_access(code: str) -> bool:"
            },
            "48": {
                "beforePatchRowNumber": 110,
                "afterPatchRowNumber": 110,
                "PatchRowcode": "     tree = ast.parse(code)"
            },
            "49": {
                "beforePatchRowNumber": 111,
                "afterPatchRowNumber": 111,
                "PatchRowcode": "     dunder_visitor = DunderVisitor()"
            },
            "50": {
                "beforePatchRowNumber": 112,
                "afterPatchRowNumber": 112,
                "PatchRowcode": "     dunder_visitor.visit(tree)"
            },
            "51": {
                "beforePatchRowNumber": 113,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-    return dunder_visitor.has_access_to_private_entity"
            },
            "52": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 113,
                "PatchRowcode": "+    return ("
            },
            "53": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 114,
                "PatchRowcode": "+        dunder_visitor.has_access_to_private_entity"
            },
            "54": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 115,
                "PatchRowcode": "+        or dunder_visitor.has_access_to_disallowed_builtin"
            },
            "55": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 116,
                "PatchRowcode": "+    )"
            },
            "56": {
                "beforePatchRowNumber": 114,
                "afterPatchRowNumber": 117,
                "PatchRowcode": " "
            },
            "57": {
                "beforePatchRowNumber": 115,
                "afterPatchRowNumber": 118,
                "PatchRowcode": " "
            },
            "58": {
                "beforePatchRowNumber": 116,
                "afterPatchRowNumber": 119,
                "PatchRowcode": " def _verify_source_safety(__source: Union[str, bytes, CodeType]) -> None:"
            },
            "59": {
                "beforePatchRowNumber": 124,
                "afterPatchRowNumber": 127,
                "PatchRowcode": "         __source = __source.decode()"
            },
            "60": {
                "beforePatchRowNumber": 125,
                "afterPatchRowNumber": 128,
                "PatchRowcode": "     if _contains_protected_access(__source):"
            },
            "61": {
                "beforePatchRowNumber": 126,
                "afterPatchRowNumber": 129,
                "PatchRowcode": "         raise RuntimeError("
            },
            "62": {
                "beforePatchRowNumber": 127,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            \"Execution of code containing references to private or dunder methods is forbidden!\""
            },
            "63": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 130,
                "PatchRowcode": "+            \"Execution of code containing references to private or dunder methods, \""
            },
            "64": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 131,
                "PatchRowcode": "+            \"or disallowed builtins, is forbidden!\""
            },
            "65": {
                "beforePatchRowNumber": 128,
                "afterPatchRowNumber": 132,
                "PatchRowcode": "         )"
            },
            "66": {
                "beforePatchRowNumber": 129,
                "afterPatchRowNumber": 133,
                "PatchRowcode": " "
            },
            "67": {
                "beforePatchRowNumber": 130,
                "afterPatchRowNumber": 134,
                "PatchRowcode": " "
            }
        },
        "frontPatchFile": [
            "import ast",
            "import copy",
            "from types import CodeType, ModuleType",
            "from typing import Any, Dict, Mapping, Sequence, Union",
            "",
            "ALLOWED_IMPORTS = {",
            "    \"math\",",
            "    \"time\",",
            "    \"datetime\",",
            "    \"pandas\",",
            "    \"scipy\",",
            "    \"numpy\",",
            "    \"matplotlib\",",
            "    \"plotly\",",
            "    \"seaborn\",",
            "}",
            "",
            "",
            "def _restricted_import(",
            "    name: str,",
            "    globals: Union[Mapping[str, object], None] = None,",
            "    locals: Union[Mapping[str, object], None] = None,",
            "    fromlist: Sequence[str] = (),",
            "    level: int = 0,",
            ") -> ModuleType:",
            "    if name in ALLOWED_IMPORTS:",
            "        return __import__(name, globals, locals, fromlist, level)",
            "    raise ImportError(f\"Import of module '{name}' is not allowed\")",
            "",
            "",
            "ALLOWED_BUILTINS = {",
            "    \"abs\": abs,",
            "    \"all\": all,",
            "    \"any\": any,",
            "    \"ascii\": ascii,",
            "    \"bin\": bin,",
            "    \"bool\": bool,",
            "    \"bytearray\": bytearray,",
            "    \"bytes\": bytes,",
            "    \"chr\": chr,",
            "    \"complex\": complex,",
            "    \"divmod\": divmod,",
            "    \"enumerate\": enumerate,",
            "    \"filter\": filter,",
            "    \"float\": float,",
            "    \"format\": format,",
            "    \"frozenset\": frozenset,",
            "    \"getattr\": getattr,",
            "    \"hasattr\": hasattr,",
            "    \"hash\": hash,",
            "    \"hex\": hex,",
            "    \"int\": int,",
            "    \"isinstance\": isinstance,",
            "    \"issubclass\": issubclass,",
            "    \"iter\": iter,",
            "    \"len\": len,",
            "    \"list\": list,",
            "    \"map\": map,",
            "    \"max\": max,",
            "    \"min\": min,",
            "    \"next\": next,",
            "    \"oct\": oct,",
            "    \"ord\": ord,",
            "    \"pow\": pow,",
            "    \"print\": print,",
            "    \"range\": range,",
            "    \"repr\": repr,",
            "    \"reversed\": reversed,",
            "    \"round\": round,",
            "    \"set\": set,",
            "    \"setattr\": setattr,",
            "    \"slice\": slice,",
            "    \"sorted\": sorted,",
            "    \"str\": str,",
            "    \"sum\": sum,",
            "    \"tuple\": tuple,",
            "    \"type\": type,",
            "    \"zip\": zip,",
            "    # Constants",
            "    \"True\": True,",
            "    \"False\": False,",
            "    \"None\": None,",
            "    \"__import__\": _restricted_import,",
            "}",
            "",
            "",
            "def _get_restricted_globals(__globals: Union[dict, None]) -> Any:",
            "    restricted_globals = copy.deepcopy(ALLOWED_BUILTINS)",
            "    if __globals:",
            "        restricted_globals.update(__globals)",
            "    return restricted_globals",
            "",
            "",
            "class DunderVisitor(ast.NodeVisitor):",
            "    def __init__(self) -> None:",
            "        self.has_access_to_private_entity = False",
            "",
            "    def visit_Name(self, node: ast.Name) -> None:",
            "        if node.id.startswith(\"_\"):",
            "            self.has_access_to_private_entity = True",
            "        self.generic_visit(node)",
            "",
            "    def visit_Attribute(self, node: ast.Attribute) -> None:",
            "        if node.attr.startswith(\"_\"):",
            "            self.has_access_to_private_entity = True",
            "        self.generic_visit(node)",
            "",
            "",
            "def _contains_protected_access(code: str) -> bool:",
            "    tree = ast.parse(code)",
            "    dunder_visitor = DunderVisitor()",
            "    dunder_visitor.visit(tree)",
            "    return dunder_visitor.has_access_to_private_entity",
            "",
            "",
            "def _verify_source_safety(__source: Union[str, bytes, CodeType]) -> None:",
            "    \"\"\"",
            "    Verify that the source is safe to execute. For now, this means that it",
            "    does not contain any references to private or dunder methods.",
            "    \"\"\"",
            "    if isinstance(__source, CodeType):",
            "        raise RuntimeError(\"Direct execution of CodeType is forbidden!\")",
            "    if isinstance(__source, bytes):",
            "        __source = __source.decode()",
            "    if _contains_protected_access(__source):",
            "        raise RuntimeError(",
            "            \"Execution of code containing references to private or dunder methods is forbidden!\"",
            "        )",
            "",
            "",
            "def safe_eval(",
            "    __source: Union[str, bytes, CodeType],",
            "    __globals: Union[Dict[str, Any], None] = None,",
            "    __locals: Union[Mapping[str, object], None] = None,",
            ") -> Any:",
            "    \"\"\"",
            "    eval within safe global context.",
            "    \"\"\"",
            "    _verify_source_safety(__source)",
            "    return eval(__source, _get_restricted_globals(__globals), __locals)",
            "",
            "",
            "def safe_exec(",
            "    __source: Union[str, bytes, CodeType],",
            "    __globals: Union[Dict[str, Any], None] = None,",
            "    __locals: Union[Mapping[str, object], None] = None,",
            ") -> None:",
            "    \"\"\"",
            "    eval within safe global context.",
            "    \"\"\"",
            "    _verify_source_safety(__source)",
            "    return exec(__source, _get_restricted_globals(__globals), __locals)"
        ],
        "afterPatchFile": [
            "import ast",
            "import copy",
            "from types import CodeType, ModuleType",
            "from typing import Any, Dict, Mapping, Sequence, Union",
            "",
            "ALLOWED_IMPORTS = {",
            "    \"math\",",
            "    \"time\",",
            "    \"datetime\",",
            "    \"pandas\",",
            "    \"scipy\",",
            "    \"numpy\",",
            "    \"matplotlib\",",
            "    \"plotly\",",
            "    \"seaborn\",",
            "}",
            "",
            "",
            "def _restricted_import(",
            "    name: str,",
            "    globals: Union[Mapping[str, object], None] = None,",
            "    locals: Union[Mapping[str, object], None] = None,",
            "    fromlist: Sequence[str] = (),",
            "    level: int = 0,",
            ") -> ModuleType:",
            "    if name in ALLOWED_IMPORTS:",
            "        return __import__(name, globals, locals, fromlist, level)",
            "    raise ImportError(f\"Import of module '{name}' is not allowed\")",
            "",
            "",
            "ALLOWED_BUILTINS = {",
            "    \"abs\": abs,",
            "    \"all\": all,",
            "    \"any\": any,",
            "    \"ascii\": ascii,",
            "    \"bin\": bin,",
            "    \"bool\": bool,",
            "    \"bytearray\": bytearray,",
            "    \"bytes\": bytes,",
            "    \"chr\": chr,",
            "    \"complex\": complex,",
            "    \"divmod\": divmod,",
            "    \"enumerate\": enumerate,",
            "    \"filter\": filter,",
            "    \"float\": float,",
            "    \"format\": format,",
            "    \"frozenset\": frozenset,",
            "    \"hash\": hash,",
            "    \"hex\": hex,",
            "    \"int\": int,",
            "    \"isinstance\": isinstance,",
            "    \"issubclass\": issubclass,",
            "    \"len\": len,",
            "    \"list\": list,",
            "    \"map\": map,",
            "    \"max\": max,",
            "    \"min\": min,",
            "    \"oct\": oct,",
            "    \"ord\": ord,",
            "    \"pow\": pow,",
            "    \"print\": print,",
            "    \"range\": range,",
            "    \"repr\": repr,",
            "    \"reversed\": reversed,",
            "    \"round\": round,",
            "    \"set\": set,",
            "    \"slice\": slice,",
            "    \"sorted\": sorted,",
            "    \"str\": str,",
            "    \"sum\": sum,",
            "    \"tuple\": tuple,",
            "    \"type\": type,",
            "    \"zip\": zip,",
            "    # Constants",
            "    \"True\": True,",
            "    \"False\": False,",
            "    \"None\": None,",
            "    \"__import__\": _restricted_import,",
            "}",
            "",
            "",
            "def _get_restricted_globals(__globals: Union[dict, None]) -> Any:",
            "    restricted_globals = copy.deepcopy(ALLOWED_BUILTINS)",
            "    if __globals:",
            "        restricted_globals.update(__globals)",
            "    return restricted_globals",
            "",
            "",
            "class DunderVisitor(ast.NodeVisitor):",
            "    def __init__(self) -> None:",
            "        self.has_access_to_private_entity = False",
            "        self.has_access_to_disallowed_builtin = False",
            "",
            "    def visit_Name(self, node: ast.Name) -> None:",
            "        if node.id.startswith(\"_\"):",
            "            self.has_access_to_private_entity = True",
            "        if node.id not in ALLOWED_BUILTINS:",
            "            self.has_access_to_disallowed_builtin = True",
            "        self.generic_visit(node)",
            "",
            "    def visit_Attribute(self, node: ast.Attribute) -> None:",
            "        if node.attr.startswith(\"_\"):",
            "            self.has_access_to_private_entity = True",
            "        if node.attr not in ALLOWED_BUILTINS:",
            "            self.has_access_to_disallowed_builtin = True",
            "        self.generic_visit(node)",
            "",
            "",
            "def _contains_protected_access(code: str) -> bool:",
            "    tree = ast.parse(code)",
            "    dunder_visitor = DunderVisitor()",
            "    dunder_visitor.visit(tree)",
            "    return (",
            "        dunder_visitor.has_access_to_private_entity",
            "        or dunder_visitor.has_access_to_disallowed_builtin",
            "    )",
            "",
            "",
            "def _verify_source_safety(__source: Union[str, bytes, CodeType]) -> None:",
            "    \"\"\"",
            "    Verify that the source is safe to execute. For now, this means that it",
            "    does not contain any references to private or dunder methods.",
            "    \"\"\"",
            "    if isinstance(__source, CodeType):",
            "        raise RuntimeError(\"Direct execution of CodeType is forbidden!\")",
            "    if isinstance(__source, bytes):",
            "        __source = __source.decode()",
            "    if _contains_protected_access(__source):",
            "        raise RuntimeError(",
            "            \"Execution of code containing references to private or dunder methods, \"",
            "            \"or disallowed builtins, is forbidden!\"",
            "        )",
            "",
            "",
            "def safe_eval(",
            "    __source: Union[str, bytes, CodeType],",
            "    __globals: Union[Dict[str, Any], None] = None,",
            "    __locals: Union[Mapping[str, object], None] = None,",
            ") -> Any:",
            "    \"\"\"",
            "    eval within safe global context.",
            "    \"\"\"",
            "    _verify_source_safety(__source)",
            "    return eval(__source, _get_restricted_globals(__globals), __locals)",
            "",
            "",
            "def safe_exec(",
            "    __source: Union[str, bytes, CodeType],",
            "    __globals: Union[Dict[str, Any], None] = None,",
            "    __locals: Union[Mapping[str, object], None] = None,",
            ") -> None:",
            "    \"\"\"",
            "    eval within safe global context.",
            "    \"\"\"",
            "    _verify_source_safety(__source)",
            "    return exec(__source, _get_restricted_globals(__globals), __locals)"
        ],
        "action": [
            "0",
            "0",
            "0",
            "1",
            "1",
            "0",
            "0",
            "0",
            "0",
            "0",
            "1",
            "0",
            "0",
            "0",
            "0",
            "0",
            "1",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "1",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0"
        ],
        "dele_reviseLocation": {
            "48": [],
            "49": [],
            "55": [],
            "61": [],
            "71": [],
            "113": [
                "_contains_protected_access"
            ],
            "127": [
                "_verify_source_safety"
            ]
        },
        "addLocation": []
    }
}