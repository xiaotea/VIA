{
    "llama_index/exec_utils.py": {
        "Patch": {
            "0": {
                "beforePatchRowNumber": 1,
                "afterPatchRowNumber": 1,
                "PatchRowcode": " import copy"
            },
            "1": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 2,
                "PatchRowcode": "+import re"
            },
            "2": {
                "beforePatchRowNumber": 2,
                "afterPatchRowNumber": 3,
                "PatchRowcode": " from types import CodeType, ModuleType"
            },
            "3": {
                "beforePatchRowNumber": 3,
                "afterPatchRowNumber": 4,
                "PatchRowcode": " from typing import Any, Dict, Mapping, Sequence, Union"
            },
            "4": {
                "beforePatchRowNumber": 4,
                "afterPatchRowNumber": 5,
                "PatchRowcode": " "
            },
            "5": {
                "beforePatchRowNumber": 90,
                "afterPatchRowNumber": 91,
                "PatchRowcode": "     return restricted_globals"
            },
            "6": {
                "beforePatchRowNumber": 91,
                "afterPatchRowNumber": 92,
                "PatchRowcode": " "
            },
            "7": {
                "beforePatchRowNumber": 92,
                "afterPatchRowNumber": 93,
                "PatchRowcode": " "
            },
            "8": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 94,
                "PatchRowcode": "+def _verify_source_safety(__source: Union[str, bytes, CodeType]) -> None:"
            },
            "9": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 95,
                "PatchRowcode": "+    pattern = r\"_{1,2}\\w+_{0,2}\""
            },
            "10": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 96,
                "PatchRowcode": "+"
            },
            "11": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 97,
                "PatchRowcode": "+    if isinstance(__source, CodeType):"
            },
            "12": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 98,
                "PatchRowcode": "+        raise RuntimeError(\"Direct execution of CodeType is forbidden!\")"
            },
            "13": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 99,
                "PatchRowcode": "+    if isinstance(__source, bytes):"
            },
            "14": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 100,
                "PatchRowcode": "+        __source = __source.decode()"
            },
            "15": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 101,
                "PatchRowcode": "+"
            },
            "16": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 102,
                "PatchRowcode": "+    matches = re.findall(pattern, __source)"
            },
            "17": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 103,
                "PatchRowcode": "+"
            },
            "18": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 104,
                "PatchRowcode": "+    if matches:"
            },
            "19": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 105,
                "PatchRowcode": "+        raise RuntimeError("
            },
            "20": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 106,
                "PatchRowcode": "+            \"Execution of code containing references to private or dunder methods is forbidden!\""
            },
            "21": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 107,
                "PatchRowcode": "+        )"
            },
            "22": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 108,
                "PatchRowcode": "+"
            },
            "23": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 109,
                "PatchRowcode": "+"
            },
            "24": {
                "beforePatchRowNumber": 93,
                "afterPatchRowNumber": 110,
                "PatchRowcode": " def safe_eval("
            },
            "25": {
                "beforePatchRowNumber": 94,
                "afterPatchRowNumber": 111,
                "PatchRowcode": "     __source: Union[str, bytes, CodeType],"
            },
            "26": {
                "beforePatchRowNumber": 95,
                "afterPatchRowNumber": 112,
                "PatchRowcode": "     __globals: Union[Dict[str, Any], None] = None,"
            },
            "27": {
                "beforePatchRowNumber": 98,
                "afterPatchRowNumber": 115,
                "PatchRowcode": "     \"\"\""
            },
            "28": {
                "beforePatchRowNumber": 99,
                "afterPatchRowNumber": 116,
                "PatchRowcode": "     eval within safe global context."
            },
            "29": {
                "beforePatchRowNumber": 100,
                "afterPatchRowNumber": 117,
                "PatchRowcode": "     \"\"\""
            },
            "30": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 118,
                "PatchRowcode": "+    _verify_source_safety(__source)"
            },
            "31": {
                "beforePatchRowNumber": 101,
                "afterPatchRowNumber": 119,
                "PatchRowcode": "     return eval(__source, _get_restricted_globals(__globals), __locals)"
            },
            "32": {
                "beforePatchRowNumber": 102,
                "afterPatchRowNumber": 120,
                "PatchRowcode": " "
            },
            "33": {
                "beforePatchRowNumber": 103,
                "afterPatchRowNumber": 121,
                "PatchRowcode": " "
            },
            "34": {
                "beforePatchRowNumber": 109,
                "afterPatchRowNumber": 127,
                "PatchRowcode": "     \"\"\""
            },
            "35": {
                "beforePatchRowNumber": 110,
                "afterPatchRowNumber": 128,
                "PatchRowcode": "     eval within safe global context."
            },
            "36": {
                "beforePatchRowNumber": 111,
                "afterPatchRowNumber": 129,
                "PatchRowcode": "     \"\"\""
            },
            "37": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 130,
                "PatchRowcode": "+    _verify_source_safety(__source)"
            },
            "38": {
                "beforePatchRowNumber": 112,
                "afterPatchRowNumber": 131,
                "PatchRowcode": "     return exec(__source, _get_restricted_globals(__globals), __locals)"
            }
        },
        "frontPatchFile": [
            "import copy",
            "from types import CodeType, ModuleType",
            "from typing import Any, Dict, Mapping, Sequence, Union",
            "",
            "ALLOWED_IMPORTS = {",
            "    \"math\",",
            "    \"time\",",
            "    \"datetime\",",
            "    \"pandas\",",
            "    \"scipy\",",
            "    \"numpy\",",
            "    \"matplotlib\",",
            "    \"plotly\",",
            "    \"seaborn\",",
            "}",
            "",
            "",
            "def _restricted_import(",
            "    name: str,",
            "    globals: Union[Mapping[str, object], None] = None,",
            "    locals: Union[Mapping[str, object], None] = None,",
            "    fromlist: Sequence[str] = (),",
            "    level: int = 0,",
            ") -> ModuleType:",
            "    if name in ALLOWED_IMPORTS:",
            "        return __import__(name, globals, locals, fromlist, level)",
            "    raise ImportError(f\"Import of module '{name}' is not allowed\")",
            "",
            "",
            "ALLOWED_BUILTINS = {",
            "    \"abs\": abs,",
            "    \"all\": all,",
            "    \"any\": any,",
            "    \"ascii\": ascii,",
            "    \"bin\": bin,",
            "    \"bool\": bool,",
            "    \"bytearray\": bytearray,",
            "    \"bytes\": bytes,",
            "    \"chr\": chr,",
            "    \"complex\": complex,",
            "    \"divmod\": divmod,",
            "    \"enumerate\": enumerate,",
            "    \"filter\": filter,",
            "    \"float\": float,",
            "    \"format\": format,",
            "    \"frozenset\": frozenset,",
            "    \"getattr\": getattr,",
            "    \"hasattr\": hasattr,",
            "    \"hash\": hash,",
            "    \"hex\": hex,",
            "    \"int\": int,",
            "    \"isinstance\": isinstance,",
            "    \"issubclass\": issubclass,",
            "    \"iter\": iter,",
            "    \"len\": len,",
            "    \"list\": list,",
            "    \"map\": map,",
            "    \"max\": max,",
            "    \"min\": min,",
            "    \"next\": next,",
            "    \"oct\": oct,",
            "    \"ord\": ord,",
            "    \"pow\": pow,",
            "    \"print\": print,",
            "    \"range\": range,",
            "    \"repr\": repr,",
            "    \"reversed\": reversed,",
            "    \"round\": round,",
            "    \"set\": set,",
            "    \"setattr\": setattr,",
            "    \"slice\": slice,",
            "    \"sorted\": sorted,",
            "    \"str\": str,",
            "    \"sum\": sum,",
            "    \"tuple\": tuple,",
            "    \"type\": type,",
            "    \"zip\": zip,",
            "    # Constants",
            "    \"True\": True,",
            "    \"False\": False,",
            "    \"None\": None,",
            "    \"__import__\": _restricted_import,",
            "}",
            "",
            "",
            "def _get_restricted_globals(__globals: Union[dict, None]) -> Any:",
            "    restricted_globals = copy.deepcopy(ALLOWED_BUILTINS)",
            "    if __globals:",
            "        restricted_globals.update(__globals)",
            "    return restricted_globals",
            "",
            "",
            "def safe_eval(",
            "    __source: Union[str, bytes, CodeType],",
            "    __globals: Union[Dict[str, Any], None] = None,",
            "    __locals: Union[Mapping[str, object], None] = None,",
            ") -> Any:",
            "    \"\"\"",
            "    eval within safe global context.",
            "    \"\"\"",
            "    return eval(__source, _get_restricted_globals(__globals), __locals)",
            "",
            "",
            "def safe_exec(",
            "    __source: Union[str, bytes, CodeType],",
            "    __globals: Union[Dict[str, Any], None] = None,",
            "    __locals: Union[Mapping[str, object], None] = None,",
            ") -> None:",
            "    \"\"\"",
            "    eval within safe global context.",
            "    \"\"\"",
            "    return exec(__source, _get_restricted_globals(__globals), __locals)"
        ],
        "afterPatchFile": [
            "import copy",
            "import re",
            "from types import CodeType, ModuleType",
            "from typing import Any, Dict, Mapping, Sequence, Union",
            "",
            "ALLOWED_IMPORTS = {",
            "    \"math\",",
            "    \"time\",",
            "    \"datetime\",",
            "    \"pandas\",",
            "    \"scipy\",",
            "    \"numpy\",",
            "    \"matplotlib\",",
            "    \"plotly\",",
            "    \"seaborn\",",
            "}",
            "",
            "",
            "def _restricted_import(",
            "    name: str,",
            "    globals: Union[Mapping[str, object], None] = None,",
            "    locals: Union[Mapping[str, object], None] = None,",
            "    fromlist: Sequence[str] = (),",
            "    level: int = 0,",
            ") -> ModuleType:",
            "    if name in ALLOWED_IMPORTS:",
            "        return __import__(name, globals, locals, fromlist, level)",
            "    raise ImportError(f\"Import of module '{name}' is not allowed\")",
            "",
            "",
            "ALLOWED_BUILTINS = {",
            "    \"abs\": abs,",
            "    \"all\": all,",
            "    \"any\": any,",
            "    \"ascii\": ascii,",
            "    \"bin\": bin,",
            "    \"bool\": bool,",
            "    \"bytearray\": bytearray,",
            "    \"bytes\": bytes,",
            "    \"chr\": chr,",
            "    \"complex\": complex,",
            "    \"divmod\": divmod,",
            "    \"enumerate\": enumerate,",
            "    \"filter\": filter,",
            "    \"float\": float,",
            "    \"format\": format,",
            "    \"frozenset\": frozenset,",
            "    \"getattr\": getattr,",
            "    \"hasattr\": hasattr,",
            "    \"hash\": hash,",
            "    \"hex\": hex,",
            "    \"int\": int,",
            "    \"isinstance\": isinstance,",
            "    \"issubclass\": issubclass,",
            "    \"iter\": iter,",
            "    \"len\": len,",
            "    \"list\": list,",
            "    \"map\": map,",
            "    \"max\": max,",
            "    \"min\": min,",
            "    \"next\": next,",
            "    \"oct\": oct,",
            "    \"ord\": ord,",
            "    \"pow\": pow,",
            "    \"print\": print,",
            "    \"range\": range,",
            "    \"repr\": repr,",
            "    \"reversed\": reversed,",
            "    \"round\": round,",
            "    \"set\": set,",
            "    \"setattr\": setattr,",
            "    \"slice\": slice,",
            "    \"sorted\": sorted,",
            "    \"str\": str,",
            "    \"sum\": sum,",
            "    \"tuple\": tuple,",
            "    \"type\": type,",
            "    \"zip\": zip,",
            "    # Constants",
            "    \"True\": True,",
            "    \"False\": False,",
            "    \"None\": None,",
            "    \"__import__\": _restricted_import,",
            "}",
            "",
            "",
            "def _get_restricted_globals(__globals: Union[dict, None]) -> Any:",
            "    restricted_globals = copy.deepcopy(ALLOWED_BUILTINS)",
            "    if __globals:",
            "        restricted_globals.update(__globals)",
            "    return restricted_globals",
            "",
            "",
            "def _verify_source_safety(__source: Union[str, bytes, CodeType]) -> None:",
            "    pattern = r\"_{1,2}\\w+_{0,2}\"",
            "",
            "    if isinstance(__source, CodeType):",
            "        raise RuntimeError(\"Direct execution of CodeType is forbidden!\")",
            "    if isinstance(__source, bytes):",
            "        __source = __source.decode()",
            "",
            "    matches = re.findall(pattern, __source)",
            "",
            "    if matches:",
            "        raise RuntimeError(",
            "            \"Execution of code containing references to private or dunder methods is forbidden!\"",
            "        )",
            "",
            "",
            "def safe_eval(",
            "    __source: Union[str, bytes, CodeType],",
            "    __globals: Union[Dict[str, Any], None] = None,",
            "    __locals: Union[Mapping[str, object], None] = None,",
            ") -> Any:",
            "    \"\"\"",
            "    eval within safe global context.",
            "    \"\"\"",
            "    _verify_source_safety(__source)",
            "    return eval(__source, _get_restricted_globals(__globals), __locals)",
            "",
            "",
            "def safe_exec(",
            "    __source: Union[str, bytes, CodeType],",
            "    __globals: Union[Dict[str, Any], None] = None,",
            "    __locals: Union[Mapping[str, object], None] = None,",
            ") -> None:",
            "    \"\"\"",
            "    eval within safe global context.",
            "    \"\"\"",
            "    _verify_source_safety(__source)",
            "    return exec(__source, _get_restricted_globals(__globals), __locals)"
        ],
        "action": [
            "0",
            "-1",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "-1",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "-1",
            "0"
        ],
        "dele_reviseLocation": {},
        "addLocation": [
            "llama_index.exec_utils.safe_eval",
            "llama_index.exec_utils.safe_exec",
            "tensorflow.python.kernel_tests.array_ops_test.StridedSliceTest"
        ]
    }
}