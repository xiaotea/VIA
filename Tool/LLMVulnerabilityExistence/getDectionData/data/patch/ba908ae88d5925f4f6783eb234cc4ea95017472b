{
    "openstack_dashboard/dashboards/admin/aggregates/tables.py": {
        "Patch": {
            "0": {
                "beforePatchRowNumber": 93,
                "afterPatchRowNumber": 93,
                "PatchRowcode": "     return host_details"
            },
            "1": {
                "beforePatchRowNumber": 94,
                "afterPatchRowNumber": 94,
                "PatchRowcode": " "
            },
            "2": {
                "beforePatchRowNumber": 95,
                "afterPatchRowNumber": 95,
                "PatchRowcode": " "
            },
            "3": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 96,
                "PatchRowcode": "+def safe_unordered_list(value):"
            },
            "4": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 97,
                "PatchRowcode": "+    return filters.unordered_list(value, autoescape=True)"
            },
            "5": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 98,
                "PatchRowcode": "+"
            },
            "6": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 99,
                "PatchRowcode": "+"
            },
            "7": {
                "beforePatchRowNumber": 96,
                "afterPatchRowNumber": 100,
                "PatchRowcode": " class HostAggregatesTable(tables.DataTable):"
            },
            "8": {
                "beforePatchRowNumber": 97,
                "afterPatchRowNumber": 101,
                "PatchRowcode": "     name = tables.Column('name', verbose_name=_('Name'))"
            },
            "9": {
                "beforePatchRowNumber": 98,
                "afterPatchRowNumber": 102,
                "PatchRowcode": "     availability_zone = tables.Column('availability_zone',"
            },
            "10": {
                "beforePatchRowNumber": 99,
                "afterPatchRowNumber": 103,
                "PatchRowcode": "                                       verbose_name=_('Availability Zone'))"
            },
            "11": {
                "beforePatchRowNumber": 100,
                "afterPatchRowNumber": 104,
                "PatchRowcode": "     hosts = tables.Column(get_aggregate_hosts,"
            },
            "12": {
                "beforePatchRowNumber": 101,
                "afterPatchRowNumber": 105,
                "PatchRowcode": "                           verbose_name=_(\"Hosts\"),"
            },
            "13": {
                "beforePatchRowNumber": 102,
                "afterPatchRowNumber": 106,
                "PatchRowcode": "                           wrap_list=True,"
            },
            "14": {
                "beforePatchRowNumber": 103,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-                          filters=(filters.unordered_list,))"
            },
            "15": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 107,
                "PatchRowcode": "+                          filters=(safe_unordered_list,))"
            },
            "16": {
                "beforePatchRowNumber": 104,
                "afterPatchRowNumber": 108,
                "PatchRowcode": "     metadata = tables.Column(get_metadata,"
            },
            "17": {
                "beforePatchRowNumber": 105,
                "afterPatchRowNumber": 109,
                "PatchRowcode": "                              verbose_name=_(\"Metadata\"),"
            },
            "18": {
                "beforePatchRowNumber": 106,
                "afterPatchRowNumber": 110,
                "PatchRowcode": "                              wrap_list=True,"
            },
            "19": {
                "beforePatchRowNumber": 107,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-                             filters=(filters.unordered_list,))"
            },
            "20": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 111,
                "PatchRowcode": "+                             filters=(safe_unordered_list,))"
            },
            "21": {
                "beforePatchRowNumber": 108,
                "afterPatchRowNumber": 112,
                "PatchRowcode": " "
            },
            "22": {
                "beforePatchRowNumber": 109,
                "afterPatchRowNumber": 113,
                "PatchRowcode": "     class Meta:"
            },
            "23": {
                "beforePatchRowNumber": 110,
                "afterPatchRowNumber": 114,
                "PatchRowcode": "         name = \"host_aggregates\""
            },
            "24": {
                "beforePatchRowNumber": 123,
                "afterPatchRowNumber": 127,
                "PatchRowcode": "     hosts = tables.Column(get_zone_hosts,"
            },
            "25": {
                "beforePatchRowNumber": 124,
                "afterPatchRowNumber": 128,
                "PatchRowcode": "                           verbose_name=_('Hosts'),"
            },
            "26": {
                "beforePatchRowNumber": 125,
                "afterPatchRowNumber": 129,
                "PatchRowcode": "                           wrap_list=True,"
            },
            "27": {
                "beforePatchRowNumber": 126,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-                          filters=(filters.unordered_list,))"
            },
            "28": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 130,
                "PatchRowcode": "+                          filters=(safe_unordered_list,))"
            },
            "29": {
                "beforePatchRowNumber": 127,
                "afterPatchRowNumber": 131,
                "PatchRowcode": "     available = tables.Column(get_available,"
            },
            "30": {
                "beforePatchRowNumber": 128,
                "afterPatchRowNumber": 132,
                "PatchRowcode": "                               verbose_name=_('Available'),"
            },
            "31": {
                "beforePatchRowNumber": 129,
                "afterPatchRowNumber": 133,
                "PatchRowcode": "                               status=True,"
            }
        },
        "frontPatchFile": [
            "#    Licensed under the Apache License, Version 2.0 (the \"License\"); you may",
            "#    not use this file except in compliance with the License. You may obtain",
            "#    a copy of the License at",
            "#",
            "#         http://www.apache.org/licenses/LICENSE-2.0",
            "#",
            "#    Unless required by applicable law or agreed to in writing, software",
            "#    distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT",
            "#    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
            "#    License for the specific language governing permissions and limitations",
            "#    under the License.",
            "",
            "from django.template import defaultfilters as filters",
            "from django.utils.translation import ugettext_lazy as _",
            "",
            "from horizon import tables",
            "",
            "from openstack_dashboard import api",
            "from openstack_dashboard.dashboards.admin.aggregates import constants",
            "",
            "",
            "class DeleteAggregateAction(tables.DeleteAction):",
            "    data_type_singular = _(\"Host Aggregate\")",
            "    data_type_plural = _(\"Host Aggregates\")",
            "",
            "    def delete(self, request, obj_id):",
            "        api.nova.aggregate_delete(request, obj_id)",
            "",
            "",
            "class CreateAggregateAction(tables.LinkAction):",
            "    name = \"create\"",
            "    verbose_name = _(\"Create Host Aggregate\")",
            "    url = constants.AGGREGATES_CREATE_URL",
            "    classes = (\"ajax-modal\", \"btn-create\")",
            "",
            "",
            "class ManageHostsAction(tables.LinkAction):",
            "    name = \"manage\"",
            "    verbose_name = _(\"Manage Hosts\")",
            "    url = constants.AGGREGATES_MANAGE_HOSTS_URL",
            "    classes = (\"ajax-modal\", \"btn-create\")",
            "",
            "",
            "class UpdateAggregateAction(tables.LinkAction):",
            "    name = \"update\"",
            "    verbose_name = _(\"Edit Host Aggregate\")",
            "    url = constants.AGGREGATES_UPDATE_URL",
            "    classes = (\"ajax-modal\", \"btn-edit\")",
            "",
            "",
            "class AggregateFilterAction(tables.FilterAction):",
            "    def filter(self, table, aggregates, filter_string):",
            "        q = filter_string.lower()",
            "",
            "        def comp(aggregate):",
            "            return q in aggregate.name.lower()",
            "",
            "        return filter(comp, aggregates)",
            "",
            "",
            "class AvailabilityZoneFilterAction(tables.FilterAction):",
            "    def filter(self, table, availability_zones, filter_string):",
            "        q = filter_string.lower()",
            "",
            "        def comp(availabilityZone):",
            "            return q in availabilityZone.name.lower()",
            "",
            "        return filter(comp, availability_zones)",
            "",
            "",
            "def get_aggregate_hosts(aggregate):",
            "    return [host for host in aggregate.hosts]",
            "",
            "",
            "def get_metadata(aggregate):",
            "    return [' = '.join([key, val]) for key, val",
            "            in aggregate.metadata.iteritems()]",
            "",
            "",
            "def get_available(zone):",
            "    return zone.zoneState['available']",
            "",
            "",
            "def get_zone_hosts(zone):",
            "    hosts = zone.hosts",
            "    host_details = []",
            "    if hosts is None:",
            "        return []",
            "    for name, services in hosts.items():",
            "        up = all(s['active'] and s['available'] for s in services.values())",
            "        up = _(\"Services Up\") if up else _(\"Services Down\")",
            "        host_details.append(\"%(host)s (%(up)s)\" % {'host': name, 'up': up})",
            "    return host_details",
            "",
            "",
            "class HostAggregatesTable(tables.DataTable):",
            "    name = tables.Column('name', verbose_name=_('Name'))",
            "    availability_zone = tables.Column('availability_zone',",
            "                                      verbose_name=_('Availability Zone'))",
            "    hosts = tables.Column(get_aggregate_hosts,",
            "                          verbose_name=_(\"Hosts\"),",
            "                          wrap_list=True,",
            "                          filters=(filters.unordered_list,))",
            "    metadata = tables.Column(get_metadata,",
            "                             verbose_name=_(\"Metadata\"),",
            "                             wrap_list=True,",
            "                             filters=(filters.unordered_list,))",
            "",
            "    class Meta:",
            "        name = \"host_aggregates\"",
            "        verbose_name = _(\"Host Aggregates\")",
            "        table_actions = (AggregateFilterAction,",
            "                         CreateAggregateAction,",
            "                         DeleteAggregateAction)",
            "        row_actions = (UpdateAggregateAction,",
            "                       ManageHostsAction,",
            "                       DeleteAggregateAction)",
            "",
            "",
            "class AvailabilityZonesTable(tables.DataTable):",
            "    name = tables.Column('zoneName',",
            "                         verbose_name=_('Availability Zone Name'))",
            "    hosts = tables.Column(get_zone_hosts,",
            "                          verbose_name=_('Hosts'),",
            "                          wrap_list=True,",
            "                          filters=(filters.unordered_list,))",
            "    available = tables.Column(get_available,",
            "                              verbose_name=_('Available'),",
            "                              status=True,",
            "                              filters=(filters.yesno, filters.capfirst))",
            "",
            "    def get_object_id(self, zone):",
            "        return zone.zoneName",
            "",
            "    class Meta:",
            "        name = \"availability_zones\"",
            "        verbose_name = _(\"Availability Zones\")",
            "        table_actions = (AggregateFilterAction,)",
            "        multi_select = False"
        ],
        "afterPatchFile": [
            "#    Licensed under the Apache License, Version 2.0 (the \"License\"); you may",
            "#    not use this file except in compliance with the License. You may obtain",
            "#    a copy of the License at",
            "#",
            "#         http://www.apache.org/licenses/LICENSE-2.0",
            "#",
            "#    Unless required by applicable law or agreed to in writing, software",
            "#    distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT",
            "#    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the",
            "#    License for the specific language governing permissions and limitations",
            "#    under the License.",
            "",
            "from django.template import defaultfilters as filters",
            "from django.utils.translation import ugettext_lazy as _",
            "",
            "from horizon import tables",
            "",
            "from openstack_dashboard import api",
            "from openstack_dashboard.dashboards.admin.aggregates import constants",
            "",
            "",
            "class DeleteAggregateAction(tables.DeleteAction):",
            "    data_type_singular = _(\"Host Aggregate\")",
            "    data_type_plural = _(\"Host Aggregates\")",
            "",
            "    def delete(self, request, obj_id):",
            "        api.nova.aggregate_delete(request, obj_id)",
            "",
            "",
            "class CreateAggregateAction(tables.LinkAction):",
            "    name = \"create\"",
            "    verbose_name = _(\"Create Host Aggregate\")",
            "    url = constants.AGGREGATES_CREATE_URL",
            "    classes = (\"ajax-modal\", \"btn-create\")",
            "",
            "",
            "class ManageHostsAction(tables.LinkAction):",
            "    name = \"manage\"",
            "    verbose_name = _(\"Manage Hosts\")",
            "    url = constants.AGGREGATES_MANAGE_HOSTS_URL",
            "    classes = (\"ajax-modal\", \"btn-create\")",
            "",
            "",
            "class UpdateAggregateAction(tables.LinkAction):",
            "    name = \"update\"",
            "    verbose_name = _(\"Edit Host Aggregate\")",
            "    url = constants.AGGREGATES_UPDATE_URL",
            "    classes = (\"ajax-modal\", \"btn-edit\")",
            "",
            "",
            "class AggregateFilterAction(tables.FilterAction):",
            "    def filter(self, table, aggregates, filter_string):",
            "        q = filter_string.lower()",
            "",
            "        def comp(aggregate):",
            "            return q in aggregate.name.lower()",
            "",
            "        return filter(comp, aggregates)",
            "",
            "",
            "class AvailabilityZoneFilterAction(tables.FilterAction):",
            "    def filter(self, table, availability_zones, filter_string):",
            "        q = filter_string.lower()",
            "",
            "        def comp(availabilityZone):",
            "            return q in availabilityZone.name.lower()",
            "",
            "        return filter(comp, availability_zones)",
            "",
            "",
            "def get_aggregate_hosts(aggregate):",
            "    return [host for host in aggregate.hosts]",
            "",
            "",
            "def get_metadata(aggregate):",
            "    return [' = '.join([key, val]) for key, val",
            "            in aggregate.metadata.iteritems()]",
            "",
            "",
            "def get_available(zone):",
            "    return zone.zoneState['available']",
            "",
            "",
            "def get_zone_hosts(zone):",
            "    hosts = zone.hosts",
            "    host_details = []",
            "    if hosts is None:",
            "        return []",
            "    for name, services in hosts.items():",
            "        up = all(s['active'] and s['available'] for s in services.values())",
            "        up = _(\"Services Up\") if up else _(\"Services Down\")",
            "        host_details.append(\"%(host)s (%(up)s)\" % {'host': name, 'up': up})",
            "    return host_details",
            "",
            "",
            "def safe_unordered_list(value):",
            "    return filters.unordered_list(value, autoescape=True)",
            "",
            "",
            "class HostAggregatesTable(tables.DataTable):",
            "    name = tables.Column('name', verbose_name=_('Name'))",
            "    availability_zone = tables.Column('availability_zone',",
            "                                      verbose_name=_('Availability Zone'))",
            "    hosts = tables.Column(get_aggregate_hosts,",
            "                          verbose_name=_(\"Hosts\"),",
            "                          wrap_list=True,",
            "                          filters=(safe_unordered_list,))",
            "    metadata = tables.Column(get_metadata,",
            "                             verbose_name=_(\"Metadata\"),",
            "                             wrap_list=True,",
            "                             filters=(safe_unordered_list,))",
            "",
            "    class Meta:",
            "        name = \"host_aggregates\"",
            "        verbose_name = _(\"Host Aggregates\")",
            "        table_actions = (AggregateFilterAction,",
            "                         CreateAggregateAction,",
            "                         DeleteAggregateAction)",
            "        row_actions = (UpdateAggregateAction,",
            "                       ManageHostsAction,",
            "                       DeleteAggregateAction)",
            "",
            "",
            "class AvailabilityZonesTable(tables.DataTable):",
            "    name = tables.Column('zoneName',",
            "                         verbose_name=_('Availability Zone Name'))",
            "    hosts = tables.Column(get_zone_hosts,",
            "                          verbose_name=_('Hosts'),",
            "                          wrap_list=True,",
            "                          filters=(safe_unordered_list,))",
            "    available = tables.Column(get_available,",
            "                              verbose_name=_('Available'),",
            "                              status=True,",
            "                              filters=(filters.yesno, filters.capfirst))",
            "",
            "    def get_object_id(self, zone):",
            "        return zone.zoneName",
            "",
            "    class Meta:",
            "        name = \"availability_zones\"",
            "        verbose_name = _(\"Availability Zones\")",
            "        table_actions = (AggregateFilterAction,)",
            "        multi_select = False"
        ],
        "action": [
            "0",
            "0",
            "0",
            "-1",
            "-1",
            "-1",
            "-1",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "0",
            "0",
            "0",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "0",
            "0",
            "0"
        ],
        "dele_reviseLocation": {
            "103": [
                "HostAggregatesTable"
            ],
            "107": [
                "HostAggregatesTable"
            ],
            "126": [
                "AvailabilityZonesTable"
            ]
        },
        "addLocation": [
            "bikeshed.cli.handleRefs"
        ]
    }
}