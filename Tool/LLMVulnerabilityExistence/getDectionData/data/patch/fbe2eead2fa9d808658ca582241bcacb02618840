{
    "django/contrib/sessions/backends/cache.py": {
        "Patch": {
            "0": {
                "beforePatchRowNumber": 1,
                "afterPatchRowNumber": 1,
                "PatchRowcode": " from django.contrib.sessions.backends.base import SessionBase, CreateError"
            },
            "1": {
                "beforePatchRowNumber": 2,
                "afterPatchRowNumber": 2,
                "PatchRowcode": " from django.core.cache import cache"
            },
            "2": {
                "beforePatchRowNumber": 3,
                "afterPatchRowNumber": 3,
                "PatchRowcode": " "
            },
            "3": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 4,
                "PatchRowcode": "+KEY_PREFIX = \"django.contrib.sessions.cache\""
            },
            "4": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 5,
                "PatchRowcode": "+"
            },
            "5": {
                "beforePatchRowNumber": 4,
                "afterPatchRowNumber": 6,
                "PatchRowcode": " class SessionStore(SessionBase):"
            },
            "6": {
                "beforePatchRowNumber": 5,
                "afterPatchRowNumber": 7,
                "PatchRowcode": "     \"\"\""
            },
            "7": {
                "beforePatchRowNumber": 6,
                "afterPatchRowNumber": 8,
                "PatchRowcode": "     A cache-based session store."
            },
            "8": {
                "beforePatchRowNumber": 10,
                "afterPatchRowNumber": 12,
                "PatchRowcode": "         super(SessionStore, self).__init__(session_key)"
            },
            "9": {
                "beforePatchRowNumber": 11,
                "afterPatchRowNumber": 13,
                "PatchRowcode": " "
            },
            "10": {
                "beforePatchRowNumber": 12,
                "afterPatchRowNumber": 14,
                "PatchRowcode": "     def load(self):"
            },
            "11": {
                "beforePatchRowNumber": 13,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-        session_data = self._cache.get(self.session_key)"
            },
            "12": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 15,
                "PatchRowcode": "+        session_data = self._cache.get(KEY_PREFIX + self.session_key)"
            },
            "13": {
                "beforePatchRowNumber": 14,
                "afterPatchRowNumber": 16,
                "PatchRowcode": "         if session_data is not None:"
            },
            "14": {
                "beforePatchRowNumber": 15,
                "afterPatchRowNumber": 17,
                "PatchRowcode": "             return session_data"
            },
            "15": {
                "beforePatchRowNumber": 16,
                "afterPatchRowNumber": 18,
                "PatchRowcode": "         self.create()"
            },
            "16": {
                "beforePatchRowNumber": 37,
                "afterPatchRowNumber": 39,
                "PatchRowcode": "             func = self._cache.add"
            },
            "17": {
                "beforePatchRowNumber": 38,
                "afterPatchRowNumber": 40,
                "PatchRowcode": "         else:"
            },
            "18": {
                "beforePatchRowNumber": 39,
                "afterPatchRowNumber": 41,
                "PatchRowcode": "             func = self._cache.set"
            },
            "19": {
                "beforePatchRowNumber": 40,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-        result = func(self.session_key, self._get_session(no_load=must_create),"
            },
            "20": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 42,
                "PatchRowcode": "+        result = func(KEY_PREFIX + self.session_key, self._get_session(no_load=must_create),"
            },
            "21": {
                "beforePatchRowNumber": 41,
                "afterPatchRowNumber": 43,
                "PatchRowcode": "                 self.get_expiry_age())"
            },
            "22": {
                "beforePatchRowNumber": 42,
                "afterPatchRowNumber": 44,
                "PatchRowcode": "         if must_create and not result:"
            },
            "23": {
                "beforePatchRowNumber": 43,
                "afterPatchRowNumber": 45,
                "PatchRowcode": "             raise CreateError"
            },
            "24": {
                "beforePatchRowNumber": 44,
                "afterPatchRowNumber": 46,
                "PatchRowcode": " "
            },
            "25": {
                "beforePatchRowNumber": 45,
                "afterPatchRowNumber": 47,
                "PatchRowcode": "     def exists(self, session_key):"
            },
            "26": {
                "beforePatchRowNumber": 46,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-        if self._cache.has_key(session_key):"
            },
            "27": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 48,
                "PatchRowcode": "+        if self._cache.has_key(KEY_PREFIX + session_key):"
            },
            "28": {
                "beforePatchRowNumber": 47,
                "afterPatchRowNumber": 49,
                "PatchRowcode": "             return True"
            },
            "29": {
                "beforePatchRowNumber": 48,
                "afterPatchRowNumber": 50,
                "PatchRowcode": "         return False"
            },
            "30": {
                "beforePatchRowNumber": 49,
                "afterPatchRowNumber": 51,
                "PatchRowcode": " "
            },
            "31": {
                "beforePatchRowNumber": 52,
                "afterPatchRowNumber": 54,
                "PatchRowcode": "             if self._session_key is None:"
            },
            "32": {
                "beforePatchRowNumber": 53,
                "afterPatchRowNumber": 55,
                "PatchRowcode": "                 return"
            },
            "33": {
                "beforePatchRowNumber": 54,
                "afterPatchRowNumber": 56,
                "PatchRowcode": "             session_key = self._session_key"
            },
            "34": {
                "beforePatchRowNumber": 55,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-        self._cache.delete(session_key)"
            },
            "35": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 57,
                "PatchRowcode": "+        self._cache.delete(KEY_PREFIX + session_key)"
            },
            "36": {
                "beforePatchRowNumber": 56,
                "afterPatchRowNumber": 58,
                "PatchRowcode": " "
            }
        },
        "frontPatchFile": [
            "from django.contrib.sessions.backends.base import SessionBase, CreateError",
            "from django.core.cache import cache",
            "",
            "class SessionStore(SessionBase):",
            "    \"\"\"",
            "    A cache-based session store.",
            "    \"\"\"",
            "    def __init__(self, session_key=None):",
            "        self._cache = cache",
            "        super(SessionStore, self).__init__(session_key)",
            "",
            "    def load(self):",
            "        session_data = self._cache.get(self.session_key)",
            "        if session_data is not None:",
            "            return session_data",
            "        self.create()",
            "        return {}",
            "",
            "    def create(self):",
            "        # Because a cache can fail silently (e.g. memcache), we don't know if",
            "        # we are failing to create a new session because of a key collision or",
            "        # because the cache is missing. So we try for a (large) number of times",
            "        # and then raise an exception. That's the risk you shoulder if using",
            "        # cache backing.",
            "        for i in xrange(10000):",
            "            self.session_key = self._get_new_session_key()",
            "            try:",
            "                self.save(must_create=True)",
            "            except CreateError:",
            "                continue",
            "            self.modified = True",
            "            return",
            "        raise RuntimeError(\"Unable to create a new session key.\")",
            "",
            "    def save(self, must_create=False):",
            "        if must_create:",
            "            func = self._cache.add",
            "        else:",
            "            func = self._cache.set",
            "        result = func(self.session_key, self._get_session(no_load=must_create),",
            "                self.get_expiry_age())",
            "        if must_create and not result:",
            "            raise CreateError",
            "",
            "    def exists(self, session_key):",
            "        if self._cache.has_key(session_key):",
            "            return True",
            "        return False",
            "",
            "    def delete(self, session_key=None):",
            "        if session_key is None:",
            "            if self._session_key is None:",
            "                return",
            "            session_key = self._session_key",
            "        self._cache.delete(session_key)"
        ],
        "afterPatchFile": [
            "from django.contrib.sessions.backends.base import SessionBase, CreateError",
            "from django.core.cache import cache",
            "",
            "KEY_PREFIX = \"django.contrib.sessions.cache\"",
            "",
            "class SessionStore(SessionBase):",
            "    \"\"\"",
            "    A cache-based session store.",
            "    \"\"\"",
            "    def __init__(self, session_key=None):",
            "        self._cache = cache",
            "        super(SessionStore, self).__init__(session_key)",
            "",
            "    def load(self):",
            "        session_data = self._cache.get(KEY_PREFIX + self.session_key)",
            "        if session_data is not None:",
            "            return session_data",
            "        self.create()",
            "        return {}",
            "",
            "    def create(self):",
            "        # Because a cache can fail silently (e.g. memcache), we don't know if",
            "        # we are failing to create a new session because of a key collision or",
            "        # because the cache is missing. So we try for a (large) number of times",
            "        # and then raise an exception. That's the risk you shoulder if using",
            "        # cache backing.",
            "        for i in xrange(10000):",
            "            self.session_key = self._get_new_session_key()",
            "            try:",
            "                self.save(must_create=True)",
            "            except CreateError:",
            "                continue",
            "            self.modified = True",
            "            return",
            "        raise RuntimeError(\"Unable to create a new session key.\")",
            "",
            "    def save(self, must_create=False):",
            "        if must_create:",
            "            func = self._cache.add",
            "        else:",
            "            func = self._cache.set",
            "        result = func(KEY_PREFIX + self.session_key, self._get_session(no_load=must_create),",
            "                self.get_expiry_age())",
            "        if must_create and not result:",
            "            raise CreateError",
            "",
            "    def exists(self, session_key):",
            "        if self._cache.has_key(KEY_PREFIX + session_key):",
            "            return True",
            "        return False",
            "",
            "    def delete(self, session_key=None):",
            "        if session_key is None:",
            "            if self._session_key is None:",
            "                return",
            "            session_key = self._session_key",
            "        self._cache.delete(KEY_PREFIX + session_key)"
        ],
        "action": [
            "0",
            "0",
            "0",
            "-1",
            "-1",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "0"
        ],
        "dele_reviseLocation": {
            "13": [
                "SessionStore",
                "load"
            ],
            "40": [
                "SessionStore",
                "save"
            ],
            "46": [
                "SessionStore",
                "exists"
            ],
            "55": [
                "SessionStore",
                "delete"
            ]
        },
        "addLocation": []
    },
    "django/contrib/sessions/backends/cached_db.py": {
        "Patch": {
            "0": {
                "beforePatchRowNumber": 6,
                "afterPatchRowNumber": 6,
                "PatchRowcode": " from django.contrib.sessions.backends.db import SessionStore as DBStore"
            },
            "1": {
                "beforePatchRowNumber": 7,
                "afterPatchRowNumber": 7,
                "PatchRowcode": " from django.core.cache import cache"
            },
            "2": {
                "beforePatchRowNumber": 8,
                "afterPatchRowNumber": 8,
                "PatchRowcode": " "
            },
            "3": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 9,
                "PatchRowcode": "+KEY_PREFIX = \"django.contrib.sessions.cached_db\""
            },
            "4": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 10,
                "PatchRowcode": "+"
            },
            "5": {
                "beforePatchRowNumber": 9,
                "afterPatchRowNumber": 11,
                "PatchRowcode": " class SessionStore(DBStore):"
            },
            "6": {
                "beforePatchRowNumber": 10,
                "afterPatchRowNumber": 12,
                "PatchRowcode": "     \"\"\""
            },
            "7": {
                "beforePatchRowNumber": 11,
                "afterPatchRowNumber": 13,
                "PatchRowcode": "     Implements cached, database backed sessions."
            },
            "8": {
                "beforePatchRowNumber": 15,
                "afterPatchRowNumber": 17,
                "PatchRowcode": "         super(SessionStore, self).__init__(session_key)"
            },
            "9": {
                "beforePatchRowNumber": 16,
                "afterPatchRowNumber": 18,
                "PatchRowcode": " "
            },
            "10": {
                "beforePatchRowNumber": 17,
                "afterPatchRowNumber": 19,
                "PatchRowcode": "     def load(self):"
            },
            "11": {
                "beforePatchRowNumber": 18,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-        data = cache.get(self.session_key, None)"
            },
            "12": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 20,
                "PatchRowcode": "+        data = cache.get(KEY_PREFIX + self.session_key, None)"
            },
            "13": {
                "beforePatchRowNumber": 19,
                "afterPatchRowNumber": 21,
                "PatchRowcode": "         if data is None:"
            },
            "14": {
                "beforePatchRowNumber": 20,
                "afterPatchRowNumber": 22,
                "PatchRowcode": "             data = super(SessionStore, self).load()"
            },
            "15": {
                "beforePatchRowNumber": 21,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            cache.set(self.session_key, data, settings.SESSION_COOKIE_AGE)"
            },
            "16": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 23,
                "PatchRowcode": "+            cache.set(KEY_PREFIX + self.session_key, data, "
            },
            "17": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 24,
                "PatchRowcode": "+                      settings.SESSION_COOKIE_AGE)"
            },
            "18": {
                "beforePatchRowNumber": 22,
                "afterPatchRowNumber": 25,
                "PatchRowcode": "         return data"
            },
            "19": {
                "beforePatchRowNumber": 23,
                "afterPatchRowNumber": 26,
                "PatchRowcode": " "
            },
            "20": {
                "beforePatchRowNumber": 24,
                "afterPatchRowNumber": 27,
                "PatchRowcode": "     def exists(self, session_key):"
            },
            "21": {
                "beforePatchRowNumber": 25,
                "afterPatchRowNumber": 28,
                "PatchRowcode": "         return super(SessionStore, self).exists(session_key)"
            },
            "22": {
                "beforePatchRowNumber": 26,
                "afterPatchRowNumber": 29,
                "PatchRowcode": " "
            },
            "23": {
                "beforePatchRowNumber": 27,
                "afterPatchRowNumber": 30,
                "PatchRowcode": "     def save(self, must_create=False):"
            },
            "24": {
                "beforePatchRowNumber": 28,
                "afterPatchRowNumber": 31,
                "PatchRowcode": "         super(SessionStore, self).save(must_create)"
            },
            "25": {
                "beforePatchRowNumber": 29,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-        cache.set(self.session_key, self._session, settings.SESSION_COOKIE_AGE)"
            },
            "26": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 32,
                "PatchRowcode": "+        cache.set(KEY_PREFIX + self.session_key, self._session, "
            },
            "27": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 33,
                "PatchRowcode": "+                  settings.SESSION_COOKIE_AGE)"
            },
            "28": {
                "beforePatchRowNumber": 30,
                "afterPatchRowNumber": 34,
                "PatchRowcode": " "
            },
            "29": {
                "beforePatchRowNumber": 31,
                "afterPatchRowNumber": 35,
                "PatchRowcode": "     def delete(self, session_key=None):"
            },
            "30": {
                "beforePatchRowNumber": 32,
                "afterPatchRowNumber": 36,
                "PatchRowcode": "         super(SessionStore, self).delete(session_key)"
            },
            "31": {
                "beforePatchRowNumber": 33,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-        cache.delete(session_key or self.session_key)"
            },
            "32": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 37,
                "PatchRowcode": "+        cache.delete(KEY_PREFIX + (session_key or self.session_key))"
            },
            "33": {
                "beforePatchRowNumber": 34,
                "afterPatchRowNumber": 38,
                "PatchRowcode": " "
            },
            "34": {
                "beforePatchRowNumber": 35,
                "afterPatchRowNumber": 39,
                "PatchRowcode": "     def flush(self):"
            },
            "35": {
                "beforePatchRowNumber": 36,
                "afterPatchRowNumber": 40,
                "PatchRowcode": "         \"\"\""
            },
            "36": {
                "beforePatchRowNumber": 39,
                "afterPatchRowNumber": 43,
                "PatchRowcode": "         \"\"\""
            },
            "37": {
                "beforePatchRowNumber": 40,
                "afterPatchRowNumber": 44,
                "PatchRowcode": "         self.clear()"
            },
            "38": {
                "beforePatchRowNumber": 41,
                "afterPatchRowNumber": 45,
                "PatchRowcode": "         self.delete(self.session_key)"
            },
            "39": {
                "beforePatchRowNumber": 42,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-        self.create()"
            },
            "40": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 46,
                "PatchRowcode": "+        self.create()"
            }
        },
        "frontPatchFile": [
            "\"\"\"",
            "Cached, database-backed sessions.",
            "\"\"\"",
            "",
            "from django.conf import settings",
            "from django.contrib.sessions.backends.db import SessionStore as DBStore",
            "from django.core.cache import cache",
            "",
            "class SessionStore(DBStore):",
            "    \"\"\"",
            "    Implements cached, database backed sessions.",
            "    \"\"\"",
            "",
            "    def __init__(self, session_key=None):",
            "        super(SessionStore, self).__init__(session_key)",
            "",
            "    def load(self):",
            "        data = cache.get(self.session_key, None)",
            "        if data is None:",
            "            data = super(SessionStore, self).load()",
            "            cache.set(self.session_key, data, settings.SESSION_COOKIE_AGE)",
            "        return data",
            "",
            "    def exists(self, session_key):",
            "        return super(SessionStore, self).exists(session_key)",
            "",
            "    def save(self, must_create=False):",
            "        super(SessionStore, self).save(must_create)",
            "        cache.set(self.session_key, self._session, settings.SESSION_COOKIE_AGE)",
            "",
            "    def delete(self, session_key=None):",
            "        super(SessionStore, self).delete(session_key)",
            "        cache.delete(session_key or self.session_key)",
            "",
            "    def flush(self):",
            "        \"\"\"",
            "        Removes the current session data from the database and regenerates the",
            "        key.",
            "        \"\"\"",
            "        self.clear()",
            "        self.delete(self.session_key)",
            "        self.create()"
        ],
        "afterPatchFile": [
            "\"\"\"",
            "Cached, database-backed sessions.",
            "\"\"\"",
            "",
            "from django.conf import settings",
            "from django.contrib.sessions.backends.db import SessionStore as DBStore",
            "from django.core.cache import cache",
            "",
            "KEY_PREFIX = \"django.contrib.sessions.cached_db\"",
            "",
            "class SessionStore(DBStore):",
            "    \"\"\"",
            "    Implements cached, database backed sessions.",
            "    \"\"\"",
            "",
            "    def __init__(self, session_key=None):",
            "        super(SessionStore, self).__init__(session_key)",
            "",
            "    def load(self):",
            "        data = cache.get(KEY_PREFIX + self.session_key, None)",
            "        if data is None:",
            "            data = super(SessionStore, self).load()",
            "            cache.set(KEY_PREFIX + self.session_key, data, ",
            "                      settings.SESSION_COOKIE_AGE)",
            "        return data",
            "",
            "    def exists(self, session_key):",
            "        return super(SessionStore, self).exists(session_key)",
            "",
            "    def save(self, must_create=False):",
            "        super(SessionStore, self).save(must_create)",
            "        cache.set(KEY_PREFIX + self.session_key, self._session, ",
            "                  settings.SESSION_COOKIE_AGE)",
            "",
            "    def delete(self, session_key=None):",
            "        super(SessionStore, self).delete(session_key)",
            "        cache.delete(KEY_PREFIX + (session_key or self.session_key))",
            "",
            "    def flush(self):",
            "        \"\"\"",
            "        Removes the current session data from the database and regenerates the",
            "        key.",
            "        \"\"\"",
            "        self.clear()",
            "        self.delete(self.session_key)",
            "        self.create()"
        ],
        "action": [
            "0",
            "0",
            "0",
            "-1",
            "-1",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "0",
            "0",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2"
        ],
        "dele_reviseLocation": {
            "18": [
                "SessionStore",
                "load"
            ],
            "21": [
                "SessionStore",
                "load"
            ],
            "29": [
                "SessionStore",
                "save"
            ],
            "33": [
                "SessionStore",
                "delete"
            ],
            "42": [
                "SessionStore",
                "flush"
            ]
        },
        "addLocation": []
    }
}