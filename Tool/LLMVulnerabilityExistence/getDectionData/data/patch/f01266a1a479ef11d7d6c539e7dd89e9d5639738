{
    "aim/web/api/views.py": {
        "Patch": {
            "0": {
                "beforePatchRowNumber": 1,
                "afterPatchRowNumber": 1,
                "PatchRowcode": " import os"
            },
            "1": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 2,
                "PatchRowcode": "+from pathlib import Path"
            },
            "2": {
                "beforePatchRowNumber": 2,
                "afterPatchRowNumber": 3,
                "PatchRowcode": " "
            },
            "3": {
                "beforePatchRowNumber": 3,
                "afterPatchRowNumber": 4,
                "PatchRowcode": " from aim.web.api.utils import APIRouter  # wrapper for fastapi.APIRouter"
            },
            "4": {
                "beforePatchRowNumber": 4,
                "afterPatchRowNumber": 5,
                "PatchRowcode": " from fastapi.responses import FileResponse"
            },
            "5": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 6,
                "PatchRowcode": "+from fastapi import HTTPException"
            },
            "6": {
                "beforePatchRowNumber": 5,
                "afterPatchRowNumber": 7,
                "PatchRowcode": " "
            },
            "7": {
                "beforePatchRowNumber": 6,
                "afterPatchRowNumber": 8,
                "PatchRowcode": " statics_router = APIRouter()"
            },
            "8": {
                "beforePatchRowNumber": 7,
                "afterPatchRowNumber": 9,
                "PatchRowcode": " "
            },
            "9": {
                "beforePatchRowNumber": 8,
                "afterPatchRowNumber": 10,
                "PatchRowcode": " "
            },
            "10": {
                "beforePatchRowNumber": 9,
                "afterPatchRowNumber": 11,
                "PatchRowcode": " @statics_router.get('/static-files/{path:path}/')"
            },
            "11": {
                "beforePatchRowNumber": 10,
                "afterPatchRowNumber": 12,
                "PatchRowcode": " async def serve_static_files(path):"
            },
            "12": {
                "beforePatchRowNumber": 11,
                "afterPatchRowNumber": 13,
                "PatchRowcode": "     from aim import web"
            },
            "13": {
                "beforePatchRowNumber": 12,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-    static_file_name = os.path.join(os.path.dirname(web.__file__), 'ui', 'build', path)"
            },
            "14": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 14,
                "PatchRowcode": "+    static_file_root = os.path.join(os.path.dirname(web.__file__), 'ui', 'build')"
            },
            "15": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 15,
                "PatchRowcode": "+    static_file_name = os.path.join(static_file_root, path)"
            },
            "16": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 16,
                "PatchRowcode": "+"
            },
            "17": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 17,
                "PatchRowcode": "+    # check if path is leading inside ui/build directory"
            },
            "18": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 18,
                "PatchRowcode": "+    if not Path(static_file_root) in Path(static_file_name).resolve().parents:"
            },
            "19": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 19,
                "PatchRowcode": "+        raise HTTPException(404)"
            },
            "20": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 20,
                "PatchRowcode": "+"
            },
            "21": {
                "beforePatchRowNumber": 13,
                "afterPatchRowNumber": 21,
                "PatchRowcode": "     compressed_file_name = '{}.gz'.format(static_file_name)"
            },
            "22": {
                "beforePatchRowNumber": 14,
                "afterPatchRowNumber": 22,
                "PatchRowcode": "     if os.path.exists(compressed_file_name):"
            },
            "23": {
                "beforePatchRowNumber": 15,
                "afterPatchRowNumber": 23,
                "PatchRowcode": "         return FileResponse(compressed_file_name, headers={'Content-Encoding': 'gzip'})"
            }
        },
        "frontPatchFile": [
            "import os",
            "",
            "from aim.web.api.utils import APIRouter  # wrapper for fastapi.APIRouter",
            "from fastapi.responses import FileResponse",
            "",
            "statics_router = APIRouter()",
            "",
            "",
            "@statics_router.get('/static-files/{path:path}/')",
            "async def serve_static_files(path):",
            "    from aim import web",
            "    static_file_name = os.path.join(os.path.dirname(web.__file__), 'ui', 'build', path)",
            "    compressed_file_name = '{}.gz'.format(static_file_name)",
            "    if os.path.exists(compressed_file_name):",
            "        return FileResponse(compressed_file_name, headers={'Content-Encoding': 'gzip'})",
            "    return FileResponse(static_file_name)",
            "",
            "",
            "# do not change the placement of this method",
            "# as it also serves as a fallback for wrong url routes",
            "@statics_router.get('/{path:path}/')",
            "async def serve_index_html():",
            "    from aim import web",
            "    static_file_name = os.path.join(os.path.dirname(web.__file__), 'ui', 'build', 'index.html')",
            "    compressed_file_name = '{}.gz'.format(static_file_name)",
            "    if os.path.exists(compressed_file_name):",
            "        return FileResponse(compressed_file_name, headers={'Content-Encoding': 'gzip'})",
            "    return FileResponse(static_file_name)"
        ],
        "afterPatchFile": [
            "import os",
            "from pathlib import Path",
            "",
            "from aim.web.api.utils import APIRouter  # wrapper for fastapi.APIRouter",
            "from fastapi.responses import FileResponse",
            "from fastapi import HTTPException",
            "",
            "statics_router = APIRouter()",
            "",
            "",
            "@statics_router.get('/static-files/{path:path}/')",
            "async def serve_static_files(path):",
            "    from aim import web",
            "    static_file_root = os.path.join(os.path.dirname(web.__file__), 'ui', 'build')",
            "    static_file_name = os.path.join(static_file_root, path)",
            "",
            "    # check if path is leading inside ui/build directory",
            "    if not Path(static_file_root) in Path(static_file_name).resolve().parents:",
            "        raise HTTPException(404)",
            "",
            "    compressed_file_name = '{}.gz'.format(static_file_name)",
            "    if os.path.exists(compressed_file_name):",
            "        return FileResponse(compressed_file_name, headers={'Content-Encoding': 'gzip'})",
            "    return FileResponse(static_file_name)",
            "",
            "",
            "# do not change the placement of this method",
            "# as it also serves as a fallback for wrong url routes",
            "@statics_router.get('/{path:path}/')",
            "async def serve_index_html():",
            "    from aim import web",
            "    static_file_name = os.path.join(os.path.dirname(web.__file__), 'ui', 'build', 'index.html')",
            "    compressed_file_name = '{}.gz'.format(static_file_name)",
            "    if os.path.exists(compressed_file_name):",
            "        return FileResponse(compressed_file_name, headers={'Content-Encoding': 'gzip'})",
            "    return FileResponse(static_file_name)"
        ],
        "action": [
            "0",
            "-1",
            "0",
            "0",
            "0",
            "-1",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0"
        ],
        "dele_reviseLocation": {
            "12": [
                "static_file_name"
            ]
        },
        "addLocation": []
    }
}