{
    "salt/modules/chef.py": {
        "Patch": {
            "0": {
                "beforePatchRowNumber": 6,
                "afterPatchRowNumber": 6,
                "PatchRowcode": " # Import Python libs"
            },
            "1": {
                "beforePatchRowNumber": 7,
                "afterPatchRowNumber": 7,
                "PatchRowcode": " import logging"
            },
            "2": {
                "beforePatchRowNumber": 8,
                "afterPatchRowNumber": 8,
                "PatchRowcode": " import os"
            },
            "3": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 9,
                "PatchRowcode": "+import tempfile"
            },
            "4": {
                "beforePatchRowNumber": 9,
                "afterPatchRowNumber": 10,
                "PatchRowcode": " "
            },
            "5": {
                "beforePatchRowNumber": 10,
                "afterPatchRowNumber": 11,
                "PatchRowcode": " # Import Salt libs"
            },
            "6": {
                "beforePatchRowNumber": 11,
                "afterPatchRowNumber": 12,
                "PatchRowcode": " import salt.utils"
            },
            "7": {
                "beforePatchRowNumber": 24,
                "afterPatchRowNumber": 25,
                "PatchRowcode": " "
            },
            "8": {
                "beforePatchRowNumber": 25,
                "afterPatchRowNumber": 26,
                "PatchRowcode": " "
            },
            "9": {
                "beforePatchRowNumber": 26,
                "afterPatchRowNumber": 27,
                "PatchRowcode": " def _default_logfile(exe_name):"
            },
            "10": {
                "beforePatchRowNumber": 27,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-"
            },
            "11": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 28,
                "PatchRowcode": "+    '''"
            },
            "12": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 29,
                "PatchRowcode": "+    Retrieve the logfile name"
            },
            "13": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 30,
                "PatchRowcode": "+    '''"
            },
            "14": {
                "beforePatchRowNumber": 28,
                "afterPatchRowNumber": 31,
                "PatchRowcode": "     if salt.utils.is_windows():"
            },
            "15": {
                "beforePatchRowNumber": 29,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-        logfile = salt.utils.path_join("
            },
            "16": {
                "beforePatchRowNumber": 30,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            os.environ['TMP'],"
            },
            "17": {
                "beforePatchRowNumber": 31,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            '{0}.log'.format(exe_name)"
            },
            "18": {
                "beforePatchRowNumber": 32,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-        )"
            },
            "19": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 32,
                "PatchRowcode": "+        logfile_tmp = tempfile.NamedTemporaryFile(dir=os.environ['TMP'],"
            },
            "20": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 33,
                "PatchRowcode": "+                                                  prefix=exe_name,"
            },
            "21": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 34,
                "PatchRowcode": "+                                                  suffix='.log',"
            },
            "22": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 35,
                "PatchRowcode": "+                                                  delete=False)"
            },
            "23": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 36,
                "PatchRowcode": "+        logfile = logfile_tmp.name"
            },
            "24": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 37,
                "PatchRowcode": "+        logfile_tmp.close()"
            },
            "25": {
                "beforePatchRowNumber": 33,
                "afterPatchRowNumber": 38,
                "PatchRowcode": "     else:"
            },
            "26": {
                "beforePatchRowNumber": 34,
                "afterPatchRowNumber": 39,
                "PatchRowcode": "         logfile = salt.utils.path_join("
            },
            "27": {
                "beforePatchRowNumber": 35,
                "afterPatchRowNumber": 40,
                "PatchRowcode": "             '/var/log',"
            }
        },
        "frontPatchFile": [
            "# -*- coding: utf-8 -*-",
            "'''",
            "Execute chef in server or solo mode",
            "'''",
            "",
            "# Import Python libs",
            "import logging",
            "import os",
            "",
            "# Import Salt libs",
            "import salt.utils",
            "import salt.utils.decorators as decorators",
            "",
            "log = logging.getLogger(__name__)",
            "",
            "",
            "def __virtual__():",
            "    '''",
            "    Only load if chef is installed",
            "    '''",
            "    if not salt.utils.which('chef-client'):",
            "        return False",
            "    return True",
            "",
            "",
            "def _default_logfile(exe_name):",
            "",
            "    if salt.utils.is_windows():",
            "        logfile = salt.utils.path_join(",
            "            os.environ['TMP'],",
            "            '{0}.log'.format(exe_name)",
            "        )",
            "    else:",
            "        logfile = salt.utils.path_join(",
            "            '/var/log',",
            "            '{0}.log'.format(exe_name)",
            "        )",
            "",
            "    return logfile",
            "",
            "",
            "@decorators.which('chef-client')",
            "def client(whyrun=False,",
            "           localmode=False,",
            "           logfile=_default_logfile('chef-client'),",
            "           **kwargs):",
            "    '''",
            "    Execute a chef client run and return a dict with the stderr, stdout,",
            "    return code, and pid.",
            "",
            "    CLI Example:",
            "",
            "    .. code-block:: bash",
            "",
            "        salt '*' chef.client server=https://localhost",
            "",
            "    server",
            "        The chef server URL",
            "",
            "    client_key",
            "        Set the client key file location",
            "",
            "    config",
            "        The configuration file to use",
            "",
            "    config-file-jail",
            "        Directory under which config files are allowed to be loaded",
            "        (no client.rb or knife.rb outside this path will be loaded).",
            "",
            "    environment",
            "        Set the Chef Environment on the node",
            "",
            "    group",
            "        Group to set privilege to",
            "",
            "    json-attributes",
            "        Load attributes from a JSON file or URL",
            "",
            "    localmode",
            "        Point chef-client at local repository if True",
            "",
            "    log_level",
            "        Set the log level (debug, info, warn, error, fatal)",
            "",
            "    logfile",
            "        Set the log file location",
            "",
            "    node-name",
            "        The node name for this client",
            "",
            "    override-runlist",
            "        Replace current run list with specified items for a single run",
            "",
            "    pid",
            "        Set the PID file location, defaults to /tmp/chef-client.pid",
            "",
            "    run-lock-timeout",
            "        Set maximum duration to wait for another client run to finish,",
            "        default is indefinitely.",
            "",
            "    runlist",
            "        Permanently replace current run list with specified items",
            "",
            "    user",
            "        User to set privilege to",
            "",
            "    validation_key",
            "        Set the validation key file location, used for registering new clients",
            "",
            "    whyrun",
            "        Enable whyrun mode when set to True",
            "",
            "    '''",
            "    args = ['chef-client',",
            "            '--no-color',",
            "            '--once',",
            "            '--logfile \"{0}\"'.format(logfile),",
            "            '--format doc']",
            "",
            "    if whyrun:",
            "        args.append('--why-run')",
            "",
            "    if localmode:",
            "        args.append('--local-mode')",
            "",
            "    return _exec_cmd(*args, **kwargs)",
            "",
            "",
            "@decorators.which('chef-solo')",
            "def solo(whyrun=False,",
            "         logfile=_default_logfile('chef-solo'),",
            "         **kwargs):",
            "    '''",
            "    Execute a chef solo run and return a dict with the stderr, stdout,",
            "    return code, and pid.",
            "",
            "    CLI Example:",
            "",
            "    .. code-block:: bash",
            "",
            "        salt '*' chef.solo override-runlist=test",
            "",
            "    config",
            "        The configuration file to use",
            "",
            "    environment",
            "        Set the Chef Environment on the node",
            "",
            "    group",
            "        Group to set privilege to",
            "",
            "    json-attributes",
            "        Load attributes from a JSON file or URL",
            "",
            "    log_level",
            "        Set the log level (debug, info, warn, error, fatal)",
            "",
            "    logfile",
            "        Set the log file location",
            "",
            "    node-name",
            "        The node name for this client",
            "",
            "    override-runlist",
            "        Replace current run list with specified items for a single run",
            "",
            "    recipe-url",
            "        Pull down a remote gzipped tarball of recipes and untar it to",
            "        the cookbook cache",
            "",
            "    run-lock-timeout",
            "        Set maximum duration to wait for another client run to finish,",
            "        default is indefinitely.",
            "",
            "    user",
            "        User to set privilege to",
            "",
            "    whyrun",
            "        Enable whyrun mode when set to True",
            "    '''",
            "    args = ['chef-solo',",
            "            '--no-color',",
            "            '--logfile \"{0}\"'.format(logfile),",
            "            '--format doc']",
            "",
            "    args = ['chef-solo', '--no-color', '--logfile {0}'.format(logfile)]",
            "",
            "    if whyrun:",
            "        args.append('--why-run')",
            "",
            "    return _exec_cmd(*args, **kwargs)",
            "",
            "",
            "def _exec_cmd(*args, **kwargs):",
            "",
            "    # Compile the command arguments",
            "    cmd_args = ' '.join(args)",
            "    cmd_kwargs = ''.join([",
            "         ' --{0} {1}'.format(k, v)",
            "         for k, v in kwargs.items() if not k.startswith('__')]",
            "    )",
            "    cmd_exec = '{0}{1}'.format(cmd_args, cmd_kwargs)",
            "    log.debug('Chef command: {0}'.format(cmd_exec))",
            "",
            "    return __salt__['cmd.run_all'](cmd_exec, python_shell=False)"
        ],
        "afterPatchFile": [
            "# -*- coding: utf-8 -*-",
            "'''",
            "Execute chef in server or solo mode",
            "'''",
            "",
            "# Import Python libs",
            "import logging",
            "import os",
            "import tempfile",
            "",
            "# Import Salt libs",
            "import salt.utils",
            "import salt.utils.decorators as decorators",
            "",
            "log = logging.getLogger(__name__)",
            "",
            "",
            "def __virtual__():",
            "    '''",
            "    Only load if chef is installed",
            "    '''",
            "    if not salt.utils.which('chef-client'):",
            "        return False",
            "    return True",
            "",
            "",
            "def _default_logfile(exe_name):",
            "    '''",
            "    Retrieve the logfile name",
            "    '''",
            "    if salt.utils.is_windows():",
            "        logfile_tmp = tempfile.NamedTemporaryFile(dir=os.environ['TMP'],",
            "                                                  prefix=exe_name,",
            "                                                  suffix='.log',",
            "                                                  delete=False)",
            "        logfile = logfile_tmp.name",
            "        logfile_tmp.close()",
            "    else:",
            "        logfile = salt.utils.path_join(",
            "            '/var/log',",
            "            '{0}.log'.format(exe_name)",
            "        )",
            "",
            "    return logfile",
            "",
            "",
            "@decorators.which('chef-client')",
            "def client(whyrun=False,",
            "           localmode=False,",
            "           logfile=_default_logfile('chef-client'),",
            "           **kwargs):",
            "    '''",
            "    Execute a chef client run and return a dict with the stderr, stdout,",
            "    return code, and pid.",
            "",
            "    CLI Example:",
            "",
            "    .. code-block:: bash",
            "",
            "        salt '*' chef.client server=https://localhost",
            "",
            "    server",
            "        The chef server URL",
            "",
            "    client_key",
            "        Set the client key file location",
            "",
            "    config",
            "        The configuration file to use",
            "",
            "    config-file-jail",
            "        Directory under which config files are allowed to be loaded",
            "        (no client.rb or knife.rb outside this path will be loaded).",
            "",
            "    environment",
            "        Set the Chef Environment on the node",
            "",
            "    group",
            "        Group to set privilege to",
            "",
            "    json-attributes",
            "        Load attributes from a JSON file or URL",
            "",
            "    localmode",
            "        Point chef-client at local repository if True",
            "",
            "    log_level",
            "        Set the log level (debug, info, warn, error, fatal)",
            "",
            "    logfile",
            "        Set the log file location",
            "",
            "    node-name",
            "        The node name for this client",
            "",
            "    override-runlist",
            "        Replace current run list with specified items for a single run",
            "",
            "    pid",
            "        Set the PID file location, defaults to /tmp/chef-client.pid",
            "",
            "    run-lock-timeout",
            "        Set maximum duration to wait for another client run to finish,",
            "        default is indefinitely.",
            "",
            "    runlist",
            "        Permanently replace current run list with specified items",
            "",
            "    user",
            "        User to set privilege to",
            "",
            "    validation_key",
            "        Set the validation key file location, used for registering new clients",
            "",
            "    whyrun",
            "        Enable whyrun mode when set to True",
            "",
            "    '''",
            "    args = ['chef-client',",
            "            '--no-color',",
            "            '--once',",
            "            '--logfile \"{0}\"'.format(logfile),",
            "            '--format doc']",
            "",
            "    if whyrun:",
            "        args.append('--why-run')",
            "",
            "    if localmode:",
            "        args.append('--local-mode')",
            "",
            "    return _exec_cmd(*args, **kwargs)",
            "",
            "",
            "@decorators.which('chef-solo')",
            "def solo(whyrun=False,",
            "         logfile=_default_logfile('chef-solo'),",
            "         **kwargs):",
            "    '''",
            "    Execute a chef solo run and return a dict with the stderr, stdout,",
            "    return code, and pid.",
            "",
            "    CLI Example:",
            "",
            "    .. code-block:: bash",
            "",
            "        salt '*' chef.solo override-runlist=test",
            "",
            "    config",
            "        The configuration file to use",
            "",
            "    environment",
            "        Set the Chef Environment on the node",
            "",
            "    group",
            "        Group to set privilege to",
            "",
            "    json-attributes",
            "        Load attributes from a JSON file or URL",
            "",
            "    log_level",
            "        Set the log level (debug, info, warn, error, fatal)",
            "",
            "    logfile",
            "        Set the log file location",
            "",
            "    node-name",
            "        The node name for this client",
            "",
            "    override-runlist",
            "        Replace current run list with specified items for a single run",
            "",
            "    recipe-url",
            "        Pull down a remote gzipped tarball of recipes and untar it to",
            "        the cookbook cache",
            "",
            "    run-lock-timeout",
            "        Set maximum duration to wait for another client run to finish,",
            "        default is indefinitely.",
            "",
            "    user",
            "        User to set privilege to",
            "",
            "    whyrun",
            "        Enable whyrun mode when set to True",
            "    '''",
            "    args = ['chef-solo',",
            "            '--no-color',",
            "            '--logfile \"{0}\"'.format(logfile),",
            "            '--format doc']",
            "",
            "    args = ['chef-solo', '--no-color', '--logfile {0}'.format(logfile)]",
            "",
            "    if whyrun:",
            "        args.append('--why-run')",
            "",
            "    return _exec_cmd(*args, **kwargs)",
            "",
            "",
            "def _exec_cmd(*args, **kwargs):",
            "",
            "    # Compile the command arguments",
            "    cmd_args = ' '.join(args)",
            "    cmd_kwargs = ''.join([",
            "         ' --{0} {1}'.format(k, v)",
            "         for k, v in kwargs.items() if not k.startswith('__')]",
            "    )",
            "    cmd_exec = '{0}{1}'.format(cmd_args, cmd_kwargs)",
            "    log.debug('Chef command: {0}'.format(cmd_exec))",
            "",
            "    return __salt__['cmd.run_all'](cmd_exec, python_shell=False)"
        ],
        "action": [
            "0",
            "0",
            "0",
            "-1",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "2",
            "2",
            "0",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0"
        ],
        "dele_reviseLocation": {
            "27": [
                "_default_logfile"
            ],
            "29": [
                "_default_logfile"
            ],
            "30": [
                "_default_logfile"
            ],
            "31": [
                "_default_logfile"
            ],
            "32": [
                "_default_logfile"
            ]
        },
        "addLocation": []
    }
}