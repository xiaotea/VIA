{
    "examples/main.py": {
        "Patch": {
            "0": {
                "beforePatchRowNumber": 1,
                "afterPatchRowNumber": 1,
                "PatchRowcode": " import os"
            },
            "1": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 2,
                "PatchRowcode": "+from contextlib import asynccontextmanager"
            },
            "2": {
                "beforePatchRowNumber": 2,
                "afterPatchRowNumber": 3,
                "PatchRowcode": " "
            },
            "3": {
                "beforePatchRowNumber": 3,
                "afterPatchRowNumber": 4,
                "PatchRowcode": " import redis.asyncio as redis"
            },
            "4": {
                "beforePatchRowNumber": 4,
                "afterPatchRowNumber": 5,
                "PatchRowcode": " import uvicorn"
            },
            "5": {
                "beforePatchRowNumber": 46,
                "afterPatchRowNumber": 47,
                "PatchRowcode": "         ],"
            },
            "6": {
                "beforePatchRowNumber": 47,
                "afterPatchRowNumber": 48,
                "PatchRowcode": "         redis=r,"
            },
            "7": {
                "beforePatchRowNumber": 48,
                "afterPatchRowNumber": 49,
                "PatchRowcode": "     )"
            },
            "8": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 50,
                "PatchRowcode": "+    yield"
            },
            "9": {
                "beforePatchRowNumber": 49,
                "afterPatchRowNumber": 51,
                "PatchRowcode": " "
            },
            "10": {
                "beforePatchRowNumber": 50,
                "afterPatchRowNumber": 52,
                "PatchRowcode": " "
            },
            "11": {
                "beforePatchRowNumber": 51,
                "afterPatchRowNumber": 53,
                "PatchRowcode": " def create_app():"
            },
            "12": {
                "beforePatchRowNumber": 60,
                "afterPatchRowNumber": 62,
                "PatchRowcode": "     async def index():"
            },
            "13": {
                "beforePatchRowNumber": 61,
                "afterPatchRowNumber": 63,
                "PatchRowcode": "         return RedirectResponse(url=\"/admin\")"
            },
            "14": {
                "beforePatchRowNumber": 62,
                "afterPatchRowNumber": 64,
                "PatchRowcode": " "
            },
            "15": {
                "beforePatchRowNumber": 63,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-    admin_app.add_exception_handler("
            },
            "16": {
                "beforePatchRowNumber": 64,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-        HTTP_500_INTERNAL_SERVER_ERROR, server_error_exception"
            },
            "17": {
                "beforePatchRowNumber": 65,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-    )"
            },
            "18": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 65,
                "PatchRowcode": "+    admin_app.add_exception_handler(HTTP_500_INTERNAL_SERVER_ERROR, server_error_exception)"
            },
            "19": {
                "beforePatchRowNumber": 66,
                "afterPatchRowNumber": 66,
                "PatchRowcode": "     admin_app.add_exception_handler(HTTP_404_NOT_FOUND, not_found_error_exception)"
            },
            "20": {
                "beforePatchRowNumber": 67,
                "afterPatchRowNumber": 67,
                "PatchRowcode": "     admin_app.add_exception_handler(HTTP_403_FORBIDDEN, forbidden_error_exception)"
            },
            "21": {
                "beforePatchRowNumber": 68,
                "afterPatchRowNumber": 68,
                "PatchRowcode": "     admin_app.add_exception_handler(HTTP_401_UNAUTHORIZED, unauthorized_error_exception)"
            }
        },
        "frontPatchFile": [
            "import os",
            "",
            "import redis.asyncio as redis",
            "import uvicorn",
            "from fastapi import FastAPI",
            "from starlette.middleware.cors import CORSMiddleware",
            "from starlette.responses import RedirectResponse",
            "from starlette.staticfiles import StaticFiles",
            "from starlette.status import (",
            "    HTTP_401_UNAUTHORIZED,",
            "    HTTP_403_FORBIDDEN,",
            "    HTTP_404_NOT_FOUND,",
            "    HTTP_500_INTERNAL_SERVER_ERROR,",
            ")",
            "from tortoise.contrib.fastapi import register_tortoise",
            "",
            "from examples import settings",
            "from examples.constants import BASE_DIR",
            "from examples.models import Admin",
            "from examples.providers import LoginProvider",
            "from fastapi_admin.app import app as admin_app",
            "from fastapi_admin.exceptions import (",
            "    forbidden_error_exception,",
            "    not_found_error_exception,",
            "    server_error_exception,",
            "    unauthorized_error_exception,",
            ")",
            "",
            "",
            "@asynccontextmanager",
            "async def lifespan(app: FastAPI):",
            "    r = redis.from_url(",
            "        settings.REDIS_URL,",
            "        decode_responses=True,",
            "        encoding=\"utf8\",",
            "    )",
            "    await admin_app.configure(",
            "        logo_url=\"https://preview.tabler.io/static/logo-white.svg\",",
            "        template_folders=[os.path.join(BASE_DIR, \"templates\")],",
            "        favicon_url=\"https://raw.githubusercontent.com/fastapi-admin/fastapi-admin/dev/images/favicon.png\",",
            "        providers=[",
            "            LoginProvider(",
            "                login_logo_url=\"https://preview.tabler.io/static/logo.svg\",",
            "                admin_model=Admin,",
            "            )",
            "        ],",
            "        redis=r,",
            "    )",
            "",
            "",
            "def create_app():",
            "    app = FastAPI(lifespan=lifespan)",
            "    app.mount(",
            "        \"/static\",",
            "        StaticFiles(directory=os.path.join(BASE_DIR, \"static\")),",
            "        name=\"static\",",
            "    )",
            "",
            "    @app.get(\"/\")",
            "    async def index():",
            "        return RedirectResponse(url=\"/admin\")",
            "",
            "    admin_app.add_exception_handler(",
            "        HTTP_500_INTERNAL_SERVER_ERROR, server_error_exception",
            "    )",
            "    admin_app.add_exception_handler(HTTP_404_NOT_FOUND, not_found_error_exception)",
            "    admin_app.add_exception_handler(HTTP_403_FORBIDDEN, forbidden_error_exception)",
            "    admin_app.add_exception_handler(HTTP_401_UNAUTHORIZED, unauthorized_error_exception)",
            "",
            "    app.mount(\"/admin\", admin_app)",
            "    app.add_middleware(",
            "        CORSMiddleware,",
            "        allow_origins=[\"*\"],",
            "        allow_credentials=True,",
            "        allow_methods=[\"*\"],",
            "        allow_headers=[\"*\"],",
            "        expose_headers=[\"*\"],",
            "    )",
            "    register_tortoise(",
            "        app,",
            "        config={",
            "            \"connections\": {\"default\": settings.DATABASE_URL},",
            "            \"apps\": {",
            "                \"models\": {",
            "                    \"models\": [\"examples.models\"],",
            "                    \"default_connection\": \"default\",",
            "                }",
            "            },",
            "        },",
            "        generate_schemas=True,",
            "    )",
            "    return app",
            "",
            "",
            "app_ = create_app()",
            "",
            "if __name__ == \"__main__\":",
            "    uvicorn.run(\"main:app_\", reload=True)"
        ],
        "afterPatchFile": [
            "import os",
            "from contextlib import asynccontextmanager",
            "",
            "import redis.asyncio as redis",
            "import uvicorn",
            "from fastapi import FastAPI",
            "from starlette.middleware.cors import CORSMiddleware",
            "from starlette.responses import RedirectResponse",
            "from starlette.staticfiles import StaticFiles",
            "from starlette.status import (",
            "    HTTP_401_UNAUTHORIZED,",
            "    HTTP_403_FORBIDDEN,",
            "    HTTP_404_NOT_FOUND,",
            "    HTTP_500_INTERNAL_SERVER_ERROR,",
            ")",
            "from tortoise.contrib.fastapi import register_tortoise",
            "",
            "from examples import settings",
            "from examples.constants import BASE_DIR",
            "from examples.models import Admin",
            "from examples.providers import LoginProvider",
            "from fastapi_admin.app import app as admin_app",
            "from fastapi_admin.exceptions import (",
            "    forbidden_error_exception,",
            "    not_found_error_exception,",
            "    server_error_exception,",
            "    unauthorized_error_exception,",
            ")",
            "",
            "",
            "@asynccontextmanager",
            "async def lifespan(app: FastAPI):",
            "    r = redis.from_url(",
            "        settings.REDIS_URL,",
            "        decode_responses=True,",
            "        encoding=\"utf8\",",
            "    )",
            "    await admin_app.configure(",
            "        logo_url=\"https://preview.tabler.io/static/logo-white.svg\",",
            "        template_folders=[os.path.join(BASE_DIR, \"templates\")],",
            "        favicon_url=\"https://raw.githubusercontent.com/fastapi-admin/fastapi-admin/dev/images/favicon.png\",",
            "        providers=[",
            "            LoginProvider(",
            "                login_logo_url=\"https://preview.tabler.io/static/logo.svg\",",
            "                admin_model=Admin,",
            "            )",
            "        ],",
            "        redis=r,",
            "    )",
            "    yield",
            "",
            "",
            "def create_app():",
            "    app = FastAPI(lifespan=lifespan)",
            "    app.mount(",
            "        \"/static\",",
            "        StaticFiles(directory=os.path.join(BASE_DIR, \"static\")),",
            "        name=\"static\",",
            "    )",
            "",
            "    @app.get(\"/\")",
            "    async def index():",
            "        return RedirectResponse(url=\"/admin\")",
            "",
            "    admin_app.add_exception_handler(HTTP_500_INTERNAL_SERVER_ERROR, server_error_exception)",
            "    admin_app.add_exception_handler(HTTP_404_NOT_FOUND, not_found_error_exception)",
            "    admin_app.add_exception_handler(HTTP_403_FORBIDDEN, forbidden_error_exception)",
            "    admin_app.add_exception_handler(HTTP_401_UNAUTHORIZED, unauthorized_error_exception)",
            "",
            "    app.mount(\"/admin\", admin_app)",
            "    app.add_middleware(",
            "        CORSMiddleware,",
            "        allow_origins=[\"*\"],",
            "        allow_credentials=True,",
            "        allow_methods=[\"*\"],",
            "        allow_headers=[\"*\"],",
            "        expose_headers=[\"*\"],",
            "    )",
            "    register_tortoise(",
            "        app,",
            "        config={",
            "            \"connections\": {\"default\": settings.DATABASE_URL},",
            "            \"apps\": {",
            "                \"models\": {",
            "                    \"models\": [\"examples.models\"],",
            "                    \"default_connection\": \"default\",",
            "                }",
            "            },",
            "        },",
            "        generate_schemas=True,",
            "    )",
            "    return app",
            "",
            "",
            "app_ = create_app()",
            "",
            "if __name__ == \"__main__\":",
            "    uvicorn.run(\"main:app_\", reload=True)"
        ],
        "action": [
            "0",
            "-1",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "-1",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0"
        ],
        "dele_reviseLocation": {
            "63": [
                "create_app"
            ],
            "64": [
                "create_app"
            ],
            "65": [
                "create_app"
            ]
        },
        "addLocation": []
    },
    "fastapi_admin/providers/login.py": {
        "Patch": {
            "0": {
                "beforePatchRowNumber": 119,
                "afterPatchRowNumber": 119,
                "PatchRowcode": "         request: Request,"
            },
            "1": {
                "beforePatchRowNumber": 120,
                "afterPatchRowNumber": 120,
                "PatchRowcode": "         call_next: RequestResponseEndpoint,"
            },
            "2": {
                "beforePatchRowNumber": 121,
                "afterPatchRowNumber": 121,
                "PatchRowcode": "     ):"
            },
            "3": {
                "beforePatchRowNumber": 122,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-        redis = request.app.redis  # type:Redis"
            },
            "4": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 122,
                "PatchRowcode": "+        redis = request.app.redis  # type:ignore"
            },
            "5": {
                "beforePatchRowNumber": 123,
                "afterPatchRowNumber": 123,
                "PatchRowcode": "         token = request.cookies.get(self.access_token)"
            },
            "6": {
                "beforePatchRowNumber": 124,
                "afterPatchRowNumber": 124,
                "PatchRowcode": "         path = request.scope[\"path\"]"
            },
            "7": {
                "beforePatchRowNumber": 125,
                "afterPatchRowNumber": 125,
                "PatchRowcode": "         admin = None"
            }
        },
        "frontPatchFile": [
            "import typing",
            "import uuid",
            "from typing import Type",
            "",
            "import redis.asyncio as redis",
            "from fastapi import Depends, Form",
            "from starlette.middleware.base import BaseHTTPMiddleware, RequestResponseEndpoint",
            "from starlette.requests import Request",
            "from starlette.responses import RedirectResponse",
            "from starlette.status import HTTP_303_SEE_OTHER, HTTP_401_UNAUTHORIZED",
            "from tortoise import signals",
            "",
            "from fastapi_admin import constants",
            "from fastapi_admin.depends import get_current_admin, get_redis, get_resources",
            "from fastapi_admin.i18n import _",
            "from fastapi_admin.models import AbstractAdmin",
            "from fastapi_admin.providers import Provider",
            "from fastapi_admin.template import templates",
            "from fastapi_admin.utils import check_password, hash_password",
            "",
            "if typing.TYPE_CHECKING:",
            "    from fastapi_admin.app import FastAPIAdmin",
            "",
            "",
            "class UsernamePasswordProvider(Provider):",
            "    name = \"login_provider\"",
            "",
            "    access_token = \"access_token\"",
            "",
            "    def __init__(",
            "        self,",
            "        admin_model: Type[AbstractAdmin],",
            "        login_path=\"/login\",",
            "        logout_path=\"/logout\",",
            "        template=\"providers/login/login.html\",",
            "        login_title=\"Login to your account\",",
            "        login_logo_url: str = None,",
            "    ):",
            "        self.login_path = login_path",
            "        self.logout_path = logout_path",
            "        self.template = template",
            "        self.admin_model = admin_model",
            "        self.login_title = login_title",
            "        self.login_logo_url = login_logo_url",
            "",
            "    async def login_view(",
            "        self,",
            "        request: Request,",
            "    ):",
            "        return templates.TemplateResponse(",
            "            self.template,",
            "            context={",
            "                \"request\": request,",
            "                \"login_logo_url\": self.login_logo_url,",
            "                \"login_title\": self.login_title,",
            "            },",
            "        )",
            "",
            "    async def register(self, app: \"FastAPIAdmin\"):",
            "        await super(UsernamePasswordProvider, self).register(app)",
            "        login_path = self.login_path",
            "        app.get(login_path)(self.login_view)",
            "        app.post(login_path)(self.login)",
            "        app.get(self.logout_path)(self.logout)",
            "        app.add_middleware(BaseHTTPMiddleware, dispatch=self.authenticate)",
            "        app.get(\"/init\")(self.init_view)",
            "        app.post(\"/init\")(self.init)",
            "        app.get(\"/password\")(self.password_view)",
            "        app.post(\"/password\")(self.password)",
            "        signals.pre_save(self.admin_model)(self.pre_save_admin)",
            "",
            "    async def pre_save_admin(self, _, instance: AbstractAdmin, using_db, update_fields):",
            "        if instance.pk:",
            "            db_obj = await instance.get(pk=instance.pk)",
            "            if db_obj.password != instance.password:",
            "                instance.password = hash_password(instance.password)",
            "        else:",
            "            instance.password = hash_password(instance.password)",
            "",
            "    async def login(self, request: Request, redis: redis.Redis = Depends(get_redis)):",
            "        form = await request.form()",
            "        username = form.get(\"username\")",
            "        password = form.get(\"password\")",
            "        remember_me = form.get(\"remember_me\")",
            "        admin = await self.admin_model.get_or_none(username=username)",
            "        if not admin or not check_password(password, admin.password):",
            "            return templates.TemplateResponse(",
            "                self.template,",
            "                status_code=HTTP_401_UNAUTHORIZED,",
            "                context={\"request\": request, \"error\": _(\"login_failed\")},",
            "            )",
            "        response = RedirectResponse(url=request.app.admin_path, status_code=HTTP_303_SEE_OTHER)",
            "        if remember_me == \"on\":",
            "            expire = 3600 * 24 * 30",
            "            response.set_cookie(\"remember_me\", \"on\")",
            "        else:",
            "            expire = 3600",
            "            response.delete_cookie(\"remember_me\")",
            "        token = uuid.uuid4().hex",
            "        response.set_cookie(",
            "            self.access_token,",
            "            token,",
            "            expires=expire,",
            "            path=request.app.admin_path,",
            "            httponly=True,",
            "        )",
            "        await redis.set(constants.LOGIN_USER.format(token=token), admin.pk, ex=expire)",
            "        return response",
            "",
            "    async def logout(self, request: Request):",
            "        response = self.redirect_login(request)",
            "        response.delete_cookie(self.access_token, path=request.app.admin_path)",
            "        token = request.cookies.get(self.access_token)",
            "        await request.app.redis.delete(constants.LOGIN_USER.format(token=token))",
            "        return response",
            "",
            "    async def authenticate(",
            "        self,",
            "        request: Request,",
            "        call_next: RequestResponseEndpoint,",
            "    ):",
            "        redis = request.app.redis  # type:Redis",
            "        token = request.cookies.get(self.access_token)",
            "        path = request.scope[\"path\"]",
            "        admin = None",
            "        if token:",
            "            token_key = constants.LOGIN_USER.format(token=token)",
            "            admin_id = await redis.get(token_key)",
            "            admin = await self.admin_model.get_or_none(pk=admin_id)",
            "        request.state.admin = admin",
            "",
            "        if path == self.login_path and admin:",
            "            return RedirectResponse(url=request.app.admin_path, status_code=HTTP_303_SEE_OTHER)",
            "",
            "        response = await call_next(request)",
            "        return response",
            "",
            "    async def create_user(self, username: str, password: str, **kwargs):",
            "        return await self.admin_model.create(username=username, password=password, **kwargs)",
            "",
            "    async def init_view(self, request: Request):",
            "        exists = await self.admin_model.all().limit(1).exists()",
            "        if exists:",
            "            return self.redirect_login(request)",
            "        return templates.TemplateResponse(\"init.html\", context={\"request\": request})",
            "",
            "    async def init(",
            "        self,",
            "        request: Request,",
            "    ):",
            "        exists = await self.admin_model.all().limit(1).exists()",
            "        if exists:",
            "            return self.redirect_login(request)",
            "        form = await request.form()",
            "        password = form.get(\"password\")",
            "        confirm_password = form.get(\"confirm_password\")",
            "        username = form.get(\"username\")",
            "        if password != confirm_password:",
            "            return templates.TemplateResponse(",
            "                \"init.html\",",
            "                context={\"request\": request, \"error\": _(\"confirm_password_different\")},",
            "            )",
            "",
            "        await self.create_user(username, password)",
            "        return self.redirect_login(request)",
            "",
            "    def redirect_login(self, request: Request):",
            "        return RedirectResponse(",
            "            url=request.app.admin_path + self.login_path, status_code=HTTP_303_SEE_OTHER",
            "        )",
            "",
            "    async def password_view(",
            "        self,",
            "        request: Request,",
            "        resources=Depends(get_resources),",
            "    ):",
            "        return templates.TemplateResponse(",
            "            \"providers/login/password.html\",",
            "            context={",
            "                \"request\": request,",
            "                \"resources\": resources,",
            "            },",
            "        )",
            "",
            "    async def password(",
            "        self,",
            "        request: Request,",
            "        old_password: str = Form(...),",
            "        new_password: str = Form(...),",
            "        re_new_password: str = Form(...),",
            "        admin: AbstractAdmin = Depends(get_current_admin),",
            "        resources=Depends(get_resources),",
            "    ):",
            "        error = None",
            "        if not check_password(old_password, admin.password):",
            "            error = _(\"old_password_error\")",
            "        elif new_password != re_new_password:",
            "            error = _(\"new_password_different\")",
            "        if error:",
            "            return templates.TemplateResponse(",
            "                \"password.html\",",
            "                context={\"request\": request, \"resources\": resources, \"error\": error},",
            "            )",
            "        admin.password = new_password",
            "        await admin.save(update_fields=[\"password\"])",
            "        return await self.logout(request)"
        ],
        "afterPatchFile": [
            "import typing",
            "import uuid",
            "from typing import Type",
            "",
            "import redis.asyncio as redis",
            "from fastapi import Depends, Form",
            "from starlette.middleware.base import BaseHTTPMiddleware, RequestResponseEndpoint",
            "from starlette.requests import Request",
            "from starlette.responses import RedirectResponse",
            "from starlette.status import HTTP_303_SEE_OTHER, HTTP_401_UNAUTHORIZED",
            "from tortoise import signals",
            "",
            "from fastapi_admin import constants",
            "from fastapi_admin.depends import get_current_admin, get_redis, get_resources",
            "from fastapi_admin.i18n import _",
            "from fastapi_admin.models import AbstractAdmin",
            "from fastapi_admin.providers import Provider",
            "from fastapi_admin.template import templates",
            "from fastapi_admin.utils import check_password, hash_password",
            "",
            "if typing.TYPE_CHECKING:",
            "    from fastapi_admin.app import FastAPIAdmin",
            "",
            "",
            "class UsernamePasswordProvider(Provider):",
            "    name = \"login_provider\"",
            "",
            "    access_token = \"access_token\"",
            "",
            "    def __init__(",
            "        self,",
            "        admin_model: Type[AbstractAdmin],",
            "        login_path=\"/login\",",
            "        logout_path=\"/logout\",",
            "        template=\"providers/login/login.html\",",
            "        login_title=\"Login to your account\",",
            "        login_logo_url: str = None,",
            "    ):",
            "        self.login_path = login_path",
            "        self.logout_path = logout_path",
            "        self.template = template",
            "        self.admin_model = admin_model",
            "        self.login_title = login_title",
            "        self.login_logo_url = login_logo_url",
            "",
            "    async def login_view(",
            "        self,",
            "        request: Request,",
            "    ):",
            "        return templates.TemplateResponse(",
            "            self.template,",
            "            context={",
            "                \"request\": request,",
            "                \"login_logo_url\": self.login_logo_url,",
            "                \"login_title\": self.login_title,",
            "            },",
            "        )",
            "",
            "    async def register(self, app: \"FastAPIAdmin\"):",
            "        await super(UsernamePasswordProvider, self).register(app)",
            "        login_path = self.login_path",
            "        app.get(login_path)(self.login_view)",
            "        app.post(login_path)(self.login)",
            "        app.get(self.logout_path)(self.logout)",
            "        app.add_middleware(BaseHTTPMiddleware, dispatch=self.authenticate)",
            "        app.get(\"/init\")(self.init_view)",
            "        app.post(\"/init\")(self.init)",
            "        app.get(\"/password\")(self.password_view)",
            "        app.post(\"/password\")(self.password)",
            "        signals.pre_save(self.admin_model)(self.pre_save_admin)",
            "",
            "    async def pre_save_admin(self, _, instance: AbstractAdmin, using_db, update_fields):",
            "        if instance.pk:",
            "            db_obj = await instance.get(pk=instance.pk)",
            "            if db_obj.password != instance.password:",
            "                instance.password = hash_password(instance.password)",
            "        else:",
            "            instance.password = hash_password(instance.password)",
            "",
            "    async def login(self, request: Request, redis: redis.Redis = Depends(get_redis)):",
            "        form = await request.form()",
            "        username = form.get(\"username\")",
            "        password = form.get(\"password\")",
            "        remember_me = form.get(\"remember_me\")",
            "        admin = await self.admin_model.get_or_none(username=username)",
            "        if not admin or not check_password(password, admin.password):",
            "            return templates.TemplateResponse(",
            "                self.template,",
            "                status_code=HTTP_401_UNAUTHORIZED,",
            "                context={\"request\": request, \"error\": _(\"login_failed\")},",
            "            )",
            "        response = RedirectResponse(url=request.app.admin_path, status_code=HTTP_303_SEE_OTHER)",
            "        if remember_me == \"on\":",
            "            expire = 3600 * 24 * 30",
            "            response.set_cookie(\"remember_me\", \"on\")",
            "        else:",
            "            expire = 3600",
            "            response.delete_cookie(\"remember_me\")",
            "        token = uuid.uuid4().hex",
            "        response.set_cookie(",
            "            self.access_token,",
            "            token,",
            "            expires=expire,",
            "            path=request.app.admin_path,",
            "            httponly=True,",
            "        )",
            "        await redis.set(constants.LOGIN_USER.format(token=token), admin.pk, ex=expire)",
            "        return response",
            "",
            "    async def logout(self, request: Request):",
            "        response = self.redirect_login(request)",
            "        response.delete_cookie(self.access_token, path=request.app.admin_path)",
            "        token = request.cookies.get(self.access_token)",
            "        await request.app.redis.delete(constants.LOGIN_USER.format(token=token))",
            "        return response",
            "",
            "    async def authenticate(",
            "        self,",
            "        request: Request,",
            "        call_next: RequestResponseEndpoint,",
            "    ):",
            "        redis = request.app.redis  # type:ignore",
            "        token = request.cookies.get(self.access_token)",
            "        path = request.scope[\"path\"]",
            "        admin = None",
            "        if token:",
            "            token_key = constants.LOGIN_USER.format(token=token)",
            "            admin_id = await redis.get(token_key)",
            "            admin = await self.admin_model.get_or_none(pk=admin_id)",
            "        request.state.admin = admin",
            "",
            "        if path == self.login_path and admin:",
            "            return RedirectResponse(url=request.app.admin_path, status_code=HTTP_303_SEE_OTHER)",
            "",
            "        response = await call_next(request)",
            "        return response",
            "",
            "    async def create_user(self, username: str, password: str, **kwargs):",
            "        return await self.admin_model.create(username=username, password=password, **kwargs)",
            "",
            "    async def init_view(self, request: Request):",
            "        exists = await self.admin_model.all().limit(1).exists()",
            "        if exists:",
            "            return self.redirect_login(request)",
            "        return templates.TemplateResponse(\"init.html\", context={\"request\": request})",
            "",
            "    async def init(",
            "        self,",
            "        request: Request,",
            "    ):",
            "        exists = await self.admin_model.all().limit(1).exists()",
            "        if exists:",
            "            return self.redirect_login(request)",
            "        form = await request.form()",
            "        password = form.get(\"password\")",
            "        confirm_password = form.get(\"confirm_password\")",
            "        username = form.get(\"username\")",
            "        if password != confirm_password:",
            "            return templates.TemplateResponse(",
            "                \"init.html\",",
            "                context={\"request\": request, \"error\": _(\"confirm_password_different\")},",
            "            )",
            "",
            "        await self.create_user(username, password)",
            "        return self.redirect_login(request)",
            "",
            "    def redirect_login(self, request: Request):",
            "        return RedirectResponse(",
            "            url=request.app.admin_path + self.login_path, status_code=HTTP_303_SEE_OTHER",
            "        )",
            "",
            "    async def password_view(",
            "        self,",
            "        request: Request,",
            "        resources=Depends(get_resources),",
            "    ):",
            "        return templates.TemplateResponse(",
            "            \"providers/login/password.html\",",
            "            context={",
            "                \"request\": request,",
            "                \"resources\": resources,",
            "            },",
            "        )",
            "",
            "    async def password(",
            "        self,",
            "        request: Request,",
            "        old_password: str = Form(...),",
            "        new_password: str = Form(...),",
            "        re_new_password: str = Form(...),",
            "        admin: AbstractAdmin = Depends(get_current_admin),",
            "        resources=Depends(get_resources),",
            "    ):",
            "        error = None",
            "        if not check_password(old_password, admin.password):",
            "            error = _(\"old_password_error\")",
            "        elif new_password != re_new_password:",
            "            error = _(\"new_password_different\")",
            "        if error:",
            "            return templates.TemplateResponse(",
            "                \"password.html\",",
            "                context={\"request\": request, \"resources\": resources, \"error\": error},",
            "            )",
            "        admin.password = new_password",
            "        await admin.save(update_fields=[\"password\"])",
            "        return await self.logout(request)"
        ],
        "action": [
            "0",
            "0",
            "0",
            "2",
            "2",
            "0",
            "0",
            "0"
        ],
        "dele_reviseLocation": {
            "122": [
                "UsernamePasswordProvider"
            ]
        },
        "addLocation": []
    },
    "fastapi_admin/widgets/inputs.py": {
        "Patch": {
            "0": {
                "beforePatchRowNumber": 15,
                "afterPatchRowNumber": 15,
                "PatchRowcode": "     template = \"widgets/inputs/input.html\""
            },
            "1": {
                "beforePatchRowNumber": 16,
                "afterPatchRowNumber": 16,
                "PatchRowcode": " "
            },
            "2": {
                "beforePatchRowNumber": 17,
                "afterPatchRowNumber": 17,
                "PatchRowcode": "     def __init__("
            },
            "3": {
                "beforePatchRowNumber": 18,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            self, help_text: Optional[str] = None, default: Any = None, null: bool = False, **context"
            },
            "4": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 18,
                "PatchRowcode": "+        self, help_text: Optional[str] = None, default: Any = None, null: bool = False, **context"
            },
            "5": {
                "beforePatchRowNumber": 19,
                "afterPatchRowNumber": 19,
                "PatchRowcode": "     ):"
            },
            "6": {
                "beforePatchRowNumber": 20,
                "afterPatchRowNumber": 20,
                "PatchRowcode": "         super().__init__(null=null, help_text=help_text, **context)"
            },
            "7": {
                "beforePatchRowNumber": 21,
                "afterPatchRowNumber": 21,
                "PatchRowcode": "         self.default = default"
            },
            "8": {
                "beforePatchRowNumber": 44,
                "afterPatchRowNumber": 44,
                "PatchRowcode": "     input_type: Optional[str] = \"text\""
            },
            "9": {
                "beforePatchRowNumber": 45,
                "afterPatchRowNumber": 45,
                "PatchRowcode": " "
            },
            "10": {
                "beforePatchRowNumber": 46,
                "afterPatchRowNumber": 46,
                "PatchRowcode": "     def __init__("
            },
            "11": {
                "beforePatchRowNumber": 47,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            self,"
            },
            "12": {
                "beforePatchRowNumber": 48,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            help_text: Optional[str] = None,"
            },
            "13": {
                "beforePatchRowNumber": 49,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            default: Any = None,"
            },
            "14": {
                "beforePatchRowNumber": 50,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            null: bool = False,"
            },
            "15": {
                "beforePatchRowNumber": 51,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            placeholder: str = \"\","
            },
            "16": {
                "beforePatchRowNumber": 52,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            disabled: bool = False,"
            },
            "17": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 47,
                "PatchRowcode": "+        self,"
            },
            "18": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 48,
                "PatchRowcode": "+        help_text: Optional[str] = None,"
            },
            "19": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 49,
                "PatchRowcode": "+        default: Any = None,"
            },
            "20": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 50,
                "PatchRowcode": "+        null: bool = False,"
            },
            "21": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 51,
                "PatchRowcode": "+        placeholder: str = \"\","
            },
            "22": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 52,
                "PatchRowcode": "+        disabled: bool = False,"
            },
            "23": {
                "beforePatchRowNumber": 53,
                "afterPatchRowNumber": 53,
                "PatchRowcode": "     ):"
            },
            "24": {
                "beforePatchRowNumber": 54,
                "afterPatchRowNumber": 54,
                "PatchRowcode": "         super().__init__("
            },
            "25": {
                "beforePatchRowNumber": 55,
                "afterPatchRowNumber": 55,
                "PatchRowcode": "             null=null,"
            },
            "26": {
                "beforePatchRowNumber": 65,
                "afterPatchRowNumber": 65,
                "PatchRowcode": "     template = \"widgets/inputs/select.html\""
            },
            "27": {
                "beforePatchRowNumber": 66,
                "afterPatchRowNumber": 66,
                "PatchRowcode": " "
            },
            "28": {
                "beforePatchRowNumber": 67,
                "afterPatchRowNumber": 67,
                "PatchRowcode": "     def __init__("
            },
            "29": {
                "beforePatchRowNumber": 68,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            self,"
            },
            "30": {
                "beforePatchRowNumber": 69,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            help_text: Optional[str] = None,"
            },
            "31": {
                "beforePatchRowNumber": 70,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            default: Any = None,"
            },
            "32": {
                "beforePatchRowNumber": 71,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            null: bool = False,"
            },
            "33": {
                "beforePatchRowNumber": 72,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            disabled: bool = False,"
            },
            "34": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 68,
                "PatchRowcode": "+        self,"
            },
            "35": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 69,
                "PatchRowcode": "+        help_text: Optional[str] = None,"
            },
            "36": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 70,
                "PatchRowcode": "+        default: Any = None,"
            },
            "37": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 71,
                "PatchRowcode": "+        null: bool = False,"
            },
            "38": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 72,
                "PatchRowcode": "+        disabled: bool = False,"
            },
            "39": {
                "beforePatchRowNumber": 73,
                "afterPatchRowNumber": 73,
                "PatchRowcode": "     ):"
            },
            "40": {
                "beforePatchRowNumber": 74,
                "afterPatchRowNumber": 74,
                "PatchRowcode": "         super().__init__(help_text=help_text, null=null, default=default, disabled=disabled)"
            },
            "41": {
                "beforePatchRowNumber": 75,
                "afterPatchRowNumber": 75,
                "PatchRowcode": " "
            },
            "42": {
                "beforePatchRowNumber": 91,
                "afterPatchRowNumber": 91,
                "PatchRowcode": " "
            },
            "43": {
                "beforePatchRowNumber": 92,
                "afterPatchRowNumber": 92,
                "PatchRowcode": " class ForeignKey(Select):"
            },
            "44": {
                "beforePatchRowNumber": 93,
                "afterPatchRowNumber": 93,
                "PatchRowcode": "     def __init__("
            },
            "45": {
                "beforePatchRowNumber": 94,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            self,"
            },
            "46": {
                "beforePatchRowNumber": 95,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            model: Type[Model],"
            },
            "47": {
                "beforePatchRowNumber": 96,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            default: Any = None,"
            },
            "48": {
                "beforePatchRowNumber": 97,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            null: bool = False,"
            },
            "49": {
                "beforePatchRowNumber": 98,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            disabled: bool = False,"
            },
            "50": {
                "beforePatchRowNumber": 99,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            help_text: Optional[str] = None,"
            },
            "51": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 94,
                "PatchRowcode": "+        self,"
            },
            "52": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 95,
                "PatchRowcode": "+        model: Type[Model],"
            },
            "53": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 96,
                "PatchRowcode": "+        default: Any = None,"
            },
            "54": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 97,
                "PatchRowcode": "+        null: bool = False,"
            },
            "55": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 98,
                "PatchRowcode": "+        disabled: bool = False,"
            },
            "56": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 99,
                "PatchRowcode": "+        help_text: Optional[str] = None,"
            },
            "57": {
                "beforePatchRowNumber": 100,
                "afterPatchRowNumber": 100,
                "PatchRowcode": "     ):"
            },
            "58": {
                "beforePatchRowNumber": 101,
                "afterPatchRowNumber": 101,
                "PatchRowcode": "         super().__init__(help_text=help_text, default=default, null=null, disabled=disabled)"
            },
            "59": {
                "beforePatchRowNumber": 102,
                "afterPatchRowNumber": 102,
                "PatchRowcode": "         self.model = model"
            },
            "60": {
                "beforePatchRowNumber": 116,
                "afterPatchRowNumber": 116,
                "PatchRowcode": "     template = \"widgets/inputs/many_to_many.html\""
            },
            "61": {
                "beforePatchRowNumber": 117,
                "afterPatchRowNumber": 117,
                "PatchRowcode": " "
            },
            "62": {
                "beforePatchRowNumber": 118,
                "afterPatchRowNumber": 118,
                "PatchRowcode": "     def __init__("
            },
            "63": {
                "beforePatchRowNumber": 119,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            self,"
            },
            "64": {
                "beforePatchRowNumber": 120,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            model: Type[Model],"
            },
            "65": {
                "beforePatchRowNumber": 121,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            disabled: bool = False,"
            },
            "66": {
                "beforePatchRowNumber": 122,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            help_text: Optional[str] = None,"
            },
            "67": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 119,
                "PatchRowcode": "+        self,"
            },
            "68": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 120,
                "PatchRowcode": "+        model: Type[Model],"
            },
            "69": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 121,
                "PatchRowcode": "+        disabled: bool = False,"
            },
            "70": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 122,
                "PatchRowcode": "+        help_text: Optional[str] = None,"
            },
            "71": {
                "beforePatchRowNumber": 123,
                "afterPatchRowNumber": 123,
                "PatchRowcode": "     ):"
            },
            "72": {
                "beforePatchRowNumber": 124,
                "afterPatchRowNumber": 124,
                "PatchRowcode": "         super().__init__(help_text=help_text, disabled=disabled)"
            },
            "73": {
                "beforePatchRowNumber": 125,
                "afterPatchRowNumber": 125,
                "PatchRowcode": "         self.model = model"
            },
            "74": {
                "beforePatchRowNumber": 144,
                "afterPatchRowNumber": 144,
                "PatchRowcode": " "
            },
            "75": {
                "beforePatchRowNumber": 145,
                "afterPatchRowNumber": 145,
                "PatchRowcode": " class Enum(Select):"
            },
            "76": {
                "beforePatchRowNumber": 146,
                "afterPatchRowNumber": 146,
                "PatchRowcode": "     def __init__("
            },
            "77": {
                "beforePatchRowNumber": 147,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            self,"
            },
            "78": {
                "beforePatchRowNumber": 148,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            enum: Type[EnumCLS],"
            },
            "79": {
                "beforePatchRowNumber": 149,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            default: Any = None,"
            },
            "80": {
                "beforePatchRowNumber": 150,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            enum_type: Type = int,"
            },
            "81": {
                "beforePatchRowNumber": 151,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            null: bool = False,"
            },
            "82": {
                "beforePatchRowNumber": 152,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            disabled: bool = False,"
            },
            "83": {
                "beforePatchRowNumber": 153,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            help_text: Optional[str] = None,"
            },
            "84": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 147,
                "PatchRowcode": "+        self,"
            },
            "85": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 148,
                "PatchRowcode": "+        enum: Type[EnumCLS],"
            },
            "86": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 149,
                "PatchRowcode": "+        default: Any = None,"
            },
            "87": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 150,
                "PatchRowcode": "+        enum_type: Type = int,"
            },
            "88": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 151,
                "PatchRowcode": "+        null: bool = False,"
            },
            "89": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 152,
                "PatchRowcode": "+        disabled: bool = False,"
            },
            "90": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 153,
                "PatchRowcode": "+        help_text: Optional[str] = None,"
            },
            "91": {
                "beforePatchRowNumber": 154,
                "afterPatchRowNumber": 154,
                "PatchRowcode": "     ):"
            },
            "92": {
                "beforePatchRowNumber": 155,
                "afterPatchRowNumber": 155,
                "PatchRowcode": "         super().__init__(help_text=help_text, default=default, null=null, disabled=disabled)"
            },
            "93": {
                "beforePatchRowNumber": 156,
                "afterPatchRowNumber": 156,
                "PatchRowcode": "         self.enum = enum"
            },
            "94": {
                "beforePatchRowNumber": 174,
                "afterPatchRowNumber": 174,
                "PatchRowcode": "     template = \"widgets/inputs/json.html\""
            },
            "95": {
                "beforePatchRowNumber": 175,
                "afterPatchRowNumber": 175,
                "PatchRowcode": " "
            },
            "96": {
                "beforePatchRowNumber": 176,
                "afterPatchRowNumber": 176,
                "PatchRowcode": "     def __init__("
            },
            "97": {
                "beforePatchRowNumber": 177,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            self,"
            },
            "98": {
                "beforePatchRowNumber": 178,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            help_text: Optional[str] = None,"
            },
            "99": {
                "beforePatchRowNumber": 179,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            null: bool = False,"
            },
            "100": {
                "beforePatchRowNumber": 180,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            options: Optional[dict] = None,"
            },
            "101": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 177,
                "PatchRowcode": "+        self,"
            },
            "102": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 178,
                "PatchRowcode": "+        help_text: Optional[str] = None,"
            },
            "103": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 179,
                "PatchRowcode": "+        null: bool = False,"
            },
            "104": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 180,
                "PatchRowcode": "+        options: Optional[dict] = None,"
            },
            "105": {
                "beforePatchRowNumber": 181,
                "afterPatchRowNumber": 181,
                "PatchRowcode": "     ):"
            },
            "106": {
                "beforePatchRowNumber": 182,
                "afterPatchRowNumber": 182,
                "PatchRowcode": "         \"\"\""
            },
            "107": {
                "beforePatchRowNumber": 183,
                "afterPatchRowNumber": 183,
                "PatchRowcode": "         options config to jsoneditor, see https://github.com/josdejong/jsoneditor"
            },
            "108": {
                "beforePatchRowNumber": 215,
                "afterPatchRowNumber": 215,
                "PatchRowcode": "     input_type = \"file\""
            },
            "109": {
                "beforePatchRowNumber": 216,
                "afterPatchRowNumber": 216,
                "PatchRowcode": " "
            },
            "110": {
                "beforePatchRowNumber": 217,
                "afterPatchRowNumber": 217,
                "PatchRowcode": "     def __init__("
            },
            "111": {
                "beforePatchRowNumber": 218,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            self,"
            },
            "112": {
                "beforePatchRowNumber": 219,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            upload: FileUpload,"
            },
            "113": {
                "beforePatchRowNumber": 220,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            default: Any = None,"
            },
            "114": {
                "beforePatchRowNumber": 221,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            null: bool = False,"
            },
            "115": {
                "beforePatchRowNumber": 222,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            disabled: bool = False,"
            },
            "116": {
                "beforePatchRowNumber": 223,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            help_text: Optional[str] = None,"
            },
            "117": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 218,
                "PatchRowcode": "+        self,"
            },
            "118": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 219,
                "PatchRowcode": "+        upload: FileUpload,"
            },
            "119": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 220,
                "PatchRowcode": "+        default: Any = None,"
            },
            "120": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 221,
                "PatchRowcode": "+        null: bool = False,"
            },
            "121": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 222,
                "PatchRowcode": "+        disabled: bool = False,"
            },
            "122": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 223,
                "PatchRowcode": "+        help_text: Optional[str] = None,"
            },
            "123": {
                "beforePatchRowNumber": 224,
                "afterPatchRowNumber": 224,
                "PatchRowcode": "     ):"
            },
            "124": {
                "beforePatchRowNumber": 225,
                "afterPatchRowNumber": 225,
                "PatchRowcode": "         super().__init__("
            },
            "125": {
                "beforePatchRowNumber": 226,
                "afterPatchRowNumber": 226,
                "PatchRowcode": "             null=null,"
            },
            "126": {
                "beforePatchRowNumber": 246,
                "afterPatchRowNumber": 246,
                "PatchRowcode": "     template = \"widgets/inputs/radio.html\""
            },
            "127": {
                "beforePatchRowNumber": 247,
                "afterPatchRowNumber": 247,
                "PatchRowcode": " "
            },
            "128": {
                "beforePatchRowNumber": 248,
                "afterPatchRowNumber": 248,
                "PatchRowcode": "     def __init__("
            },
            "129": {
                "beforePatchRowNumber": 249,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            self,"
            },
            "130": {
                "beforePatchRowNumber": 250,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            options: List[Tuple[str, Any]],"
            },
            "131": {
                "beforePatchRowNumber": 251,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            help_text: Optional[str] = None,"
            },
            "132": {
                "beforePatchRowNumber": 252,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            default: Any = None,"
            },
            "133": {
                "beforePatchRowNumber": 253,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            disabled: bool = False,"
            },
            "134": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 249,
                "PatchRowcode": "+        self,"
            },
            "135": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 250,
                "PatchRowcode": "+        options: List[Tuple[str, Any]],"
            },
            "136": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 251,
                "PatchRowcode": "+        help_text: Optional[str] = None,"
            },
            "137": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 252,
                "PatchRowcode": "+        default: Any = None,"
            },
            "138": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 253,
                "PatchRowcode": "+        disabled: bool = False,"
            },
            "139": {
                "beforePatchRowNumber": 254,
                "afterPatchRowNumber": 254,
                "PatchRowcode": "     ):"
            },
            "140": {
                "beforePatchRowNumber": 255,
                "afterPatchRowNumber": 255,
                "PatchRowcode": "         super().__init__(default=default, disabled=disabled, help_text=help_text)"
            },
            "141": {
                "beforePatchRowNumber": 256,
                "afterPatchRowNumber": 256,
                "PatchRowcode": "         self.options = options"
            }
        },
        "frontPatchFile": [
            "import abc",
            "import json",
            "from enum import Enum as EnumCLS",
            "from typing import Any, List, Optional, Tuple, Type",
            "",
            "from starlette.datastructures import UploadFile",
            "from starlette.requests import Request",
            "from tortoise import Model",
            "",
            "from fastapi_admin.file_upload import FileUpload",
            "from fastapi_admin.widgets import Widget",
            "",
            "",
            "class Input(Widget):",
            "    template = \"widgets/inputs/input.html\"",
            "",
            "    def __init__(",
            "            self, help_text: Optional[str] = None, default: Any = None, null: bool = False, **context",
            "    ):",
            "        super().__init__(null=null, help_text=help_text, **context)",
            "        self.default = default",
            "",
            "    async def parse_value(self, request: Request, value: Any):",
            "        \"\"\"",
            "        Parse value from frontend",
            "        :param value:",
            "        :return:",
            "        \"\"\"",
            "        return value",
            "",
            "    async def render(self, request: Request, value: Any):",
            "        if value is None:",
            "            value = self.default",
            "        return await super(Input, self).render(request, value)",
            "",
            "",
            "class DisplayOnly(Input):",
            "    \"\"\"",
            "    Only display without input in edit or create",
            "    \"\"\"",
            "",
            "",
            "class Text(Input):",
            "    input_type: Optional[str] = \"text\"",
            "",
            "    def __init__(",
            "            self,",
            "            help_text: Optional[str] = None,",
            "            default: Any = None,",
            "            null: bool = False,",
            "            placeholder: str = \"\",",
            "            disabled: bool = False,",
            "    ):",
            "        super().__init__(",
            "            null=null,",
            "            default=default,",
            "            input_type=self.input_type,",
            "            placeholder=placeholder,",
            "            disabled=disabled,",
            "            help_text=help_text,",
            "        )",
            "",
            "",
            "class Select(Input):",
            "    template = \"widgets/inputs/select.html\"",
            "",
            "    def __init__(",
            "            self,",
            "            help_text: Optional[str] = None,",
            "            default: Any = None,",
            "            null: bool = False,",
            "            disabled: bool = False,",
            "    ):",
            "        super().__init__(help_text=help_text, null=null, default=default, disabled=disabled)",
            "",
            "    @abc.abstractmethod",
            "    async def get_options(self):",
            "        \"\"\"",
            "        return list of tuple with display and value",
            "",
            "        [(\"on\",1),(\"off\",2)]",
            "",
            "        :return: list of tuple with display and value",
            "        \"\"\"",
            "",
            "    async def render(self, request: Request, value: Any):",
            "        options = await self.get_options()",
            "        self.context.update(options=options)",
            "        return await super(Select, self).render(request, value)",
            "",
            "",
            "class ForeignKey(Select):",
            "    def __init__(",
            "            self,",
            "            model: Type[Model],",
            "            default: Any = None,",
            "            null: bool = False,",
            "            disabled: bool = False,",
            "            help_text: Optional[str] = None,",
            "    ):",
            "        super().__init__(help_text=help_text, default=default, null=null, disabled=disabled)",
            "        self.model = model",
            "",
            "    async def get_options(self):",
            "        ret = await self.get_queryset()",
            "        options = [(str(x), x.pk) for x in ret]",
            "        if self.context.get(\"null\"):",
            "            options = [(\"\", \"\")] + options",
            "        return options",
            "",
            "    async def get_queryset(self):",
            "        return await self.model.all()",
            "",
            "",
            "class ManyToMany(Select):",
            "    template = \"widgets/inputs/many_to_many.html\"",
            "",
            "    def __init__(",
            "            self,",
            "            model: Type[Model],",
            "            disabled: bool = False,",
            "            help_text: Optional[str] = None,",
            "    ):",
            "        super().__init__(help_text=help_text, disabled=disabled)",
            "        self.model = model",
            "",
            "    async def get_options(self):",
            "        ret = await self.get_queryset()",
            "        options = [dict(label=str(x), value=x.pk) for x in ret]",
            "        return options",
            "",
            "    async def get_queryset(self):",
            "        return await self.model.all()",
            "",
            "    async def render(self, request: Request, value: Any):",
            "        options = await self.get_options()",
            "        selected = list(map(lambda x: x.pk, value.related_objects if value else []))",
            "        for option in options:",
            "            if option.get(\"value\") in selected:",
            "                option[\"selected\"] = True",
            "        self.context.update(options=json.dumps(options))",
            "        return await super(Input, self).render(request, value)",
            "",
            "",
            "class Enum(Select):",
            "    def __init__(",
            "            self,",
            "            enum: Type[EnumCLS],",
            "            default: Any = None,",
            "            enum_type: Type = int,",
            "            null: bool = False,",
            "            disabled: bool = False,",
            "            help_text: Optional[str] = None,",
            "    ):",
            "        super().__init__(help_text=help_text, default=default, null=null, disabled=disabled)",
            "        self.enum = enum",
            "        self.enum_type = enum_type",
            "",
            "    async def parse_value(self, request: Request, value: Any):",
            "        return self.enum(self.enum_type(value))",
            "",
            "    async def get_options(self):",
            "        options = [(v.name, v.value) for v in self.enum]",
            "        if self.context.get(\"null\"):",
            "            options = [(\"\", \"\")] + options",
            "        return options",
            "",
            "",
            "class Email(Text):",
            "    input_type = \"email\"",
            "",
            "",
            "class Json(Input):",
            "    template = \"widgets/inputs/json.html\"",
            "",
            "    def __init__(",
            "            self,",
            "            help_text: Optional[str] = None,",
            "            null: bool = False,",
            "            options: Optional[dict] = None,",
            "    ):",
            "        \"\"\"",
            "        options config to jsoneditor, see https://github.com/josdejong/jsoneditor",
            "        :param options:",
            "        \"\"\"",
            "        super().__init__(null=null, help_text=help_text)",
            "        if not options:",
            "            options = {}",
            "        self.context.update(options=options)",
            "",
            "    async def render(self, request: Request, value: Any):",
            "        if value:",
            "            value = json.dumps(value)",
            "        return await super().render(request, value)",
            "",
            "",
            "class TextArea(Text):",
            "    template = \"widgets/inputs/textarea.html\"",
            "    input_type = \"textarea\"",
            "",
            "",
            "class Editor(Text):",
            "    template = \"widgets/inputs/editor.html\"",
            "",
            "",
            "class DateTime(Text):",
            "    template = \"widgets/inputs/datetime.html\"",
            "",
            "",
            "class Date(Text):",
            "    template = \"widgets/inputs/date.html\"",
            "",
            "",
            "class File(Input):",
            "    input_type = \"file\"",
            "",
            "    def __init__(",
            "            self,",
            "            upload: FileUpload,",
            "            default: Any = None,",
            "            null: bool = False,",
            "            disabled: bool = False,",
            "            help_text: Optional[str] = None,",
            "    ):",
            "        super().__init__(",
            "            null=null,",
            "            default=default,",
            "            input_type=self.input_type,",
            "            disabled=disabled,",
            "            help_text=help_text,",
            "        )",
            "        self.upload = upload",
            "",
            "    async def parse_value(self, request: Request, value: Optional[UploadFile]):",
            "        if value and value.filename:",
            "            return await self.upload.upload(value)",
            "        return None",
            "",
            "",
            "class Image(File):",
            "    template = \"widgets/inputs/image.html\"",
            "    input_type = \"file\"",
            "",
            "",
            "class Radio(Select):",
            "    template = \"widgets/inputs/radio.html\"",
            "",
            "    def __init__(",
            "            self,",
            "            options: List[Tuple[str, Any]],",
            "            help_text: Optional[str] = None,",
            "            default: Any = None,",
            "            disabled: bool = False,",
            "    ):",
            "        super().__init__(default=default, disabled=disabled, help_text=help_text)",
            "        self.options = options",
            "",
            "    async def get_options(self):",
            "        return self.options",
            "",
            "",
            "class RadioEnum(Enum):",
            "    template = \"widgets/inputs/radio.html\"",
            "",
            "",
            "class Switch(Input):",
            "    template = \"widgets/inputs/switch.html\"",
            "",
            "    async def parse_value(self, request: Request, value: str):",
            "        if value == \"on\":",
            "            return True",
            "        return False",
            "",
            "",
            "class Password(Text):",
            "    input_type = \"password\"",
            "",
            "",
            "class Number(Text):",
            "    input_type = \"number\"",
            "",
            "",
            "class Color(Text):",
            "    template = \"widgets/inputs/color.html\""
        ],
        "afterPatchFile": [
            "import abc",
            "import json",
            "from enum import Enum as EnumCLS",
            "from typing import Any, List, Optional, Tuple, Type",
            "",
            "from starlette.datastructures import UploadFile",
            "from starlette.requests import Request",
            "from tortoise import Model",
            "",
            "from fastapi_admin.file_upload import FileUpload",
            "from fastapi_admin.widgets import Widget",
            "",
            "",
            "class Input(Widget):",
            "    template = \"widgets/inputs/input.html\"",
            "",
            "    def __init__(",
            "        self, help_text: Optional[str] = None, default: Any = None, null: bool = False, **context",
            "    ):",
            "        super().__init__(null=null, help_text=help_text, **context)",
            "        self.default = default",
            "",
            "    async def parse_value(self, request: Request, value: Any):",
            "        \"\"\"",
            "        Parse value from frontend",
            "        :param value:",
            "        :return:",
            "        \"\"\"",
            "        return value",
            "",
            "    async def render(self, request: Request, value: Any):",
            "        if value is None:",
            "            value = self.default",
            "        return await super(Input, self).render(request, value)",
            "",
            "",
            "class DisplayOnly(Input):",
            "    \"\"\"",
            "    Only display without input in edit or create",
            "    \"\"\"",
            "",
            "",
            "class Text(Input):",
            "    input_type: Optional[str] = \"text\"",
            "",
            "    def __init__(",
            "        self,",
            "        help_text: Optional[str] = None,",
            "        default: Any = None,",
            "        null: bool = False,",
            "        placeholder: str = \"\",",
            "        disabled: bool = False,",
            "    ):",
            "        super().__init__(",
            "            null=null,",
            "            default=default,",
            "            input_type=self.input_type,",
            "            placeholder=placeholder,",
            "            disabled=disabled,",
            "            help_text=help_text,",
            "        )",
            "",
            "",
            "class Select(Input):",
            "    template = \"widgets/inputs/select.html\"",
            "",
            "    def __init__(",
            "        self,",
            "        help_text: Optional[str] = None,",
            "        default: Any = None,",
            "        null: bool = False,",
            "        disabled: bool = False,",
            "    ):",
            "        super().__init__(help_text=help_text, null=null, default=default, disabled=disabled)",
            "",
            "    @abc.abstractmethod",
            "    async def get_options(self):",
            "        \"\"\"",
            "        return list of tuple with display and value",
            "",
            "        [(\"on\",1),(\"off\",2)]",
            "",
            "        :return: list of tuple with display and value",
            "        \"\"\"",
            "",
            "    async def render(self, request: Request, value: Any):",
            "        options = await self.get_options()",
            "        self.context.update(options=options)",
            "        return await super(Select, self).render(request, value)",
            "",
            "",
            "class ForeignKey(Select):",
            "    def __init__(",
            "        self,",
            "        model: Type[Model],",
            "        default: Any = None,",
            "        null: bool = False,",
            "        disabled: bool = False,",
            "        help_text: Optional[str] = None,",
            "    ):",
            "        super().__init__(help_text=help_text, default=default, null=null, disabled=disabled)",
            "        self.model = model",
            "",
            "    async def get_options(self):",
            "        ret = await self.get_queryset()",
            "        options = [(str(x), x.pk) for x in ret]",
            "        if self.context.get(\"null\"):",
            "            options = [(\"\", \"\")] + options",
            "        return options",
            "",
            "    async def get_queryset(self):",
            "        return await self.model.all()",
            "",
            "",
            "class ManyToMany(Select):",
            "    template = \"widgets/inputs/many_to_many.html\"",
            "",
            "    def __init__(",
            "        self,",
            "        model: Type[Model],",
            "        disabled: bool = False,",
            "        help_text: Optional[str] = None,",
            "    ):",
            "        super().__init__(help_text=help_text, disabled=disabled)",
            "        self.model = model",
            "",
            "    async def get_options(self):",
            "        ret = await self.get_queryset()",
            "        options = [dict(label=str(x), value=x.pk) for x in ret]",
            "        return options",
            "",
            "    async def get_queryset(self):",
            "        return await self.model.all()",
            "",
            "    async def render(self, request: Request, value: Any):",
            "        options = await self.get_options()",
            "        selected = list(map(lambda x: x.pk, value.related_objects if value else []))",
            "        for option in options:",
            "            if option.get(\"value\") in selected:",
            "                option[\"selected\"] = True",
            "        self.context.update(options=json.dumps(options))",
            "        return await super(Input, self).render(request, value)",
            "",
            "",
            "class Enum(Select):",
            "    def __init__(",
            "        self,",
            "        enum: Type[EnumCLS],",
            "        default: Any = None,",
            "        enum_type: Type = int,",
            "        null: bool = False,",
            "        disabled: bool = False,",
            "        help_text: Optional[str] = None,",
            "    ):",
            "        super().__init__(help_text=help_text, default=default, null=null, disabled=disabled)",
            "        self.enum = enum",
            "        self.enum_type = enum_type",
            "",
            "    async def parse_value(self, request: Request, value: Any):",
            "        return self.enum(self.enum_type(value))",
            "",
            "    async def get_options(self):",
            "        options = [(v.name, v.value) for v in self.enum]",
            "        if self.context.get(\"null\"):",
            "            options = [(\"\", \"\")] + options",
            "        return options",
            "",
            "",
            "class Email(Text):",
            "    input_type = \"email\"",
            "",
            "",
            "class Json(Input):",
            "    template = \"widgets/inputs/json.html\"",
            "",
            "    def __init__(",
            "        self,",
            "        help_text: Optional[str] = None,",
            "        null: bool = False,",
            "        options: Optional[dict] = None,",
            "    ):",
            "        \"\"\"",
            "        options config to jsoneditor, see https://github.com/josdejong/jsoneditor",
            "        :param options:",
            "        \"\"\"",
            "        super().__init__(null=null, help_text=help_text)",
            "        if not options:",
            "            options = {}",
            "        self.context.update(options=options)",
            "",
            "    async def render(self, request: Request, value: Any):",
            "        if value:",
            "            value = json.dumps(value)",
            "        return await super().render(request, value)",
            "",
            "",
            "class TextArea(Text):",
            "    template = \"widgets/inputs/textarea.html\"",
            "    input_type = \"textarea\"",
            "",
            "",
            "class Editor(Text):",
            "    template = \"widgets/inputs/editor.html\"",
            "",
            "",
            "class DateTime(Text):",
            "    template = \"widgets/inputs/datetime.html\"",
            "",
            "",
            "class Date(Text):",
            "    template = \"widgets/inputs/date.html\"",
            "",
            "",
            "class File(Input):",
            "    input_type = \"file\"",
            "",
            "    def __init__(",
            "        self,",
            "        upload: FileUpload,",
            "        default: Any = None,",
            "        null: bool = False,",
            "        disabled: bool = False,",
            "        help_text: Optional[str] = None,",
            "    ):",
            "        super().__init__(",
            "            null=null,",
            "            default=default,",
            "            input_type=self.input_type,",
            "            disabled=disabled,",
            "            help_text=help_text,",
            "        )",
            "        self.upload = upload",
            "",
            "    async def parse_value(self, request: Request, value: Optional[UploadFile]):",
            "        if value and value.filename:",
            "            return await self.upload.upload(value)",
            "        return None",
            "",
            "",
            "class Image(File):",
            "    template = \"widgets/inputs/image.html\"",
            "    input_type = \"file\"",
            "",
            "",
            "class Radio(Select):",
            "    template = \"widgets/inputs/radio.html\"",
            "",
            "    def __init__(",
            "        self,",
            "        options: List[Tuple[str, Any]],",
            "        help_text: Optional[str] = None,",
            "        default: Any = None,",
            "        disabled: bool = False,",
            "    ):",
            "        super().__init__(default=default, disabled=disabled, help_text=help_text)",
            "        self.options = options",
            "",
            "    async def get_options(self):",
            "        return self.options",
            "",
            "",
            "class RadioEnum(Enum):",
            "    template = \"widgets/inputs/radio.html\"",
            "",
            "",
            "class Switch(Input):",
            "    template = \"widgets/inputs/switch.html\"",
            "",
            "    async def parse_value(self, request: Request, value: str):",
            "        if value == \"on\":",
            "            return True",
            "        return False",
            "",
            "",
            "class Password(Text):",
            "    input_type = \"password\"",
            "",
            "",
            "class Number(Text):",
            "    input_type = \"number\"",
            "",
            "",
            "class Color(Text):",
            "    template = \"widgets/inputs/color.html\""
        ],
        "action": [
            "0",
            "0",
            "0",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0"
        ],
        "dele_reviseLocation": {
            "18": [
                "Input",
                "__init__"
            ],
            "47": [
                "Text",
                "__init__"
            ],
            "48": [
                "Text",
                "__init__"
            ],
            "49": [
                "Text",
                "__init__"
            ],
            "50": [
                "Text",
                "__init__"
            ],
            "51": [
                "Text",
                "__init__"
            ],
            "52": [
                "Text",
                "__init__"
            ],
            "68": [
                "Select",
                "__init__"
            ],
            "69": [
                "Select",
                "__init__"
            ],
            "70": [
                "Select",
                "__init__"
            ],
            "71": [
                "Select",
                "__init__"
            ],
            "72": [
                "Select",
                "__init__"
            ],
            "94": [
                "ForeignKey",
                "__init__"
            ],
            "95": [
                "ForeignKey",
                "__init__"
            ],
            "96": [
                "ForeignKey",
                "__init__"
            ],
            "97": [
                "ForeignKey",
                "__init__"
            ],
            "98": [
                "ForeignKey",
                "__init__"
            ],
            "99": [
                "ForeignKey",
                "__init__"
            ],
            "119": [
                "ManyToMany",
                "__init__"
            ],
            "120": [
                "ManyToMany",
                "__init__"
            ],
            "121": [
                "ManyToMany",
                "__init__"
            ],
            "122": [
                "ManyToMany",
                "__init__"
            ],
            "147": [
                "Enum",
                "__init__"
            ],
            "148": [
                "Enum",
                "__init__"
            ],
            "149": [
                "Enum",
                "__init__"
            ],
            "150": [
                "Enum",
                "__init__"
            ],
            "151": [
                "Enum",
                "__init__"
            ],
            "152": [
                "Enum",
                "__init__"
            ],
            "153": [
                "Enum",
                "__init__"
            ],
            "177": [
                "Json",
                "__init__"
            ],
            "178": [
                "Json",
                "__init__"
            ],
            "179": [
                "Json",
                "__init__"
            ],
            "180": [
                "Json",
                "__init__"
            ],
            "218": [
                "File",
                "__init__"
            ],
            "219": [
                "File",
                "__init__"
            ],
            "220": [
                "File",
                "__init__"
            ],
            "221": [
                "File",
                "__init__"
            ],
            "222": [
                "File",
                "__init__"
            ],
            "223": [
                "File",
                "__init__"
            ],
            "249": [
                "Radio",
                "__init__"
            ],
            "250": [
                "Radio",
                "__init__"
            ],
            "251": [
                "Radio",
                "__init__"
            ],
            "252": [
                "Radio",
                "__init__"
            ],
            "253": [
                "Radio",
                "__init__"
            ]
        },
        "addLocation": []
    }
}