{
    "tcms/core/middleware.py": {
        "Patch": {
            "0": {
                "beforePatchRowNumber": 18,
                "afterPatchRowNumber": 18,
                "PatchRowcode": "             # Redirect to Setup view"
            },
            "1": {
                "beforePatchRowNumber": 19,
                "afterPatchRowNumber": 19,
                "PatchRowcode": "             return HttpResponseRedirect(reverse(\"init-db\"))"
            },
            "2": {
                "beforePatchRowNumber": 20,
                "afterPatchRowNumber": 20,
                "PatchRowcode": "         return None"
            },
            "3": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 21,
                "PatchRowcode": "+"
            },
            "4": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 22,
                "PatchRowcode": "+"
            },
            "5": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 23,
                "PatchRowcode": "+class ExtraHeadersMiddleware(MiddlewareMixin):"
            },
            "6": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 24,
                "PatchRowcode": "+    \"\"\""
            },
            "7": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 25,
                "PatchRowcode": "+    This is enabled only during testing and development. The actual headers"
            },
            "8": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 26,
                "PatchRowcode": "+    are configured in `etc/nginx.conf`!"
            },
            "9": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 27,
                "PatchRowcode": "+    \"\"\""
            },
            "10": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 28,
                "PatchRowcode": "+"
            },
            "11": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 29,
                "PatchRowcode": "+    def process_response(self, request, response):"
            },
            "12": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 30,
                "PatchRowcode": "+        if settings.DEBUG:"
            },
            "13": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 31,
                "PatchRowcode": "+            response.headers[\"X-Frame-Options\"] = \"DENY\""
            },
            "14": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 32,
                "PatchRowcode": "+            response.headers[\"X-Content-Type-Options\"] = \"nosniff\""
            },
            "15": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 33,
                "PatchRowcode": "+            response.headers["
            },
            "16": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 34,
                "PatchRowcode": "+                \"Content-Security-Policy\""
            },
            "17": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 35,
                "PatchRowcode": "+            ] = \"script-src 'self' cdn.crowdin.com;\""
            },
            "18": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 36,
                "PatchRowcode": "+"
            },
            "19": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 37,
                "PatchRowcode": "+        return response"
            }
        },
        "frontPatchFile": [
            "# pylint: disable=no-self-use, too-few-public-methods",
            "",
            "from django.conf import settings",
            "from django.contrib.sites.models import Site",
            "from django.db.utils import OperationalError, ProgrammingError",
            "from django.http import HttpResponseRedirect",
            "from django.urls import reverse",
            "from django.utils.deprecation import MiddlewareMixin",
            "",
            "",
            "class CheckDBStructureExistsMiddleware(MiddlewareMixin):",
            "    def process_request(self, request):",
            "        if request.path == \"/init-db/\":",
            "            return None",
            "        try:",
            "            Site.objects.get(pk=settings.SITE_ID)",
            "        except (OperationalError, ProgrammingError):",
            "            # Redirect to Setup view",
            "            return HttpResponseRedirect(reverse(\"init-db\"))",
            "        return None"
        ],
        "afterPatchFile": [
            "# pylint: disable=no-self-use, too-few-public-methods",
            "",
            "from django.conf import settings",
            "from django.contrib.sites.models import Site",
            "from django.db.utils import OperationalError, ProgrammingError",
            "from django.http import HttpResponseRedirect",
            "from django.urls import reverse",
            "from django.utils.deprecation import MiddlewareMixin",
            "",
            "",
            "class CheckDBStructureExistsMiddleware(MiddlewareMixin):",
            "    def process_request(self, request):",
            "        if request.path == \"/init-db/\":",
            "            return None",
            "        try:",
            "            Site.objects.get(pk=settings.SITE_ID)",
            "        except (OperationalError, ProgrammingError):",
            "            # Redirect to Setup view",
            "            return HttpResponseRedirect(reverse(\"init-db\"))",
            "        return None",
            "",
            "",
            "class ExtraHeadersMiddleware(MiddlewareMixin):",
            "    \"\"\"",
            "    This is enabled only during testing and development. The actual headers",
            "    are configured in `etc/nginx.conf`!",
            "    \"\"\"",
            "",
            "    def process_response(self, request, response):",
            "        if settings.DEBUG:",
            "            response.headers[\"X-Frame-Options\"] = \"DENY\"",
            "            response.headers[\"X-Content-Type-Options\"] = \"nosniff\"",
            "            response.headers[",
            "                \"Content-Security-Policy\"",
            "            ] = \"script-src 'self' cdn.crowdin.com;\"",
            "",
            "        return response"
        ],
        "action": [
            "0",
            "0",
            "0",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1",
            "-1"
        ],
        "dele_reviseLocation": {},
        "addLocation": [
            "superset.sql_parse.sanitize_clause"
        ]
    },
    "tcms/settings/devel.py": {
        "Patch": {
            "0": {
                "beforePatchRowNumber": 30,
                "afterPatchRowNumber": 30,
                "PatchRowcode": " }"
            },
            "1": {
                "beforePatchRowNumber": 31,
                "afterPatchRowNumber": 31,
                "PatchRowcode": " # django-debug-toolbar settings"
            },
            "2": {
                "beforePatchRowNumber": 32,
                "afterPatchRowNumber": 32,
                "PatchRowcode": " "
            },
            "3": {
                "beforePatchRowNumber": 33,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-MIDDLEWARE += [\"debug_toolbar.middleware.DebugToolbarMiddleware\"]  # noqa: F405"
            },
            "4": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 33,
                "PatchRowcode": "+MIDDLEWARE += [  # noqa: F405"
            },
            "5": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 34,
                "PatchRowcode": "+    \"debug_toolbar.middleware.DebugToolbarMiddleware\","
            },
            "6": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 35,
                "PatchRowcode": "+    \"tcms.core.middleware.ExtraHeadersMiddleware\","
            },
            "7": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 36,
                "PatchRowcode": "+]"
            },
            "8": {
                "beforePatchRowNumber": 34,
                "afterPatchRowNumber": 37,
                "PatchRowcode": " "
            },
            "9": {
                "beforePatchRowNumber": 35,
                "afterPatchRowNumber": 38,
                "PatchRowcode": " INSTALLED_APPS += [\"debug_toolbar\"]  # noqa: F405"
            },
            "10": {
                "beforePatchRowNumber": 36,
                "afterPatchRowNumber": 39,
                "PatchRowcode": " "
            }
        },
        "frontPatchFile": [
            "# pylint: disable=wildcard-import, unused-wildcard-import",
            "\"\"\"",
            "    Django settings for devel env.",
            "\"\"\"",
            "",
            "import os",
            "",
            "from .common import *  # noqa: F403",
            "",
            "# Debug settings",
            "DEBUG = True",
            "",
            "# Database settings",
            "DATABASES = {",
            "    \"default\": {",
            "        \"ENGINE\": \"django.db.backends.sqlite3\",",
            "        \"NAME\": str(TEMP_DIR / \"kiwi.devel.sqlite\"),  # noqa: F405",
            "        \"USER\": \"root\",",
            "        \"PASSWORD\": \"\",",
            "        \"HOST\": \"\",",
            "        \"PORT\": \"\",",
            "    }",
            "}",
            "",
            "",
            "CACHES = {",
            "    \"default\": {",
            "        \"BACKEND\": \"django.core.cache.backends.dummy.DummyCache\",",
            "    }",
            "}",
            "# django-debug-toolbar settings",
            "",
            "MIDDLEWARE += [\"debug_toolbar.middleware.DebugToolbarMiddleware\"]  # noqa: F405",
            "",
            "INSTALLED_APPS += [\"debug_toolbar\"]  # noqa: F405",
            "",
            "MEDIA_ROOT = os.path.join(TCMS_ROOT_PATH, \"..\", \"uploads\")  # noqa: F405",
            "",
            "# Needed by django.template.context_processors.debug:",
            "# See:",
            "# http://docs.djangoproject.com/en/dev/ref/templates/api/#django-template-context-processors-debug",
            "INTERNAL_IPS = (\"127.0.0.1\",)",
            "",
            "STATICFILES_STORAGE = \"tcms.tests.storage.RaiseWhenFileNotFound\""
        ],
        "afterPatchFile": [
            "# pylint: disable=wildcard-import, unused-wildcard-import",
            "\"\"\"",
            "    Django settings for devel env.",
            "\"\"\"",
            "",
            "import os",
            "",
            "from .common import *  # noqa: F403",
            "",
            "# Debug settings",
            "DEBUG = True",
            "",
            "# Database settings",
            "DATABASES = {",
            "    \"default\": {",
            "        \"ENGINE\": \"django.db.backends.sqlite3\",",
            "        \"NAME\": str(TEMP_DIR / \"kiwi.devel.sqlite\"),  # noqa: F405",
            "        \"USER\": \"root\",",
            "        \"PASSWORD\": \"\",",
            "        \"HOST\": \"\",",
            "        \"PORT\": \"\",",
            "    }",
            "}",
            "",
            "",
            "CACHES = {",
            "    \"default\": {",
            "        \"BACKEND\": \"django.core.cache.backends.dummy.DummyCache\",",
            "    }",
            "}",
            "# django-debug-toolbar settings",
            "",
            "MIDDLEWARE += [  # noqa: F405",
            "    \"debug_toolbar.middleware.DebugToolbarMiddleware\",",
            "    \"tcms.core.middleware.ExtraHeadersMiddleware\",",
            "]",
            "",
            "INSTALLED_APPS += [\"debug_toolbar\"]  # noqa: F405",
            "",
            "MEDIA_ROOT = os.path.join(TCMS_ROOT_PATH, \"..\", \"uploads\")  # noqa: F405",
            "",
            "# Needed by django.template.context_processors.debug:",
            "# See:",
            "# http://docs.djangoproject.com/en/dev/ref/templates/api/#django-template-context-processors-debug",
            "INTERNAL_IPS = (\"127.0.0.1\",)",
            "",
            "STATICFILES_STORAGE = \"tcms.tests.storage.RaiseWhenFileNotFound\""
        ],
        "action": [
            "0",
            "0",
            "0",
            "2",
            "2",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0"
        ],
        "dele_reviseLocation": {
            "33": []
        },
        "addLocation": []
    }
}