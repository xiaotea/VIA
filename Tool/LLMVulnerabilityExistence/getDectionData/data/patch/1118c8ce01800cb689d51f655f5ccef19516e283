{
    "jupyter_core/application.py": {
        "Patch": {
            "0": {
                "beforePatchRowNumber": 88,
                "afterPatchRowNumber": 88,
                "PatchRowcode": "     def config_file_paths(self):"
            },
            "1": {
                "beforePatchRowNumber": 89,
                "afterPatchRowNumber": 89,
                "PatchRowcode": "         path = jupyter_config_path()"
            },
            "2": {
                "beforePatchRowNumber": 90,
                "afterPatchRowNumber": 90,
                "PatchRowcode": "         if self.config_dir not in path:"
            },
            "3": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 91,
                "PatchRowcode": "+            # Insert config dir as first item."
            },
            "4": {
                "beforePatchRowNumber": 91,
                "afterPatchRowNumber": 92,
                "PatchRowcode": "             path.insert(0, self.config_dir)"
            },
            "5": {
                "beforePatchRowNumber": 92,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-        path.insert(0, os.getcwd())"
            },
            "6": {
                "beforePatchRowNumber": 93,
                "afterPatchRowNumber": 93,
                "PatchRowcode": "         return path"
            },
            "7": {
                "beforePatchRowNumber": 94,
                "afterPatchRowNumber": 94,
                "PatchRowcode": " "
            },
            "8": {
                "beforePatchRowNumber": 95,
                "afterPatchRowNumber": 95,
                "PatchRowcode": "     data_dir = Unicode()"
            }
        },
        "frontPatchFile": [
            "\"\"\"",
            "A base Application class for Jupyter applications.",
            "",
            "All Jupyter applications should inherit from this.",
            "\"\"\"",
            "",
            "# Copyright (c) Jupyter Development Team.",
            "# Distributed under the terms of the Modified BSD License.",
            "",
            "import logging",
            "import os",
            "import sys",
            "from copy import deepcopy",
            "from shutil import which",
            "",
            "from traitlets import Bool, List, Unicode, observe",
            "from traitlets.config.application import Application, catch_config_error",
            "from traitlets.config.loader import ConfigFileNotFound",
            "",
            "from .paths import (",
            "    allow_insecure_writes,",
            "    issue_insecure_write_warning,",
            "    jupyter_config_dir,",
            "    jupyter_config_path,",
            "    jupyter_data_dir,",
            "    jupyter_path,",
            "    jupyter_runtime_dir,",
            ")",
            "from .utils import ensure_dir_exists",
            "",
            "# aliases and flags",
            "",
            "base_aliases = {}",
            "if isinstance(Application.aliases, dict):",
            "    # traitlets 5",
            "    base_aliases.update(Application.aliases)",
            "_jupyter_aliases = {",
            "    \"log-level\": \"Application.log_level\",",
            "    \"config\": \"JupyterApp.config_file\",",
            "}",
            "base_aliases.update(_jupyter_aliases)",
            "",
            "base_flags = {}",
            "if isinstance(Application.flags, dict):",
            "    # traitlets 5",
            "    base_flags.update(Application.flags)",
            "_jupyter_flags = {",
            "    \"debug\": (",
            "        {\"Application\": {\"log_level\": logging.DEBUG}},",
            "        \"set log level to logging.DEBUG (maximize logging output)\",",
            "    ),",
            "    \"generate-config\": ({\"JupyterApp\": {\"generate_config\": True}}, \"generate default config file\"),",
            "    \"y\": (",
            "        {\"JupyterApp\": {\"answer_yes\": True}},",
            "        \"Answer yes to any questions instead of prompting.\",",
            "    ),",
            "}",
            "base_flags.update(_jupyter_flags)",
            "",
            "",
            "class NoStart(Exception):",
            "    \"\"\"Exception to raise when an application shouldn't start\"\"\"",
            "",
            "",
            "class JupyterApp(Application):",
            "    \"\"\"Base class for Jupyter applications\"\"\"",
            "",
            "    name = \"jupyter\"  # override in subclasses",
            "    description = \"A Jupyter Application\"",
            "",
            "    aliases = base_aliases",
            "    flags = base_flags",
            "",
            "    def _log_level_default(self):",
            "        return logging.INFO",
            "",
            "    jupyter_path = List(Unicode())",
            "",
            "    def _jupyter_path_default(self):",
            "        return jupyter_path()",
            "",
            "    config_dir = Unicode()",
            "",
            "    def _config_dir_default(self):",
            "        return jupyter_config_dir()",
            "",
            "    @property",
            "    def config_file_paths(self):",
            "        path = jupyter_config_path()",
            "        if self.config_dir not in path:",
            "            path.insert(0, self.config_dir)",
            "        path.insert(0, os.getcwd())",
            "        return path",
            "",
            "    data_dir = Unicode()",
            "",
            "    def _data_dir_default(self):",
            "        d = jupyter_data_dir()",
            "        ensure_dir_exists(d, mode=0o700)",
            "        return d",
            "",
            "    runtime_dir = Unicode()",
            "",
            "    def _runtime_dir_default(self):",
            "        rd = jupyter_runtime_dir()",
            "        ensure_dir_exists(rd, mode=0o700)",
            "        return rd",
            "",
            "    @observe(\"runtime_dir\")",
            "    def _runtime_dir_changed(self, change):",
            "        ensure_dir_exists(change[\"new\"], mode=0o700)",
            "",
            "    generate_config = Bool(False, config=True, help=\"\"\"Generate default config file.\"\"\")",
            "",
            "    config_file_name = Unicode(config=True, help=\"Specify a config file to load.\")",
            "",
            "    def _config_file_name_default(self):",
            "        if not self.name:",
            "            return \"\"",
            "        return self.name.replace(\"-\", \"_\") + \"_config\"",
            "",
            "    config_file = Unicode(",
            "        config=True,",
            "        help=\"\"\"Full path of a config file.\"\"\",",
            "    )",
            "",
            "    answer_yes = Bool(False, config=True, help=\"\"\"Answer yes to any prompts.\"\"\")",
            "",
            "    def write_default_config(self):",
            "        \"\"\"Write our default config to a .py config file\"\"\"",
            "        if self.config_file:",
            "            config_file = self.config_file",
            "        else:",
            "            config_file = os.path.join(self.config_dir, self.config_file_name + \".py\")",
            "",
            "        if os.path.exists(config_file) and not self.answer_yes:",
            "            answer = \"\"",
            "",
            "            def ask():",
            "                prompt = \"Overwrite %s with default config? [y/N]\" % config_file",
            "                try:",
            "                    return input(prompt).lower() or \"n\"",
            "                except KeyboardInterrupt:",
            "                    print(\"\")  # empty line",
            "                    return \"n\"",
            "",
            "            answer = ask()",
            "            while not answer.startswith((\"y\", \"n\")):",
            "                print(\"Please answer 'yes' or 'no'\")",
            "                answer = ask()",
            "            if answer.startswith(\"n\"):",
            "                return",
            "",
            "        config_text = self.generate_config_file()",
            "        if isinstance(config_text, bytes):",
            "            config_text = config_text.decode(\"utf8\")",
            "        print(\"Writing default config to: %s\" % config_file)",
            "        ensure_dir_exists(os.path.abspath(os.path.dirname(config_file)), 0o700)",
            "        with open(config_file, mode=\"w\", encoding=\"utf-8\") as f:",
            "            f.write(config_text)",
            "",
            "    def migrate_config(self):",
            "        \"\"\"Migrate config/data from IPython 3\"\"\"",
            "        if os.path.exists(os.path.join(self.config_dir, \"migrated\")):",
            "            # already migrated",
            "            return",
            "",
            "        from .migrate import get_ipython_dir, migrate",
            "",
            "        # No IPython dir, nothing to migrate",
            "        if not os.path.exists(get_ipython_dir()):",
            "            return",
            "",
            "        migrate()",
            "",
            "    def load_config_file(self, suppress_errors=True):",
            "        \"\"\"Load the config file.",
            "",
            "        By default, errors in loading config are handled, and a warning",
            "        printed on screen. For testing, the suppress_errors option is set",
            "        to False, so errors will make tests fail.",
            "        \"\"\"",
            "        self.log.debug(\"Searching %s for config files\", self.config_file_paths)",
            "        base_config = \"jupyter_config\"",
            "        try:",
            "            super().load_config_file(",
            "                base_config,",
            "                path=self.config_file_paths,",
            "            )",
            "        except ConfigFileNotFound:",
            "            # ignore errors loading parent",
            "            self.log.debug(\"Config file %s not found\", base_config)",
            "",
            "        if self.config_file:",
            "            path, config_file_name = os.path.split(self.config_file)",
            "        else:",
            "            path = self.config_file_paths",
            "            config_file_name = self.config_file_name",
            "",
            "            if not config_file_name or (config_file_name == base_config):",
            "                return",
            "",
            "        try:",
            "            super().load_config_file(config_file_name, path=path)",
            "        except ConfigFileNotFound:",
            "            self.log.debug(\"Config file not found, skipping: %s\", config_file_name)",
            "        except Exception:",
            "            # Reraise errors for testing purposes, or if set in",
            "            # self.raise_config_file_errors",
            "            if (not suppress_errors) or self.raise_config_file_errors:",
            "                raise",
            "            self.log.warning(\"Error loading config file: %s\" % config_file_name, exc_info=True)",
            "",
            "    # subcommand-related",
            "    def _find_subcommand(self, name):",
            "        name = f\"{self.name}-{name}\"",
            "        return which(name)",
            "",
            "    @property",
            "    def _dispatching(self):",
            "        \"\"\"Return whether we are dispatching to another command",
            "",
            "        or running ourselves.",
            "        \"\"\"",
            "        return bool(self.generate_config or self.subapp or self.subcommand)",
            "",
            "    subcommand = Unicode()",
            "",
            "    @catch_config_error",
            "    def initialize(self, argv=None):",
            "        # don't hook up crash handler before parsing command-line",
            "        if argv is None:",
            "            argv = sys.argv[1:]",
            "        if argv:",
            "            subc = self._find_subcommand(argv[0])",
            "            if subc:",
            "                self.argv = argv",
            "                self.subcommand = subc",
            "                return",
            "        self.parse_command_line(argv)",
            "        cl_config = deepcopy(self.config)",
            "        if self._dispatching:",
            "            return",
            "        self.migrate_config()",
            "        self.load_config_file()",
            "        # enforce cl-opts override configfile opts:",
            "        self.update_config(cl_config)",
            "        if allow_insecure_writes:",
            "            issue_insecure_write_warning()",
            "",
            "    def start(self):",
            "        \"\"\"Start the whole thing\"\"\"",
            "        if self.subcommand:",
            "            os.execv(self.subcommand, [self.subcommand] + self.argv[1:])",
            "            raise NoStart()",
            "",
            "        if self.subapp:",
            "            self.subapp.start()",
            "            raise NoStart()",
            "",
            "        if self.generate_config:",
            "            self.write_default_config()",
            "            raise NoStart()",
            "",
            "    @classmethod",
            "    def launch_instance(cls, argv=None, **kwargs):",
            "        \"\"\"Launch an instance of a Jupyter Application\"\"\"",
            "        try:",
            "            return super().launch_instance(argv=argv, **kwargs)",
            "        except NoStart:",
            "            return",
            "",
            "",
            "if __name__ == \"__main__\":",
            "    JupyterApp.launch_instance()"
        ],
        "afterPatchFile": [
            "\"\"\"",
            "A base Application class for Jupyter applications.",
            "",
            "All Jupyter applications should inherit from this.",
            "\"\"\"",
            "",
            "# Copyright (c) Jupyter Development Team.",
            "# Distributed under the terms of the Modified BSD License.",
            "",
            "import logging",
            "import os",
            "import sys",
            "from copy import deepcopy",
            "from shutil import which",
            "",
            "from traitlets import Bool, List, Unicode, observe",
            "from traitlets.config.application import Application, catch_config_error",
            "from traitlets.config.loader import ConfigFileNotFound",
            "",
            "from .paths import (",
            "    allow_insecure_writes,",
            "    issue_insecure_write_warning,",
            "    jupyter_config_dir,",
            "    jupyter_config_path,",
            "    jupyter_data_dir,",
            "    jupyter_path,",
            "    jupyter_runtime_dir,",
            ")",
            "from .utils import ensure_dir_exists",
            "",
            "# aliases and flags",
            "",
            "base_aliases = {}",
            "if isinstance(Application.aliases, dict):",
            "    # traitlets 5",
            "    base_aliases.update(Application.aliases)",
            "_jupyter_aliases = {",
            "    \"log-level\": \"Application.log_level\",",
            "    \"config\": \"JupyterApp.config_file\",",
            "}",
            "base_aliases.update(_jupyter_aliases)",
            "",
            "base_flags = {}",
            "if isinstance(Application.flags, dict):",
            "    # traitlets 5",
            "    base_flags.update(Application.flags)",
            "_jupyter_flags = {",
            "    \"debug\": (",
            "        {\"Application\": {\"log_level\": logging.DEBUG}},",
            "        \"set log level to logging.DEBUG (maximize logging output)\",",
            "    ),",
            "    \"generate-config\": ({\"JupyterApp\": {\"generate_config\": True}}, \"generate default config file\"),",
            "    \"y\": (",
            "        {\"JupyterApp\": {\"answer_yes\": True}},",
            "        \"Answer yes to any questions instead of prompting.\",",
            "    ),",
            "}",
            "base_flags.update(_jupyter_flags)",
            "",
            "",
            "class NoStart(Exception):",
            "    \"\"\"Exception to raise when an application shouldn't start\"\"\"",
            "",
            "",
            "class JupyterApp(Application):",
            "    \"\"\"Base class for Jupyter applications\"\"\"",
            "",
            "    name = \"jupyter\"  # override in subclasses",
            "    description = \"A Jupyter Application\"",
            "",
            "    aliases = base_aliases",
            "    flags = base_flags",
            "",
            "    def _log_level_default(self):",
            "        return logging.INFO",
            "",
            "    jupyter_path = List(Unicode())",
            "",
            "    def _jupyter_path_default(self):",
            "        return jupyter_path()",
            "",
            "    config_dir = Unicode()",
            "",
            "    def _config_dir_default(self):",
            "        return jupyter_config_dir()",
            "",
            "    @property",
            "    def config_file_paths(self):",
            "        path = jupyter_config_path()",
            "        if self.config_dir not in path:",
            "            # Insert config dir as first item.",
            "            path.insert(0, self.config_dir)",
            "        return path",
            "",
            "    data_dir = Unicode()",
            "",
            "    def _data_dir_default(self):",
            "        d = jupyter_data_dir()",
            "        ensure_dir_exists(d, mode=0o700)",
            "        return d",
            "",
            "    runtime_dir = Unicode()",
            "",
            "    def _runtime_dir_default(self):",
            "        rd = jupyter_runtime_dir()",
            "        ensure_dir_exists(rd, mode=0o700)",
            "        return rd",
            "",
            "    @observe(\"runtime_dir\")",
            "    def _runtime_dir_changed(self, change):",
            "        ensure_dir_exists(change[\"new\"], mode=0o700)",
            "",
            "    generate_config = Bool(False, config=True, help=\"\"\"Generate default config file.\"\"\")",
            "",
            "    config_file_name = Unicode(config=True, help=\"Specify a config file to load.\")",
            "",
            "    def _config_file_name_default(self):",
            "        if not self.name:",
            "            return \"\"",
            "        return self.name.replace(\"-\", \"_\") + \"_config\"",
            "",
            "    config_file = Unicode(",
            "        config=True,",
            "        help=\"\"\"Full path of a config file.\"\"\",",
            "    )",
            "",
            "    answer_yes = Bool(False, config=True, help=\"\"\"Answer yes to any prompts.\"\"\")",
            "",
            "    def write_default_config(self):",
            "        \"\"\"Write our default config to a .py config file\"\"\"",
            "        if self.config_file:",
            "            config_file = self.config_file",
            "        else:",
            "            config_file = os.path.join(self.config_dir, self.config_file_name + \".py\")",
            "",
            "        if os.path.exists(config_file) and not self.answer_yes:",
            "            answer = \"\"",
            "",
            "            def ask():",
            "                prompt = \"Overwrite %s with default config? [y/N]\" % config_file",
            "                try:",
            "                    return input(prompt).lower() or \"n\"",
            "                except KeyboardInterrupt:",
            "                    print(\"\")  # empty line",
            "                    return \"n\"",
            "",
            "            answer = ask()",
            "            while not answer.startswith((\"y\", \"n\")):",
            "                print(\"Please answer 'yes' or 'no'\")",
            "                answer = ask()",
            "            if answer.startswith(\"n\"):",
            "                return",
            "",
            "        config_text = self.generate_config_file()",
            "        if isinstance(config_text, bytes):",
            "            config_text = config_text.decode(\"utf8\")",
            "        print(\"Writing default config to: %s\" % config_file)",
            "        ensure_dir_exists(os.path.abspath(os.path.dirname(config_file)), 0o700)",
            "        with open(config_file, mode=\"w\", encoding=\"utf-8\") as f:",
            "            f.write(config_text)",
            "",
            "    def migrate_config(self):",
            "        \"\"\"Migrate config/data from IPython 3\"\"\"",
            "        if os.path.exists(os.path.join(self.config_dir, \"migrated\")):",
            "            # already migrated",
            "            return",
            "",
            "        from .migrate import get_ipython_dir, migrate",
            "",
            "        # No IPython dir, nothing to migrate",
            "        if not os.path.exists(get_ipython_dir()):",
            "            return",
            "",
            "        migrate()",
            "",
            "    def load_config_file(self, suppress_errors=True):",
            "        \"\"\"Load the config file.",
            "",
            "        By default, errors in loading config are handled, and a warning",
            "        printed on screen. For testing, the suppress_errors option is set",
            "        to False, so errors will make tests fail.",
            "        \"\"\"",
            "        self.log.debug(\"Searching %s for config files\", self.config_file_paths)",
            "        base_config = \"jupyter_config\"",
            "        try:",
            "            super().load_config_file(",
            "                base_config,",
            "                path=self.config_file_paths,",
            "            )",
            "        except ConfigFileNotFound:",
            "            # ignore errors loading parent",
            "            self.log.debug(\"Config file %s not found\", base_config)",
            "",
            "        if self.config_file:",
            "            path, config_file_name = os.path.split(self.config_file)",
            "        else:",
            "            path = self.config_file_paths",
            "            config_file_name = self.config_file_name",
            "",
            "            if not config_file_name or (config_file_name == base_config):",
            "                return",
            "",
            "        try:",
            "            super().load_config_file(config_file_name, path=path)",
            "        except ConfigFileNotFound:",
            "            self.log.debug(\"Config file not found, skipping: %s\", config_file_name)",
            "        except Exception:",
            "            # Reraise errors for testing purposes, or if set in",
            "            # self.raise_config_file_errors",
            "            if (not suppress_errors) or self.raise_config_file_errors:",
            "                raise",
            "            self.log.warning(\"Error loading config file: %s\" % config_file_name, exc_info=True)",
            "",
            "    # subcommand-related",
            "    def _find_subcommand(self, name):",
            "        name = f\"{self.name}-{name}\"",
            "        return which(name)",
            "",
            "    @property",
            "    def _dispatching(self):",
            "        \"\"\"Return whether we are dispatching to another command",
            "",
            "        or running ourselves.",
            "        \"\"\"",
            "        return bool(self.generate_config or self.subapp or self.subcommand)",
            "",
            "    subcommand = Unicode()",
            "",
            "    @catch_config_error",
            "    def initialize(self, argv=None):",
            "        # don't hook up crash handler before parsing command-line",
            "        if argv is None:",
            "            argv = sys.argv[1:]",
            "        if argv:",
            "            subc = self._find_subcommand(argv[0])",
            "            if subc:",
            "                self.argv = argv",
            "                self.subcommand = subc",
            "                return",
            "        self.parse_command_line(argv)",
            "        cl_config = deepcopy(self.config)",
            "        if self._dispatching:",
            "            return",
            "        self.migrate_config()",
            "        self.load_config_file()",
            "        # enforce cl-opts override configfile opts:",
            "        self.update_config(cl_config)",
            "        if allow_insecure_writes:",
            "            issue_insecure_write_warning()",
            "",
            "    def start(self):",
            "        \"\"\"Start the whole thing\"\"\"",
            "        if self.subcommand:",
            "            os.execv(self.subcommand, [self.subcommand] + self.argv[1:])",
            "            raise NoStart()",
            "",
            "        if self.subapp:",
            "            self.subapp.start()",
            "            raise NoStart()",
            "",
            "        if self.generate_config:",
            "            self.write_default_config()",
            "            raise NoStart()",
            "",
            "    @classmethod",
            "    def launch_instance(cls, argv=None, **kwargs):",
            "        \"\"\"Launch an instance of a Jupyter Application\"\"\"",
            "        try:",
            "            return super().launch_instance(argv=argv, **kwargs)",
            "        except NoStart:",
            "            return",
            "",
            "",
            "if __name__ == \"__main__\":",
            "    JupyterApp.launch_instance()"
        ],
        "action": [
            "0",
            "0",
            "0",
            "-1",
            "0",
            "2",
            "0",
            "0",
            "0"
        ],
        "dele_reviseLocation": {
            "92": [
                "JupyterApp",
                "config_file_paths"
            ]
        },
        "addLocation": [
            "ckan.tests.logic.action.test_create.TestResourceCreate.test_mimetype_by_upload_by_filename"
        ]
    },
    "jupyter_core/tests/test_application.py": {
        "Patch": {
            "0": {
                "beforePatchRowNumber": 69,
                "afterPatchRowNumber": 69,
                "PatchRowcode": " "
            },
            "1": {
                "beforePatchRowNumber": 70,
                "afterPatchRowNumber": 70,
                "PatchRowcode": " def test_load_config():"
            },
            "2": {
                "beforePatchRowNumber": 71,
                "afterPatchRowNumber": 71,
                "PatchRowcode": "     config_dir = mkdtemp()"
            },
            "3": {
                "beforePatchRowNumber": 72,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-    wd = mkdtemp()"
            },
            "4": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 72,
                "PatchRowcode": "+    os.environ[\"JUPYTER_CONFIG_PATH\"] = str(config_dir)"
            },
            "5": {
                "beforePatchRowNumber": 73,
                "afterPatchRowNumber": 73,
                "PatchRowcode": "     with open(pjoin(config_dir, \"dummy_app_config.py\"), \"w\", encoding=\"utf-8\") as f:"
            },
            "6": {
                "beforePatchRowNumber": 74,
                "afterPatchRowNumber": 74,
                "PatchRowcode": "         f.write(\"c.DummyApp.m = 1\\n\")"
            },
            "7": {
                "beforePatchRowNumber": 75,
                "afterPatchRowNumber": 75,
                "PatchRowcode": "         f.write(\"c.DummyApp.n = 1\")"
            },
            "8": {
                "beforePatchRowNumber": 76,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-    with patch.object(os, \"getcwd\", lambda: wd):"
            },
            "9": {
                "beforePatchRowNumber": 77,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-        app = DummyApp(config_dir=config_dir)"
            },
            "10": {
                "beforePatchRowNumber": 78,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-        app.initialize([])"
            },
            "11": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 76,
                "PatchRowcode": "+"
            },
            "12": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 77,
                "PatchRowcode": "+    app = DummyApp(config_dir=config_dir)"
            },
            "13": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 78,
                "PatchRowcode": "+    app.initialize([])"
            },
            "14": {
                "beforePatchRowNumber": 79,
                "afterPatchRowNumber": 79,
                "PatchRowcode": " "
            },
            "15": {
                "beforePatchRowNumber": 80,
                "afterPatchRowNumber": 80,
                "PatchRowcode": "     assert app.n == 1, \"Loaded config from config dir\""
            },
            "16": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 81,
                "PatchRowcode": "+    assert app.m == 1, \"Loaded config from config dir\""
            },
            "17": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 82,
                "PatchRowcode": "+"
            },
            "18": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 83,
                "PatchRowcode": "+    shutil.rmtree(config_dir)"
            },
            "19": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 84,
                "PatchRowcode": "+    del os.environ[\"JUPYTER_CONFIG_PATH\"]"
            },
            "20": {
                "beforePatchRowNumber": 81,
                "afterPatchRowNumber": 85,
                "PatchRowcode": " "
            },
            "21": {
                "beforePatchRowNumber": 82,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-    with open(pjoin(wd, \"dummy_app_config.py\"), \"w\", encoding=\"utf-8\") as f:"
            },
            "22": {
                "beforePatchRowNumber": 83,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-        f.write(\"c.DummyApp.n = 2\")"
            },
            "23": {
                "beforePatchRowNumber": 84,
                "afterPatchRowNumber": 86,
                "PatchRowcode": " "
            },
            "24": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 87,
                "PatchRowcode": "+def test_load_config_no_cwd():"
            },
            "25": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 88,
                "PatchRowcode": "+    config_dir = mkdtemp()"
            },
            "26": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 89,
                "PatchRowcode": "+    wd = mkdtemp()"
            },
            "27": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 90,
                "PatchRowcode": "+    with open(pjoin(wd, \"dummy_app_config.py\"), \"w\", encoding=\"utf-8\") as f:"
            },
            "28": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 91,
                "PatchRowcode": "+        f.write(\"c.DummyApp.m = 1\\n\")"
            },
            "29": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 92,
                "PatchRowcode": "+        f.write(\"c.DummyApp.n = 1\")"
            },
            "30": {
                "beforePatchRowNumber": 85,
                "afterPatchRowNumber": 93,
                "PatchRowcode": "     with patch.object(os, \"getcwd\", lambda: wd):"
            },
            "31": {
                "beforePatchRowNumber": 86,
                "afterPatchRowNumber": 94,
                "PatchRowcode": "         app = DummyApp(config_dir=config_dir)"
            },
            "32": {
                "beforePatchRowNumber": 87,
                "afterPatchRowNumber": 95,
                "PatchRowcode": "         app.initialize([])"
            },
            "33": {
                "beforePatchRowNumber": 88,
                "afterPatchRowNumber": 96,
                "PatchRowcode": " "
            },
            "34": {
                "beforePatchRowNumber": 89,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-    assert app.m == 1, \"Loaded config from config dir\""
            },
            "35": {
                "beforePatchRowNumber": 90,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-    assert app.n == 2, \"Loaded config from CWD\""
            },
            "36": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 97,
                "PatchRowcode": "+    assert app.n == 0"
            },
            "37": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 98,
                "PatchRowcode": "+    assert app.m == 0"
            },
            "38": {
                "beforePatchRowNumber": 91,
                "afterPatchRowNumber": 99,
                "PatchRowcode": " "
            },
            "39": {
                "beforePatchRowNumber": 92,
                "afterPatchRowNumber": 100,
                "PatchRowcode": "     shutil.rmtree(config_dir)"
            },
            "40": {
                "beforePatchRowNumber": 93,
                "afterPatchRowNumber": 101,
                "PatchRowcode": "     shutil.rmtree(wd)"
            },
            "41": {
                "beforePatchRowNumber": 94,
                "afterPatchRowNumber": 102,
                "PatchRowcode": " "
            },
            "42": {
                "beforePatchRowNumber": 95,
                "afterPatchRowNumber": 103,
                "PatchRowcode": " "
            },
            "43": {
                "beforePatchRowNumber": 96,
                "afterPatchRowNumber": 104,
                "PatchRowcode": " def test_load_bad_config():"
            },
            "44": {
                "beforePatchRowNumber": 97,
                "afterPatchRowNumber": 105,
                "PatchRowcode": "     config_dir = mkdtemp()"
            },
            "45": {
                "beforePatchRowNumber": 98,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-    wd = mkdtemp()"
            },
            "46": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 106,
                "PatchRowcode": "+    os.environ[\"JUPYTER_CONFIG_PATH\"] = str(config_dir)"
            },
            "47": {
                "beforePatchRowNumber": 99,
                "afterPatchRowNumber": 107,
                "PatchRowcode": "     with open(pjoin(config_dir, \"dummy_app_config.py\"), \"w\", encoding=\"utf-8\") as f:"
            },
            "48": {
                "beforePatchRowNumber": 100,
                "afterPatchRowNumber": 108,
                "PatchRowcode": "         f.write('c.DummyApp.m = \"a\\n')  # Syntax error"
            },
            "49": {
                "beforePatchRowNumber": 101,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-    with patch.object(os, \"getcwd\", lambda: wd):"
            },
            "50": {
                "beforePatchRowNumber": 102,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-        with pytest.raises(SyntaxError):"
            },
            "51": {
                "beforePatchRowNumber": 103,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            app = DummyApp(config_dir=config_dir)"
            },
            "52": {
                "beforePatchRowNumber": 104,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            app.raise_config_file_errors = True"
            },
            "53": {
                "beforePatchRowNumber": 105,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-            app.initialize([])"
            },
            "54": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 109,
                "PatchRowcode": "+"
            },
            "55": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 110,
                "PatchRowcode": "+    with pytest.raises(SyntaxError):"
            },
            "56": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 111,
                "PatchRowcode": "+        app = DummyApp(config_dir=config_dir)"
            },
            "57": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 112,
                "PatchRowcode": "+        app.raise_config_file_errors = True"
            },
            "58": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 113,
                "PatchRowcode": "+        app.initialize([])"
            },
            "59": {
                "beforePatchRowNumber": 106,
                "afterPatchRowNumber": 114,
                "PatchRowcode": " "
            },
            "60": {
                "beforePatchRowNumber": 107,
                "afterPatchRowNumber": 115,
                "PatchRowcode": "     shutil.rmtree(config_dir)"
            },
            "61": {
                "beforePatchRowNumber": 108,
                "afterPatchRowNumber": "",
                "PatchRowcode": "-    shutil.rmtree(wd)"
            },
            "62": {
                "beforePatchRowNumber": "",
                "afterPatchRowNumber": 116,
                "PatchRowcode": "+    del os.environ[\"JUPYTER_CONFIG_PATH\"]"
            },
            "63": {
                "beforePatchRowNumber": 109,
                "afterPatchRowNumber": 117,
                "PatchRowcode": " "
            },
            "64": {
                "beforePatchRowNumber": 110,
                "afterPatchRowNumber": 118,
                "PatchRowcode": " "
            },
            "65": {
                "beforePatchRowNumber": 111,
                "afterPatchRowNumber": 119,
                "PatchRowcode": " def test_runtime_dir_changed():"
            }
        },
        "frontPatchFile": [
            "import os",
            "import shutil",
            "from tempfile import mkdtemp",
            "from unittest.mock import patch",
            "",
            "import pytest",
            "from traitlets import Integer",
            "",
            "from jupyter_core.application import JupyterApp, NoStart",
            "",
            "pjoin = os.path.join",
            "",
            "",
            "def test_basic():",
            "    JupyterApp()",
            "",
            "",
            "def test_default_traits():",
            "    app = JupyterApp()",
            "    for trait_name in app.traits():",
            "        getattr(app, trait_name)",
            "",
            "",
            "class DummyApp(JupyterApp):",
            "    name = \"dummy-app\"",
            "    m = Integer(0, config=True)",
            "    n = Integer(0, config=True)",
            "",
            "",
            "_dummy_config = \"\"\"",
            "c.DummyApp.n = 10",
            "\"\"\"",
            "",
            "",
            "def test_custom_config():",
            "    app = DummyApp()",
            "    td = mkdtemp()",
            "    fname = pjoin(td, \"config.py\")",
            "    with open(fname, \"w\", encoding=\"utf-8\") as f:",
            "        f.write(_dummy_config)",
            "    app.initialize([\"--config\", fname])",
            "    shutil.rmtree(td)",
            "    assert app.config_file == fname",
            "    assert app.n == 10",
            "",
            "",
            "def test_cli_override():",
            "    app = DummyApp()",
            "    td = mkdtemp()",
            "    fname = pjoin(td, \"config.py\")",
            "    with open(fname, \"w\", encoding=\"utf-8\") as f:",
            "        f.write(_dummy_config)",
            "    app.initialize([\"--config\", fname, \"--DummyApp.n=20\"])",
            "    shutil.rmtree(td)",
            "    assert app.n == 20",
            "",
            "",
            "def test_generate_config():",
            "    td = mkdtemp()",
            "    app = DummyApp(config_dir=td)",
            "    app.initialize([\"--generate-config\"])",
            "    assert app.generate_config",
            "",
            "    with pytest.raises(NoStart):",
            "        app.start()",
            "",
            "    assert os.path.exists(os.path.join(td, \"dummy_app_config.py\"))",
            "",
            "",
            "def test_load_config():",
            "    config_dir = mkdtemp()",
            "    wd = mkdtemp()",
            "    with open(pjoin(config_dir, \"dummy_app_config.py\"), \"w\", encoding=\"utf-8\") as f:",
            "        f.write(\"c.DummyApp.m = 1\\n\")",
            "        f.write(\"c.DummyApp.n = 1\")",
            "    with patch.object(os, \"getcwd\", lambda: wd):",
            "        app = DummyApp(config_dir=config_dir)",
            "        app.initialize([])",
            "",
            "    assert app.n == 1, \"Loaded config from config dir\"",
            "",
            "    with open(pjoin(wd, \"dummy_app_config.py\"), \"w\", encoding=\"utf-8\") as f:",
            "        f.write(\"c.DummyApp.n = 2\")",
            "",
            "    with patch.object(os, \"getcwd\", lambda: wd):",
            "        app = DummyApp(config_dir=config_dir)",
            "        app.initialize([])",
            "",
            "    assert app.m == 1, \"Loaded config from config dir\"",
            "    assert app.n == 2, \"Loaded config from CWD\"",
            "",
            "    shutil.rmtree(config_dir)",
            "    shutil.rmtree(wd)",
            "",
            "",
            "def test_load_bad_config():",
            "    config_dir = mkdtemp()",
            "    wd = mkdtemp()",
            "    with open(pjoin(config_dir, \"dummy_app_config.py\"), \"w\", encoding=\"utf-8\") as f:",
            "        f.write('c.DummyApp.m = \"a\\n')  # Syntax error",
            "    with patch.object(os, \"getcwd\", lambda: wd):",
            "        with pytest.raises(SyntaxError):",
            "            app = DummyApp(config_dir=config_dir)",
            "            app.raise_config_file_errors = True",
            "            app.initialize([])",
            "",
            "    shutil.rmtree(config_dir)",
            "    shutil.rmtree(wd)",
            "",
            "",
            "def test_runtime_dir_changed():",
            "    app = DummyApp()",
            "    td = mkdtemp()",
            "    shutil.rmtree(td)",
            "    app.runtime_dir = td",
            "    assert os.path.isdir(td)",
            "    shutil.rmtree(td)"
        ],
        "afterPatchFile": [
            "import os",
            "import shutil",
            "from tempfile import mkdtemp",
            "from unittest.mock import patch",
            "",
            "import pytest",
            "from traitlets import Integer",
            "",
            "from jupyter_core.application import JupyterApp, NoStart",
            "",
            "pjoin = os.path.join",
            "",
            "",
            "def test_basic():",
            "    JupyterApp()",
            "",
            "",
            "def test_default_traits():",
            "    app = JupyterApp()",
            "    for trait_name in app.traits():",
            "        getattr(app, trait_name)",
            "",
            "",
            "class DummyApp(JupyterApp):",
            "    name = \"dummy-app\"",
            "    m = Integer(0, config=True)",
            "    n = Integer(0, config=True)",
            "",
            "",
            "_dummy_config = \"\"\"",
            "c.DummyApp.n = 10",
            "\"\"\"",
            "",
            "",
            "def test_custom_config():",
            "    app = DummyApp()",
            "    td = mkdtemp()",
            "    fname = pjoin(td, \"config.py\")",
            "    with open(fname, \"w\", encoding=\"utf-8\") as f:",
            "        f.write(_dummy_config)",
            "    app.initialize([\"--config\", fname])",
            "    shutil.rmtree(td)",
            "    assert app.config_file == fname",
            "    assert app.n == 10",
            "",
            "",
            "def test_cli_override():",
            "    app = DummyApp()",
            "    td = mkdtemp()",
            "    fname = pjoin(td, \"config.py\")",
            "    with open(fname, \"w\", encoding=\"utf-8\") as f:",
            "        f.write(_dummy_config)",
            "    app.initialize([\"--config\", fname, \"--DummyApp.n=20\"])",
            "    shutil.rmtree(td)",
            "    assert app.n == 20",
            "",
            "",
            "def test_generate_config():",
            "    td = mkdtemp()",
            "    app = DummyApp(config_dir=td)",
            "    app.initialize([\"--generate-config\"])",
            "    assert app.generate_config",
            "",
            "    with pytest.raises(NoStart):",
            "        app.start()",
            "",
            "    assert os.path.exists(os.path.join(td, \"dummy_app_config.py\"))",
            "",
            "",
            "def test_load_config():",
            "    config_dir = mkdtemp()",
            "    os.environ[\"JUPYTER_CONFIG_PATH\"] = str(config_dir)",
            "    with open(pjoin(config_dir, \"dummy_app_config.py\"), \"w\", encoding=\"utf-8\") as f:",
            "        f.write(\"c.DummyApp.m = 1\\n\")",
            "        f.write(\"c.DummyApp.n = 1\")",
            "",
            "    app = DummyApp(config_dir=config_dir)",
            "    app.initialize([])",
            "",
            "    assert app.n == 1, \"Loaded config from config dir\"",
            "    assert app.m == 1, \"Loaded config from config dir\"",
            "",
            "    shutil.rmtree(config_dir)",
            "    del os.environ[\"JUPYTER_CONFIG_PATH\"]",
            "",
            "",
            "def test_load_config_no_cwd():",
            "    config_dir = mkdtemp()",
            "    wd = mkdtemp()",
            "    with open(pjoin(wd, \"dummy_app_config.py\"), \"w\", encoding=\"utf-8\") as f:",
            "        f.write(\"c.DummyApp.m = 1\\n\")",
            "        f.write(\"c.DummyApp.n = 1\")",
            "    with patch.object(os, \"getcwd\", lambda: wd):",
            "        app = DummyApp(config_dir=config_dir)",
            "        app.initialize([])",
            "",
            "    assert app.n == 0",
            "    assert app.m == 0",
            "",
            "    shutil.rmtree(config_dir)",
            "    shutil.rmtree(wd)",
            "",
            "",
            "def test_load_bad_config():",
            "    config_dir = mkdtemp()",
            "    os.environ[\"JUPYTER_CONFIG_PATH\"] = str(config_dir)",
            "    with open(pjoin(config_dir, \"dummy_app_config.py\"), \"w\", encoding=\"utf-8\") as f:",
            "        f.write('c.DummyApp.m = \"a\\n')  # Syntax error",
            "",
            "    with pytest.raises(SyntaxError):",
            "        app = DummyApp(config_dir=config_dir)",
            "        app.raise_config_file_errors = True",
            "        app.initialize([])",
            "",
            "    shutil.rmtree(config_dir)",
            "    del os.environ[\"JUPYTER_CONFIG_PATH\"]",
            "",
            "",
            "def test_runtime_dir_changed():",
            "    app = DummyApp()",
            "    td = mkdtemp()",
            "    shutil.rmtree(td)",
            "    app.runtime_dir = td",
            "    assert os.path.isdir(td)",
            "    shutil.rmtree(td)"
        ],
        "action": [
            "0",
            "0",
            "0",
            "2",
            "2",
            "0",
            "0",
            "0",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "0",
            "0",
            "2",
            "2",
            "2",
            "2",
            "0",
            "2",
            "2",
            "0",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "2",
            "2",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "0",
            "2",
            "2",
            "0",
            "0",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "2",
            "0",
            "0",
            "2",
            "2",
            "0",
            "0",
            "0"
        ],
        "dele_reviseLocation": {
            "72": [
                "test_load_config"
            ],
            "76": [
                "test_load_config"
            ],
            "77": [
                "test_load_config"
            ],
            "78": [
                "test_load_config"
            ],
            "82": [
                "test_load_config"
            ],
            "83": [
                "test_load_config"
            ],
            "89": [
                "test_load_config"
            ],
            "90": [
                "test_load_config"
            ],
            "98": [
                "test_load_bad_config"
            ],
            "101": [
                "test_load_bad_config"
            ],
            "102": [
                "test_load_bad_config"
            ],
            "103": [
                "test_load_bad_config"
            ],
            "104": [
                "test_load_bad_config"
            ],
            "105": [
                "test_load_bad_config"
            ],
            "108": [
                "test_load_bad_config"
            ]
        },
        "addLocation": []
    }
}